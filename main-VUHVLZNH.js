var vx=Object.defineProperty,yx=Object.defineProperties;var Ix=Object.getOwnPropertyDescriptors;var Jl=Object.getOwnPropertySymbols,Ex=Object.getPrototypeOf,TC=Object.prototype.hasOwnProperty,DC=Object.prototype.propertyIsEnumerable,wx=Reflect.get;var bC=(n,e,t)=>e in n?vx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,w=(n,e)=>{for(var t in e||={})TC.call(e,t)&&bC(n,t,e[t]);if(Jl)for(var t of Jl(e))DC.call(e,t)&&bC(n,t,e[t]);return n},$=(n,e)=>yx(n,Ix(e));var SC=(n,e)=>{var t={};for(var r in n)TC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Jl)for(var r of Jl(n))e.indexOf(r)<0&&DC.call(n,r)&&(t[r]=n[r]);return t};var br=(n,e,t)=>wx(Ex(n),t,e);var p=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});function AC(n,e){return Object.is(n,e)}var Ve=null,Zl=!1,Xl=1,Tr=Symbol("SIGNAL");function te(n){let e=Ve;return Ve=n,e}function NC(){return Ve}var Ta={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nm(n){if(Zl)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(n);let e=Ve.nextProducerIndex++;if(ru(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==n&&ba(Ve)){let t=Ve.producerNode[e];nu(t,Ve.producerIndexOfThis[e])}Ve.producerNode[e]!==n&&(Ve.producerNode[e]=n,Ve.producerIndexOfThis[e]=ba(Ve)?PC(n,Ve,e):0),Ve.producerLastReadVersion[e]=n.version}function Cx(){Xl++}function RC(n){if(!(ba(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Xl)){if(!n.producerMustRecompute(n)&&!im(n)){n.dirty=!1,n.lastCleanEpoch=Xl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Xl}}function MC(n){if(n.liveConsumerNode===void 0)return;let e=Zl;Zl=!0;try{for(let t of n.liveConsumerNode)t.dirty||bx(t)}finally{Zl=e}}function kC(){return Ve?.consumerAllowSignalWrites!==!1}function bx(n){n.dirty=!0,MC(n),n.consumerMarkedDirty?.(n)}function tu(n){return n&&(n.nextProducerIndex=0),te(n)}function rm(n,e){if(te(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ba(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)nu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function im(n){ru(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(RC(t),r!==t.version))return!0}return!1}function sm(n){if(ru(n),ba(n))for(let e=0;e<n.producerNode.length;e++)nu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function PC(n,e,t){if(OC(n),n.liveConsumerNode.length===0&&xC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=PC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function nu(n,e){if(OC(n),n.liveConsumerNode.length===1&&xC(n))for(let r=0;r<n.producerNode.length;r++)nu(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ru(i),i.producerIndexOfThis[r]=e}}function ba(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ru(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function OC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function xC(n){return n.producerNode!==void 0}function LC(n){let e=Object.create(Tx);e.computation=n;let t=()=>{if(RC(e),nm(e),e.value===eu)throw e.error;return e.value};return t[Tr]=e,t}var em=Symbol("UNSET"),tm=Symbol("COMPUTING"),eu=Symbol("ERRORED"),Tx=$(w({},Ta),{value:em,dirty:!0,error:null,equal:AC,producerMustRecompute(n){return n.value===em||n.value===tm},producerRecomputeValue(n){if(n.value===tm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=tm;let t=tu(n),r;try{r=n.computation()}catch(i){r=eu,n.error=i}finally{rm(n,t)}if(e!==em&&e!==eu&&r!==eu&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function Dx(){throw new Error}var FC=Dx;function VC(){FC()}function UC(n){FC=n}var Sx=null;function jC(n){let e=Object.create($C);e.value=n;let t=()=>(nm(e),e.value);return t[Tr]=e,t}function om(n,e){kC()||VC(),n.equal(n.value,e)||(n.value=e,Ax(n))}function BC(n,e){kC()||VC(),om(n,e(n.value))}var $C=$(w({},Ta),{equal:AC,value:void 0});function Ax(n){n.version++,Cx(),MC(n),Sx?.()}function V(n){return typeof n=="function"}function Es(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var iu=Es(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ei(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ae=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(V(r))try{r()}catch(s){e=s instanceof iu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{HC(s)}catch(o){e=e??[],o instanceof iu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new iu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)HC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ei(t,e)}remove(e){let{_finalizers:t}=this;t&&Ei(t,e),e instanceof n&&e._removeParent(this)}};Ae.EMPTY=(()=>{let n=new Ae;return n.closed=!0,n})();var am=Ae.EMPTY;function su(n){return n instanceof Ae||n&&"closed"in n&&V(n.remove)&&V(n.add)&&V(n.unsubscribe)}function HC(n){V(n)?n():n.unsubscribe()}var Qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ws={setTimeout(n,e,...t){let{delegate:r}=ws;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ws;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ou(n){ws.setTimeout(()=>{let{onUnhandledError:e}=Qt;if(e)e(n);else throw n})}function wi(){}var WC=cm("C",void 0,void 0);function zC(n){return cm("E",void 0,n)}function GC(n){return cm("N",n,void 0)}function cm(n,e,t){return{kind:n,value:e,error:t}}var Ci=null;function Cs(n){if(Qt.useDeprecatedSynchronousErrorHandling){let e=!Ci;if(e&&(Ci={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ci;if(Ci=null,t)throw r}}else n()}function qC(n){Qt.useDeprecatedSynchronousErrorHandling&&Ci&&(Ci.errorThrown=!0,Ci.error=n)}var bi=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,su(e)&&e.add(this)):this.destination=Mx}static create(e,t,r){return new bs(e,t,r)}next(e){this.isStopped?um(GC(e),this):this._next(e)}error(e){this.isStopped?um(zC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?um(WC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Nx=Function.prototype.bind;function lm(n,e){return Nx.call(n,e)}var dm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){au(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){au(r)}else au(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){au(t)}}},bs=class extends bi{constructor(e,t,r){super();let i;if(V(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Qt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&lm(e.next,s),error:e.error&&lm(e.error,s),complete:e.complete&&lm(e.complete,s)}):i=e}this.destination=new dm(i)}};function au(n){Qt.useDeprecatedSynchronousErrorHandling?qC(n):ou(n)}function Rx(n){throw n}function um(n,e){let{onStoppedNotification:t}=Qt;t&&ws.setTimeout(()=>t(n,e))}var Mx={closed:!0,next:wi,error:Rx,complete:wi};var Ts=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function Da(...n){return hm(n)}function hm(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var L=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Px(t)?t:new bs(t,r,i);return Cs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=KC(r),new r((i,s)=>{let o=new bs({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ts](){return this}pipe(...t){return hm(t)(this)}toPromise(t){return t=KC(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function KC(n){var e;return(e=n??Qt.Promise)!==null&&e!==void 0?e:Promise}function kx(n){return n&&V(n.next)&&V(n.error)&&V(n.complete)}function Px(n){return n&&n instanceof bi||kx(n)&&su(n)}function fm(n){return V(n?.lift)}function X(n){return e=>{if(fm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function z(n,e,t,r,i){return new pm(n,e,t,r,i)}var pm=class extends bi{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ds(){return X((n,e)=>{let t=null;n._refCount++;let r=z(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ss=class extends L{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,fm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let t=this.getSubject();e.add(this.source.subscribe(z(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Ds()(this)}};var YC=Es(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=(()=>{class n extends L{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new cu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new YC}next(t){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?am:(this.currentObservers=null,s.push(t),new Ae(()=>{this.currentObservers=null,Ei(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new L;return t.source=this,t}}return n.create=(e,t)=>new cu(e,t),n})(),cu=class extends We{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:am}};var Ke=class extends We{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var mm={now(){return(mm.delegate||Date).now()},delegate:void 0};var lu=class extends Ae{constructor(e,t){super()}schedule(e,t=0){return this}};var Sa={setInterval(n,e,...t){let{delegate:r}=Sa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Sa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var As=class extends lu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Sa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Sa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ei(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ns=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ns.now=mm.now;var Rs=class extends Ns{constructor(e,t=Ns.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ms=new Rs(As),gm=Ms;var uu=class extends As{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var du=class extends Rs{};var _m=new du(uu);var Et=new L(n=>n.complete());function hu(n){return n&&V(n.schedule)}function QC(n){return n[n.length-1]}function fu(n){return V(QC(n))?n.pop():void 0}function Dr(n){return hu(QC(n))?n.pop():void 0}function Di(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ZC(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function JC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ti(n){return this instanceof Ti?(this.v=n,this):new Ti(n)}function XC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(m){return Promise.resolve(m).then(f,d)}}function a(f,m){r[f]&&(i[f]=function(v){return new Promise(function(T,P){s.push([f,v,T,P])>1||c(f,v)})},m&&(i[f]=m(i[f])))}function c(f,m){try{l(r[f](m))}catch(v){h(s[0][3],v)}}function l(f){f.value instanceof Ti?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,m){f(m),s.shift(),s.length&&c(s[0][0],s[0][1])}}function eb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof JC=="function"?JC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var pu=n=>n&&typeof n.length=="number"&&typeof n!="function";function mu(n){return V(n?.then)}function gu(n){return V(n[Ts])}function _u(n){return Symbol.asyncIterator&&V(n?.[Symbol.asyncIterator])}function vu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ox(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yu=Ox();function Iu(n){return V(n?.[yu])}function Eu(n){return XC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ti(t.read());if(i)return yield Ti(void 0);yield yield Ti(r)}}finally{t.releaseLock()}})}function wu(n){return V(n?.getReader)}function Ne(n){if(n instanceof L)return n;if(n!=null){if(gu(n))return xx(n);if(pu(n))return Lx(n);if(mu(n))return Fx(n);if(_u(n))return tb(n);if(Iu(n))return Vx(n);if(wu(n))return Ux(n)}throw vu(n)}function xx(n){return new L(e=>{let t=n[Ts]();if(V(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Lx(n){return new L(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Fx(n){return new L(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ou)})}function Vx(n){return new L(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function tb(n){return new L(e=>{jx(n,e).catch(t=>e.error(t))})}function Ux(n){return tb(Eu(n))}function jx(n,e){var t,r,i,s;return ZC(this,void 0,void 0,function*(){try{for(t=eb(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function ut(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Sr(n,e=0){return X((t,r)=>{t.subscribe(z(r,i=>ut(r,n,()=>r.next(i),e),()=>ut(r,n,()=>r.complete(),e),i=>ut(r,n,()=>r.error(i),e)))})}function Ar(n,e=0){return X((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function nb(n,e){return Ne(n).pipe(Ar(e),Sr(e))}function rb(n,e){return Ne(n).pipe(Ar(e),Sr(e))}function ib(n,e){return new L(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function sb(n,e){return new L(t=>{let r;return ut(t,e,()=>{r=n[yu](),ut(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>V(r?.return)&&r.return()})}function Cu(n,e){if(!n)throw new Error("Iterable cannot be null");return new L(t=>{ut(t,e,()=>{let r=n[Symbol.asyncIterator]();ut(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ob(n,e){return Cu(Eu(n),e)}function ab(n,e){if(n!=null){if(gu(n))return nb(n,e);if(pu(n))return ib(n,e);if(mu(n))return rb(n,e);if(_u(n))return Cu(n,e);if(Iu(n))return sb(n,e);if(wu(n))return ob(n,e)}throw vu(n)}function se(n,e){return e?ab(n,e):Ne(n)}function M(...n){let e=Dr(n);return se(n,e)}function Nr(n,e){let t=V(n)?n:()=>n,r=i=>i.error(t());return new L(e?i=>e.schedule(r,0,i):r)}function vm(n){return!!n&&(n instanceof L||V(n.lift)&&V(n.subscribe))}var zn=Es(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function cb(n){return n instanceof Date&&!isNaN(n)}function x(n,e){return X((t,r)=>{let i=0;t.subscribe(z(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Bx}=Array;function $x(n,e){return Bx(e)?n(...e):n(e)}function bu(n){return x(e=>$x(n,e))}var{isArray:Hx}=Array,{getPrototypeOf:Wx,prototype:zx,keys:Gx}=Object;function Tu(n){if(n.length===1){let e=n[0];if(Hx(e))return{args:e,keys:null};if(qx(e)){let t=Gx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function qx(n){return n&&typeof n=="object"&&Wx(n)===zx}function Du(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Aa(...n){let e=Dr(n),t=fu(n),{args:r,keys:i}=Tu(n);if(r.length===0)return se([],e);let s=new L(Kx(r,e,i?o=>Du(i,o):It));return t?s.pipe(bu(t)):s}function Kx(n,e,t=It){return r=>{lb(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)lb(e,()=>{let l=se(n[c],e),u=!1;l.subscribe(z(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function lb(n,e,t){n?ut(t,n,e):e()}function ub(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=v=>l<r?m(v):c.push(v),m=v=>{s&&e.next(v),l++;let T=!1;Ne(t(v,u++)).subscribe(z(e,P=>{i?.(P),s?f(P):e.next(P)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let P=c.shift();o?ut(e,o,()=>m(P)):m(P)}h()}catch(P){e.error(P)}}))};return n.subscribe(z(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Re(n,e,t=1/0){return V(e)?Re((r,i)=>x((s,o)=>e(r,s,i,o))(Ne(n(r,i))),t):(typeof e=="number"&&(t=e),X((r,i)=>ub(r,i,n,t)))}function ks(n=1/0){return Re(It,n)}function db(){return ks(1)}function Rr(...n){return db()(se(n,Dr(n)))}function Su(n){return new L(e=>{Ne(n()).subscribe(e)})}function ym(...n){let e=fu(n),{args:t,keys:r}=Tu(n),i=new L(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Ne(t[u]).subscribe(z(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?Du(r,a):a),s.complete())}))}});return e?i.pipe(bu(e)):i}function hb(n=0,e,t=gm){let r=-1;return e!=null&&(hu(e)?t=e:r=e),new L(i=>{let s=cb(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function wt(n,e){return X((t,r)=>{let i=0;t.subscribe(z(r,s=>n.call(e,s,i++)&&r.next(s)))})}function dt(n){return X((e,t)=>{let r=null,i=!1,s;r=e.subscribe(z(t,void 0,void 0,o=>{s=Ne(n(o,dt(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function fb(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(z(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Mr(n,e){return V(e)?Re(n,e,1):Re(n,1)}function kr(n){return X((e,t)=>{let r=!1;e.subscribe(z(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ht(n){return n<=0?()=>Et:X((e,t)=>{let r=0;e.subscribe(z(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function pb(){return X((n,e)=>{n.subscribe(z(e,wi))})}function Na(n){return x(()=>n)}function Im(n,e){return e?t=>Rr(e.pipe(ht(1),pb()),t.pipe(Im(n))):Re((t,r)=>Ne(n(t,r)).pipe(ht(1),Na(t)))}function Em(n,e=Ms){let t=hb(n,e);return Im(()=>t)}function Au(n=Yx){return X((e,t)=>{let r=!1;e.subscribe(z(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Yx(){return new zn}function Ps(n){return X((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Jt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?wt((i,s)=>n(i,s,r)):It,ht(1),t?kr(e):Au(()=>new zn))}function Os(n){return n<=0?()=>Et:X((e,t)=>{let r=[];e.subscribe(z(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function wm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?wt((i,s)=>n(i,s,r)):It,Os(1),t?kr(e):Au(()=>new zn))}function Nu(n,e){return X(fb(n,e,arguments.length>=2,!0))}function Cm(...n){let e=Dr(n);return X((t,r)=>{(e?Rr(n,t,e):Rr(n,t)).subscribe(r)})}function ze(n,e){return X((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(z(r,c=>{i?.unsubscribe();let l=0,u=s++;Ne(n(c,u)).subscribe(i=z(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function bm(n){return X((e,t)=>{Ne(n).subscribe(z(t,()=>t.complete(),wi)),!t.closed&&e.subscribe(t)})}function Te(n,e,t){let r=V(n)||e||t?{next:n,error:e,complete:t}:n;return r?X((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(z(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var tT="https://g.co/ng/security#xss",R=class extends Error{constructor(e,t){super(md(e,t)),this.code=e}};function md(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ja(n){return{toString:n}.toString()}var Ru="__parameters__";function Qx(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function nT(n,e,t){return ja(()=>{let r=Qx(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Ru)?c[Ru]:Object.defineProperty(c,Ru,{value:[]})[Ru];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var jm=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function Jx(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function st(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(st).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function mb(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Zx=ve({__forward_ref__:ve});function bn(n){return n.__forward_ref__=bn,n.toString=function(){return st(this())},n}function it(n){return rT(n)?n():n}function rT(n){return typeof n=="function"&&n.hasOwnProperty(Zx)&&n.__forward_ref__===bn}function N(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function gd(n){return gb(n,sT)||gb(n,oT)}function iT(n){return gd(n)!==null}function gb(n,e){return n.hasOwnProperty(e)?n[e]:null}function Xx(n){let e=n&&(n[sT]||n[oT]);return e||null}function _b(n){return n&&(n.hasOwnProperty(vb)||n.hasOwnProperty(eL))?n[vb]:null}var sT=ve({\u0275prov:ve}),vb=ve({\u0275inj:ve}),oT=ve({ngInjectableDef:ve}),eL=ve({ngInjectorDef:ve}),A=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=N({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function aT(n){return n&&!!n.\u0275providers}var tL=ve({\u0275cmp:ve}),nL=ve({\u0275dir:ve}),rL=ve({\u0275pipe:ve}),iL=ve({\u0275mod:ve}),$u=ve({\u0275fac:ve}),ka=ve({__NG_ELEMENT_ID__:ve}),yb=ve({__NG_ENV_ID__:ve});function Bs(n){return typeof n=="string"?n:n==null?"":String(n)}function sL(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Bs(n)}function oL(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new R(-200,n)}function Mg(n,e){throw new R(-201,!1)}var H=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(H||{}),Bm;function cT(){return Bm}function Ft(n){let e=Bm;return Bm=n,e}function lT(n,e,t){let r=gd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&H.Optional)return null;if(e!==void 0)return e;Mg(n,"Injector")}var aL={},Pa=aL,$m="__NG_DI_FLAG__",Hu="ngTempTokenPath",cL="ngTokenPath",lL=/\n/gm,uL="\u0275",Ib="__source",Us;function dL(){return Us}function Pr(n){let e=Us;return Us=n,e}function hL(n,e=H.Default){if(Us===void 0)throw new R(-203,!1);return Us===null?lT(n,void 0,e):Us.get(n,e&H.Optional?null:void 0,e)}function k(n,e=H.Default){return(cT()||hL)(it(n),e)}function I(n,e=H.Default){return k(n,_d(e))}function _d(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hm(n){let e=[];for(let t=0;t<n.length;t++){let r=it(n[t]);if(Array.isArray(r)){if(r.length===0)throw new R(900,!1);let i,s=H.Default;for(let o=0;o<r.length;o++){let a=r[o],c=fL(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(k(i,s))}else e.push(k(r))}return e}function uT(n,e){return n[$m]=e,n.prototype[$m]=e,n}function fL(n){return n[$m]}function pL(n,e,t,r){let i=n[Hu];throw e[Ib]&&i.unshift(e[Ib]),n.message=mL(`
`+n.message,i,t,r),n[cL]=i,n[Hu]=null,n}function mL(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==uL?n.slice(2):n;let i=st(e);if(Array.isArray(e))i=e.map(st).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):st(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(lL,`
  `)}`}var Xe=uT(nT("Optional"),8);var kg=uT(nT("SkipSelf"),4);function $s(n,e){let t=n.hasOwnProperty($u);return t?n[$u]:null}function Pg(n,e){n.forEach(t=>Array.isArray(t)?Pg(t,e):e(t))}function dT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function gL(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function _L(n,e,t){let r=Ba(n,e);return r>=0?n[r|1]=t:(r=~r,gL(n,r,e,t)),r}function Tm(n,e){let t=Ba(n,e);if(t>=0)return n[t|1]}function Ba(n,e){return vL(n,e,1)}function vL(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Hs={},Ct=[],Ai=new A(""),hT=new A("",-1),fT=new A(""),zu=class{get(e,t=Pa){if(t===Pa){let r=new Error(`NullInjectorError: No provider for ${st(e)}!`);throw r.name="NullInjectorError",r}return t}},pT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(pT||{}),En=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(En||{}),xr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(xr||{});function yL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Wm(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];IL(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function mT(n){return n===3||n===4||n===6}function IL(n){return n.charCodeAt(0)===64}function Oa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Eb(n,t,i,null,e[++r]):Eb(n,t,i,null,null))}}return n}function Eb(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var gT="ng-template";function EL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&yL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Og(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Og(n){return n.type===4&&n.value!==gT}function wL(n,e,t){let r=n.type===4&&!t?gT:n.value;return e===r}function CL(n,e,t){let r=4,i=n.attrs,s=i!==null?DL(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Zt(r)&&!Zt(c))return!1;if(o&&Zt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!wL(n,c,t)||c===""&&e.length===1){if(Zt(r))return!1;o=!0}}else if(r&8){if(i===null||!EL(n,i,c,t)){if(Zt(r))return!1;o=!0}}else{let l=e[++a],u=bL(c,i,Og(n),t);if(u===-1){if(Zt(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Zt(r))return!1;o=!0}}}}return Zt(r)||o}function Zt(n){return(n&1)===0}function bL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return SL(e,n)}function TL(n,e,t=!1){for(let r=0;r<e.length;r++)if(CL(n,e[r],t))return!0;return!1}function DL(n){for(let e=0;e<n.length;e++){let t=n[e];if(mT(t))return e}return n.length}function SL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function wb(n,e){return n?":not("+e.trim()+")":e}function AL(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Zt(o)&&(e+=wb(s,i),i=""),r=o,s=s||!Zt(r);t++}return i!==""&&(e+=wb(s,i)),e}function NL(n){return n.map(AL).join(",")}function RL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Zt(i))break;i=s}r++}return{attrs:e,classes:t}}function ue(n){return ja(()=>{let e=ET(n),t=$(w({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===pT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||En.Emulated,styles:n.styles||Ct,_:null,schemas:n.schemas||null,tView:null,id:""});wT(t);let r=n.dependencies;return t.directiveDefs=bb(r,!1),t.pipeDefs=bb(r,!0),t.id=PL(t),t})}function ML(n){return Lr(n)||_T(n)}function kL(n){return n!==null}function Dn(n){return ja(()=>({type:n.type,bootstrap:n.bootstrap||Ct,declarations:n.declarations||Ct,imports:n.imports||Ct,exports:n.exports||Ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Cb(n,e){if(n==null)return Hs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=xr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==xr.None?[r,a]:r,e[s]=o):t[s]=r}return t}function De(n){return ja(()=>{let e=ET(n);return wT(e),e})}function Lr(n){return n[tL]||null}function _T(n){return n[nL]||null}function vT(n){return n[rL]||null}function yT(n){let e=Lr(n)||_T(n)||vT(n);return e!==null?e.standalone:!1}function IT(n,e){let t=n[iL]||null;if(!t&&e===!0)throw new Error(`Type ${st(n)} does not have '\u0275mod' property.`);return t}function ET(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Hs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Ct,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Cb(n.inputs,e),outputs:Cb(n.outputs),debugInfo:null}}function wT(n){n.features?.forEach(e=>e(n))}function bb(n,e){if(!n)return null;let t=e?vT:ML;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(kL)}function PL(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function St(n){return{\u0275providers:n}}function OL(...n){return{\u0275providers:CT(!0,n),\u0275fromNgModule:!0}}function CT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Pg(e,o=>{let a=o;zm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&bT(i,s),t}function bT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];xg(i,s=>{e(s,r)})}}function zm(n,e,t,r){if(n=it(n),!n)return!1;let i=null,s=_b(n),o=!s&&Lr(n);if(!s&&!o){let c=n.ngModule;if(s=_b(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)zm(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Pg(s.imports,u=>{zm(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&bT(l,e)}if(!a){let l=$s(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ct},i),e({provide:fT,useValue:i,multi:!0},i),e({provide:Ai,useValue:()=>k(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;xg(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function xg(n,e){for(let t of n)aT(t)&&(t=t.\u0275providers),Array.isArray(t)?xg(t,e):e(t)}var xL=ve({provide:String,useValue:ve});function TT(n){return n!==null&&typeof n=="object"&&xL in n}function LL(n){return!!(n&&n.useExisting)}function FL(n){return!!(n&&n.useFactory)}function Ws(n){return typeof n=="function"}function VL(n){return!!n.useClass}var vd=new A(""),Fu={},UL={},Dm;function Lg(){return Dm===void 0&&(Dm=new zu),Dm}var Tt=class{},xa=class extends Tt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qm(e,o=>this.processProvider(o)),this.records.set(hT,xs(void 0,this)),i.has("environment")&&this.records.set(Tt,xs(void 0,this));let s=this.records.get(vd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fT,Ct,H.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Pr(this),r=Ft(void 0),i;try{return e()}finally{Pr(t),Ft(r)}}get(e,t=Pa,r=H.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(yb))return e[yb](this);r=_d(r);let i,s=Pr(this),o=Ft(void 0);try{if(!(r&H.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=WL(e)&&gd(e);l&&this.injectableDefInScope(l)?c=xs(Gm(e),Fu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&H.Self?Lg():this.parent;return t=r&H.Optional&&t===Pa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Hu]=a[Hu]||[]).unshift(st(e)),s)throw a;return pL(a,e,"R3InjectorError",this.source)}else throw a}finally{Ft(o),Pr(s)}}resolveInjectorInitializers(){let e=te(null),t=Pr(this),r=Ft(void 0),i;try{let s=this.get(Ai,Ct,H.Self);for(let o of s)o()}finally{Pr(t),Ft(r),te(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(st(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){e=it(e);let t=Ws(e)?e:it(e&&e.provide),r=BL(e);if(!Ws(e)&&e.multi===!0){let i=this.records.get(t);i||(i=xs(void 0,Fu,!0),i.factory=()=>Hm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=te(null);try{return t.value===Fu&&(t.value=UL,t.value=t.factory()),typeof t.value=="object"&&t.value&&HL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=it(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Gm(n){let e=gd(n),t=e!==null?e.factory:$s(n);if(t!==null)return t;if(n instanceof A)throw new R(204,!1);if(n instanceof Function)return jL(n);throw new R(204,!1)}function jL(n){if(n.length>0)throw new R(204,!1);let t=Xx(n);return t!==null?()=>t.factory(n):()=>new n}function BL(n){if(TT(n))return xs(void 0,n.useValue);{let e=DT(n);return xs(e,Fu)}}function DT(n,e,t){let r;if(Ws(n)){let i=it(n);return $s(i)||Gm(i)}else if(TT(n))r=()=>it(n.useValue);else if(FL(n))r=()=>n.useFactory(...Hm(n.deps||[]));else if(LL(n))r=()=>k(it(n.useExisting));else{let i=it(n&&(n.useClass||n.provide));if($L(n))r=()=>new i(...Hm(n.deps));else return $s(i)||Gm(i)}return r}function xs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function $L(n){return!!n.deps}function HL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function WL(n){return typeof n=="function"||typeof n=="object"&&n instanceof A}function qm(n,e){for(let t of n)Array.isArray(t)?qm(t,e):t&&aT(t)?qm(t.\u0275providers,e):e(t)}function rn(n,e){n instanceof xa&&n.assertNotDestroyed();let t,r=Pr(n),i=Ft(void 0);try{return e()}finally{Pr(r),Ft(i)}}function ST(){return cT()!==void 0||dL()!=null}function zL(n){if(!ST())throw new R(-203,!1)}function GL(n){return typeof n=="function"}var Dt=0,G=1,F=2,Ze=3,Xt=4,sn=5,wn=6,Gu=7,tn=8,zs=9,Cn=10,Me=11,La=12,Tb=13,to=14,Ut=15,Gs=16,Ls=17,qs=18,yd=19,AT=20,Or=21,Sm=22,Vt=23,ot=25,NT=1,Fa=6,Gn=7,qu=8,Ku=9,bt=10,Yu=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Yu||{});function en(n){return Array.isArray(n)&&typeof n[NT]=="object"}function Sn(n){return Array.isArray(n)&&n[NT]===!0}function Fg(n){return(n.flags&4)!==0}function $a(n){return n.componentOffset>-1}function Id(n){return(n.flags&1)===1}function Fr(n){return!!n.template}function Qu(n){return(n[F]&512)!==0}var Km=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function RT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function on(){return MT}function MT(n){return n.type.prototype.ngOnChanges&&(n.setInput=KL),qL}on.ngInherit=!0;function qL(){let n=PT(this),e=n?.current;if(e){let t=n.previous;if(t===Hs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function KL(n,e,t,r,i){let s=this.declaredInputs[r],o=PT(n)||YL(n,{previous:Hs,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Km(l&&l.currentValue,t,c===Hs),RT(n,e,i,t)}var kT="__ngSimpleChanges__";function PT(n){return n[kT]||null}function YL(n,e){return n[kT]=e}var Db=null;var yn=function(n,e,t){Db?.(n,e,t)},QL="svg",JL="math";function nn(n){for(;Array.isArray(n);)n=n[Dt];return n}function OT(n,e){return nn(e[n])}function At(n,e){return nn(e[n.index])}function xT(n,e){return n.data[e]}function Br(n,e){let t=e[n];return en(t)?t:t[Dt]}function Vg(n){return(n[F]&128)===128}function ZL(n){return Sn(n[Ze])}function Ks(n,e){return e==null?null:n[e]}function LT(n){n[Ls]=0}function FT(n){n[F]&1024||(n[F]|=1024,Vg(n)&&wd(n))}function XL(n,e){for(;n>0;)e=e[to],n--;return e}function Ed(n){return!!(n[F]&9216||n[Vt]?.dirty)}function Ym(n){n[Cn].changeDetectionScheduler?.notify(8),n[F]&64&&(n[F]|=1024),Ed(n)&&wd(n)}function wd(n){n[Cn].changeDetectionScheduler?.notify(0);let e=Ni(n);for(;e!==null&&!(e[F]&8192||(e[F]|=8192,!Vg(e)));)e=Ni(e)}function VT(n,e){if((n[F]&256)===256)throw new R(911,!1);n[Or]===null&&(n[Or]=[]),n[Or].push(e)}function eF(n,e){if(n[Or]===null)return;let t=n[Or].indexOf(e);t!==-1&&n[Or].splice(t,1)}function Ni(n){let e=n[Ze];return Sn(e)?e[Ze]:e}var W={lFrame:KT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var UT=!1;function tF(){return W.lFrame.elementDepthCount}function nF(){W.lFrame.elementDepthCount++}function rF(){W.lFrame.elementDepthCount--}function jT(){return W.bindingsEnabled}function Ha(){return W.skipHydrationRootTNode!==null}function iF(n){return W.skipHydrationRootTNode===n}function sF(n){W.skipHydrationRootTNode=n}function oF(){W.skipHydrationRootTNode=null}function _e(){return W.lFrame.lView}function Nt(){return W.lFrame.tView}function An(n){return W.lFrame.contextLView=n,n[tn]}function Nn(n){return W.lFrame.contextLView=null,n}function at(){let n=BT();for(;n!==null&&n.type===64;)n=n.parent;return n}function BT(){return W.lFrame.currentTNode}function aF(){let n=W.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Oi(n,e){let t=W.lFrame;t.currentTNode=n,t.isParent=e}function Ug(){return W.lFrame.isParent}function $T(){W.lFrame.isParent=!1}function HT(){return UT}function Sb(n){UT=n}function jg(){let n=W.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function cF(){return W.lFrame.bindingIndex}function lF(n){return W.lFrame.bindingIndex=n}function Bg(){return W.lFrame.bindingIndex++}function WT(n){let e=W.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function uF(){return W.lFrame.inI18n}function dF(n,e){let t=W.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qm(e)}function hF(){return W.lFrame.currentDirectiveIndex}function Qm(n){W.lFrame.currentDirectiveIndex=n}function fF(n){let e=W.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function zT(n){W.lFrame.currentQueryIndex=n}function pF(n){let e=n[G];return e.type===2?e.declTNode:e.type===1?n[sn]:null}function GT(n,e,t){if(t&H.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&H.Host);)if(i=pF(s),i===null||(s=s[to],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=W.lFrame=qT();return r.currentTNode=e,r.lView=n,!0}function $g(n){let e=qT(),t=n[G];W.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qT(){let n=W.lFrame,e=n===null?null:n.child;return e===null?KT(n):e}function KT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function YT(){let n=W.lFrame;return W.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var QT=YT;function Hg(){let n=YT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mF(n){return(W.lFrame.contextLView=XL(n,W.lFrame.contextLView))[tn]}function xi(){return W.lFrame.selectedIndex}function Ri(n){W.lFrame.selectedIndex=n}function JT(){let n=W.lFrame;return xT(n.tView,n.selectedIndex)}function ZT(){return W.lFrame.currentNamespace}var XT=!0;function Cd(){return XT}function $r(n){XT=n}function gF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=MT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function bd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Vu(n,e,t){eD(n,e,3,t)}function Uu(n,e,t,r){(n[F]&3)===t&&eD(n,e,t,r)}function Am(n,e){let t=n[F];(t&3)===e&&(t&=16383,t+=1,n[F]=t)}function eD(n,e,t,r){let i=r!==void 0?n[Ls]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ls]+=65536),(a<s||s==-1)&&(_F(n,t,e,c),n[Ls]=(n[Ls]&4294901760)+c+2),c++}function Ab(n,e){yn(4,n,e);let t=te(null);try{e.call(n)}finally{te(t),yn(5,n,e)}}function _F(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[F]>>14<n[Ls]>>16&&(n[F]&3)===e&&(n[F]+=16384,Ab(a,s)):Ab(a,s)}var js=-1,Mi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function vF(n){return n instanceof Mi}function yF(n){return(n.flags&8)!==0}function IF(n){return(n.flags&16)!==0}var Nm={},Jm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=_d(r);let i=this.injector.get(e,Nm,r);return i!==Nm||t===Nm?i:this.parentInjector.get(e,t,r)}};function tD(n){return n!==js}function Ju(n){return n&32767}function EF(n){return n>>16}function Zu(n,e){let t=EF(n),r=e;for(;t>0;)r=r[to],t--;return r}var Zm=!0;function Nb(n){let e=Zm;return Zm=n,e}var wF=256,nD=wF-1,rD=5,CF=0,In={};function bF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ka)&&(r=t[ka]),r==null&&(r=t[ka]=CF++);let i=r&nD,s=1<<i;e.data[n+(i>>rD)]|=s}function Xu(n,e){let t=iD(n,e);if(t!==-1)return t;let r=e[G];r.firstCreatePass&&(n.injectorIndex=e.length,Rm(r.data,n),Rm(e,null),Rm(r.blueprint,null));let i=Wg(n,e),s=n.injectorIndex;if(tD(i)){let o=Ju(i),a=Zu(i,e),c=a[G].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Rm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function iD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Wg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=lD(i),r===null)return js;if(t++,i=i[to],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return js}function Xm(n,e,t){bF(n,e,t)}function TF(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(mT(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function sD(n,e,t){if(t&H.Optional||n!==void 0)return n;Mg(e,"NodeInjector")}function oD(n,e,t,r){if(t&H.Optional&&r===void 0&&(r=null),!(t&(H.Self|H.Host))){let i=n[zs],s=Ft(void 0);try{return i?i.get(e,r,t&H.Optional):lT(e,r,t&H.Optional)}finally{Ft(s)}}return sD(r,e,t)}function aD(n,e,t,r=H.Default,i){if(n!==null){if(e[F]&2048&&!(r&H.Self)){let o=RF(n,e,t,r,In);if(o!==In)return o}let s=cD(n,e,t,r,In);if(s!==In)return s}return oD(e,t,r,i)}function cD(n,e,t,r,i){let s=AF(t);if(typeof s=="function"){if(!GT(e,n,r))return r&H.Host?sD(i,t,r):oD(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&H.Optional))Mg(t);else return o}finally{QT()}}else if(typeof s=="number"){let o=null,a=iD(n,e),c=js,l=r&H.Host?e[Ut][sn]:null;for((a===-1||r&H.SkipSelf)&&(c=a===-1?Wg(n,e):e[a+8],c===js||!Mb(r,!1)?a=-1:(o=e[G],a=Ju(c),e=Zu(c,e)));a!==-1;){let u=e[G];if(Rb(s,a,u.data)){let d=DF(a,e,t,o,r,l);if(d!==In)return d}c=e[a+8],c!==js&&Mb(r,e[G].data[a+8]===l)&&Rb(s,a,e)?(o=u,a=Ju(c),e=Zu(c,e)):a=-1}}return i}function DF(n,e,t,r,i,s){let o=e[G],a=o.data[n+8],c=r==null?$a(a)&&Zm:r!=o&&(a.type&3)!==0,l=i&H.Host&&s===a,u=SF(a,o,t,c,l);return u!==null?Ys(e,o,u,a):In}function SF(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let m=o[f];if(f<c&&t===m||f>=c&&m.type===t)return f}if(i){let f=o[c];if(f&&Fr(f)&&f.type===t)return c}return null}function Ys(n,e,t,r){let i=n[t],s=e.data;if(vF(i)){let o=i;o.resolving&&oL(sL(s[t]));let a=Nb(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Ft(o.injectImpl):null,u=GT(n,r,H.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&gF(t,s[t],e)}finally{l!==null&&Ft(l),Nb(a),o.resolving=!1,QT()}}return i}function AF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ka)?n[ka]:void 0;return typeof e=="number"?e>=0?e&nD:NF:e}function Rb(n,e,t){let r=1<<n;return!!(t[e+(n>>rD)]&r)}function Mb(n,e){return!(n&H.Self)&&!(n&H.Host&&e)}var Si=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return aD(this._tNode,this._lView,e,_d(r),t)}};function NF(){return new Si(at(),_e())}function Qn(n){return ja(()=>{let e=n.prototype.constructor,t=e[$u]||eg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[$u]||eg(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function eg(n){return rT(n)?()=>{let e=eg(it(n));return e&&e()}:$s(n)}function RF(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[F]&2048&&!(o[F]&512);){let a=cD(s,o,t,r|H.Self,In);if(a!==In)return a;let c=s.parent;if(!c){let l=o[AT];if(l){let u=l.get(t,In,r);if(u!==In)return u}c=lD(o),o=o[to]}s=c}return i}function lD(n){let e=n[G],t=e.type;return t===2?e.declTNode:t===1?n[sn]:null}function zg(n){return TF(at(),n)}function kb(n,e=null,t=null,r){let i=uD(n,e,t,r);return i.resolveInjectorInitializers(),i}function uD(n,e=null,t=null,r,i=new Set){let s=[t||Ct,OL(n)];return r=r||(typeof n=="object"?void 0:st(n)),new xa(s,e||Lg(),r||null,i)}var Ge=class n{static{this.THROW_IF_NOT_FOUND=Pa}static{this.NULL=new zu}static create(e,t){if(Array.isArray(e))return kb({name:""},t,e,"");{let r=e.name??"";return kb({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=N({token:n,providedIn:"any",factory:()=>k(hT)})}static{this.__NG_ELEMENT_ID__=-1}};var MF=new A("");MF.__NG_ELEMENT_ID__=n=>{let e=at();if(e===null)throw new R(204,!1);if(e.type&2)return e.value;if(n&H.Optional)return null;throw new R(204,!1)};var kF="ngOriginalError";function Mm(n){return n[kF]}var dD=!0,Gg=(()=>{class n{static{this.__NG_ELEMENT_ID__=PF}static{this.__NG_ENV_ID__=t=>t}}return n})(),tg=class extends Gg{constructor(e){super(),this._lView=e}onDestroy(e){return VT(this._lView,e),()=>eF(this._lView,e)}};function PF(){return new tg(_e())}var Li=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=N({token:n,providedIn:"root",factory:()=>new n})}}return n})();var ng=class extends We{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,ST()&&(this.destroyRef=I(Gg,{optional:!0})??void 0,this.pendingTasks=I(Li,{optional:!0})??void 0)}emit(e){let t=te(null);try{super.next(e)}finally{te(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Le=ng;function ed(...n){}function hD(n){let e,t;function r(){n=ed;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Pb(n){return queueMicrotask(()=>n()),()=>{n=ed}}var qg="isAngularZone",td=qg+"_ID",OF=0,oe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=dD}=e;if(typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,FF(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new R(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,xF,ed,ed);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},xF={};function Kg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function LF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){hD(()=>{n.callbackScheduled=!1,rg(n),n.isCheckStableRunning=!0,Kg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),rg(n)}function FF(n){let e=()=>{LF(n)},t=OF++;n._inner=n._inner.fork({name:"angular",properties:{[qg]:!0,[td]:t,[td+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(VF(c))return r.invokeTask(s,o,a,c);try{return Ob(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),xb(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return Ob(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!UF(c)&&e(),xb(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,rg(n),Kg(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function rg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Ob(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xb(n){n._nesting--,Kg(n)}var ig=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function VF(n){return fD(n,"__ignore_ng_zone__")}function UF(n){return fD(n,"__scheduler_tick__")}function fD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var qn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Mm(e);for(;t&&Mm(t);)t=Mm(t);return t||null}},jF=new A("",{providedIn:"root",factory:()=>{let n=I(oe),e=I(qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function BF(){return Td(at(),_e())}function Td(n,e){return new an(At(n,e))}var an=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=BF}}return n})();var $F="ngSkipHydration",HF="ngskiphydration";function pD(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===HF)return!0}return!1}function mD(n){return n.hasAttribute($F)}function nd(n){return(n.flags&128)===128}function WF(n){if(nd(n))return!0;let e=n.parent;for(;e;){if(nd(n)||pD(e))return!0;e=e.parent}return!1}var gD=new Map,zF=0;function GF(){return zF++}function qF(n){gD.set(n[yd],n)}function sg(n){gD.delete(n[yd])}var Lb="__ngContext__";function Vr(n,e){en(e)?(n[Lb]=e[yd],qF(e)):n[Lb]=e}function _D(n){return yD(n[La])}function vD(n){return yD(n[Xt])}function yD(n){for(;n!==null&&!Sn(n);)n=n[Xt];return n}var og;function ID(n){og=n}function Dd(){if(og!==void 0)return og;if(typeof document<"u")return document;throw new R(210,!1)}var Sd=new A("",{providedIn:"root",factory:()=>KF}),KF="ng",Yg=new A(""),Rt=new A("",{providedIn:"platform",factory:()=>"unknown"});var Qg=new A("",{providedIn:"root",factory:()=>Dd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function YF(){let n=new no;return I(Rt)==="browser"&&(n.store=QF(Dd(),I(Sd))),n}var no=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=N({token:n,providedIn:"root",factory:YF})}get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function QF(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var ED="h",wD="b",ag=function(n){return n.FirstChild="f",n.NextSibling="n",n}(ag||{}),JF="e",ZF="t",Jg="c",CD="x",rd="r",XF="i",e1="n",bD="d";var t1="__nghData__",TD=t1,km="ngh",n1="nghm",DD=()=>null;function r1(n,e,t=!1){let r=n.getAttribute(km);if(r==null)return null;let[i,s]=r.split("|");if(r=t?s:i,!r)return null;let o=s?`|${s}`:"",a=t?i:o,c={};if(r!==""){let u=e.get(no,null,{optional:!0});u!==null&&(c=u.get(TD,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Ad(l,0,n.nextSibling)),a?n.setAttribute(km,a):n.removeAttribute(km),l}function i1(){DD=r1}function Zg(n,e,t=!1){return DD(n,e,t)}function s1(n){let e=n._lView;return e[G].type===2?null:(Qu(e)&&(e=e[ot]),e)}function o1(n){return n.textContent?.replace(/\s/gm,"")}function a1(n){let e=Dd(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=o1(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let s of i)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Ad(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function cg(n,e){return n.segmentHeads?.[e]??null}function c1(n,e){let t=n.data,r=t[JF]?.[e]??null;return r===null&&t[Jg]?.[e]&&(r=Xg(n,e)),r}function SD(n,e){return n.data[Jg]?.[e]??null}function Xg(n,e){let t=SD(n,e)??[],r=0;for(let i of t)r+=i[rd]*(i[CD]??1);return r}function l1(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[bD];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Wa(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[bD];n.disconnectedNodes=t?new Set(t):null}return!!l1(n)?.has(e)}var Mu=new A(""),AD=!1,ND=new A("",{providedIn:"root",factory:()=>AD});var ku;function u1(){if(ku===void 0&&(ku=null,jm.trustedTypes))try{ku=jm.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ku}function Fb(n){return u1()?.createScriptURL(n)||n}var id=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tT})`}};function za(n){return n instanceof id?n.changingThisBreaksApplicationSecurity:n}function e_(n,e){let t=d1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${tT})`)}return t===e}function d1(n){return n instanceof id&&n.getTypeName()||null}var h1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function RD(n){return n=String(n),n.match(h1)?n:"unsafe:"+n}var Nd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Nd||{});function f1(n){let e=kD();return e?e.sanitize(Nd.URL,n)||"":e_(n,"URL")?za(n):RD(Bs(n))}function p1(n){let e=kD();if(e)return Fb(e.sanitize(Nd.RESOURCE_URL,n)||"");if(e_(n,"ResourceURL"))return Fb(za(n));throw new R(904,!1)}function m1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?p1:f1}function MD(n,e,t){return m1(e,t)(n)}function kD(){let n=_e();return n&&n[Cn].sanitizer}var g1=/^>|^->|<!--|-->|--!>|<!-$/g,_1=/(<|>)/g,v1="\u200B$1\u200B";function y1(n){return n.replace(g1,e=>e.replace(_1,v1))}function I1(n){return n.ownerDocument.body}function PD(n){return n instanceof Function?n():n}function Ra(n){return(n??I(Ge)).get(Rt)==="browser"}var Kn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Kn||{}),E1;function t_(n,e){return E1(n,e)}function Fs(n,e,t,r,i){if(r!=null){let s,o=!1;Sn(r)?s=r:en(r)&&(o=!0,r=r[Dt]);let a=nn(r);n===0&&t!==null?i==null?UD(e,t,a):sd(e,t,a,i||null,!0):n===1&&t!==null?sd(e,t,a,i||null,!0):n===2?i_(e,a,o):n===3&&e.destroyNode(a),s!=null&&L1(e,n,s,t,i)}}function OD(n,e){return n.createText(e)}function w1(n,e,t){n.setValue(e,t)}function xD(n,e){return n.createComment(y1(e))}function n_(n,e,t){return n.createElement(e,t)}function C1(n,e){LD(n,e),e[Dt]=null,e[sn]=null}function b1(n,e,t,r,i,s){r[Dt]=i,r[sn]=e,Md(n,r,t,1,i,s)}function LD(n,e){e[Cn].changeDetectionScheduler?.notify(9),Md(n,e,e[Me],2,null,null)}function T1(n){let e=n[La];if(!e)return Pm(n[G],n);for(;e;){let t=null;if(en(e))t=e[La];else{let r=e[bt];r&&(t=r)}if(!t){for(;e&&!e[Xt]&&e!==n;)en(e)&&Pm(e[G],e),e=e[Ze];e===null&&(e=n),en(e)&&Pm(e[G],e),t=e&&e[Xt]}e=t}}function D1(n,e,t,r){let i=bt+r,s=t.length;r>0&&(t[i-1][Xt]=e),r<s-bt?(e[Xt]=t[i],dT(t,bt+r,e)):(t.push(e),e[Xt]=null),e[Ze]=t;let o=e[Gs];o!==null&&t!==o&&FD(o,e);let a=e[qs];a!==null&&a.insertView(n),Ym(e),e[F]|=128}function FD(n,e){let t=n[Ku],r=e[Ze];if(en(r))n[F]|=Yu.HasTransplantedViews;else{let i=r[Ze][Ut];e[Ut]!==i&&(n[F]|=Yu.HasTransplantedViews)}t===null?n[Ku]=[e]:t.push(e)}function r_(n,e){let t=n[Ku],r=t.indexOf(e);t.splice(r,1)}function lg(n,e){if(n.length<=bt)return;let t=bt+e,r=n[t];if(r){let i=r[Gs];i!==null&&i!==n&&r_(i,r),e>0&&(n[t-1][Xt]=r[Xt]);let s=Wu(n,bt+e);C1(r[G],r);let o=s[qs];o!==null&&o.detachView(s[G]),r[Ze]=null,r[Xt]=null,r[F]&=-129}return r}function VD(n,e){if(!(e[F]&256)){let t=e[Me];t.destroyNode&&Md(n,e,t,3,null,null),T1(e)}}function Pm(n,e){if(e[F]&256)return;let t=te(null);try{e[F]&=-129,e[F]|=256,e[Vt]&&sm(e[Vt]),A1(n,e),S1(n,e),e[G].type===1&&e[Me].destroy();let r=e[Gs];if(r!==null&&Sn(e[Ze])){r!==e[Ze]&&r_(r,e);let i=e[qs];i!==null&&i.detachView(n)}sg(e)}finally{te(t)}}function S1(n,e){let t=n.cleanup,r=e[Gu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Gu]=null);let i=e[Or];if(i!==null){e[Or]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function A1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Mi)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];yn(4,a,c);try{c.call(a)}finally{yn(5,a,c)}}else{yn(4,i,s);try{s.call(i)}finally{yn(5,i,s)}}}}}function N1(n,e,t){return R1(n,e.parent,t)}function R1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Dt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===En.None||s===En.Emulated)return null}return At(r,t)}}function sd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function UD(n,e,t){n.appendChild(e,t)}function Vb(n,e,t,r,i){r!==null?sd(n,e,t,r,i):UD(n,e,t)}function jD(n,e){return n.parentNode(e)}function M1(n,e){return n.nextSibling(e)}function k1(n,e,t){return O1(n,e,t)}function P1(n,e,t){return n.type&40?At(n,t):null}var O1=P1,Ub;function Rd(n,e,t,r){let i=N1(n,r,e),s=e[Me],o=r.parent||e[sn],a=k1(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Vb(s,i,t[c],a,!1);else Vb(s,i,t,a,!1);Ub!==void 0&&Ub(s,r,e,t,i)}function Ma(n,e){if(e!==null){let t=e.type;if(t&3)return At(e,n);if(t&4)return ug(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ma(n,r);{let i=n[e.index];return Sn(i)?ug(-1,i):nn(i)}}else{if(t&128)return Ma(n,e.next);if(t&32)return t_(e,n)()||nn(n[e.index]);{let r=BD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ni(n[Ut]);return Ma(i,r)}else return Ma(n,e.next)}}}return null}function BD(n,e){if(e!==null){let r=n[Ut][sn],i=e.projection;return r.projection[i]}return null}function ug(n,e){let t=bt+n+1;if(t<e.length){let r=e[t],i=r[G].firstChild;if(i!==null)return Ma(r,i)}return e[Gn]}function i_(n,e,t){n.removeChild(null,e,t)}function $D(n){n.textContent=""}function s_(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Vr(nn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)s_(n,e,t.child,r,i,s,!1),Fs(e,n,i,a,s);else if(c&32){let l=t_(t,r),u;for(;u=l();)Fs(e,n,i,u,s);Fs(e,n,i,a,s)}else c&16?x1(n,e,r,t,i,s):Fs(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Md(n,e,t,r,i,s){s_(t,r,n.firstChild,e,i,s,!1)}function x1(n,e,t,r,i,s){let o=t[Ut],c=o[sn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Fs(e,n,i,u,s)}else{let l=c,u=o[Ze];nd(r)&&(l.flags|=128),s_(n,e,l,u,i,s,!0)}}function L1(n,e,t,r,i){let s=t[Gn],o=nn(t);s!==o&&Fs(e,n,r,s,i);for(let a=bt;a<t.length;a++){let c=t[a];Md(c[G],c,n,e,r,s)}}function F1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Kn.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Kn.Important),n.setStyle(t,r,i,s))}}function V1(n,e,t){n.setAttribute(e,"style",t)}function HD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function WD(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Wm(n,e,r),i!==null&&HD(n,e,i),s!==null&&V1(n,e,s)}var Jn={};function b(n=1){zD(Nt(),_e(),xi()+n,!1)}function zD(n,e,t,r){if(!r)if((e[F]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Vu(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Uu(e,s,0,t)}Ri(t)}function S(n,e=H.Default){let t=_e();if(t===null)return k(n,e);let r=at();return aD(r,t,it(n),e)}function GD(){let n="invalid";throw new Error(n)}function qD(n,e,t,r,i,s){let o=te(null);try{let a=null;i&xr.SignalBased&&(a=e[r][Tr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&xr.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):RT(e,a,r,s)}finally{te(o)}}function U1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ri(~i);else{let s=i,o=t[++r],a=t[++r];dF(o,s);let c=e[s];a(2,c)}}}finally{Ri(-1)}}function kd(n,e,t,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Dt]=i,d[F]=r|4|128|8|64,(l!==null||n&&n[F]&2048)&&(d[F]|=2048),LT(d),d[Ze]=d[to]=n,d[tn]=t,d[Cn]=o||n&&n[Cn],d[Me]=a||n&&n[Me],d[zs]=c||n&&n[zs]||null,d[sn]=s,d[yd]=GF(),d[wn]=u,d[AT]=l,d[Ut]=e.type==2?n[Ut]:d,d}function Ga(n,e,t,r,i){let s=n.data[e];if(s===null)s=j1(n,e,t,r,i),uF()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=aF();s.injectorIndex=o===null?-1:o.injectorIndex}return Oi(s,!0),s}function j1(n,e,t,r,i){let s=BT(),o=Ug(),a=o?s:s&&s.parent,c=n.data[e]=G1(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function KD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function YD(n,e,t,r,i){let s=xi(),o=r&2;try{Ri(-1),o&&e.length>ot&&zD(n,e,ot,!1),yn(o?2:0,i),t(r,i)}finally{Ri(s),yn(o?3:1,i)}}function o_(n,e,t){if(Fg(e)){let r=te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{te(r)}}}function a_(n,e,t){jT()&&(X1(n,e,t,At(t,e)),(t.flags&64)===64&&XD(n,e,t))}function c_(n,e,t=At){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function QD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=l_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function l_(n,e,t,r,i,s,o,a,c,l,u){let d=ot+r,h=d+i,f=B1(d,h),m=typeof l=="function"?l():l;return f[G]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function B1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Jn);return t}function $1(n,e,t,r){let s=r.get(ND,AD)||t===En.ShadowDom,o=n.selectRootElement(e,s);return H1(o),o}function H1(n){JD(n)}var JD=()=>null;function W1(n){mD(n)?$D(n):a1(n)}function z1(){JD=W1}function G1(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Ha()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function jb(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=xr.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?Bb(r,t,l,a,c):Bb(r,t,l,a)}return r}function Bb(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function q1(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],h=t?t.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=jb(0,d.inputs,u,c,f),l=jb(1,d.outputs,u,l,m);let v=c!==null&&o!==null&&!Og(e)?uV(c,u,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function K1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Y1(n,e,t,r,i,s,o,a){let c=At(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(d_(n,t,u,r,i),$a(e)&&Q1(t,e.index)):e.type&3?(r=K1(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function Q1(n,e){let t=Br(e,n);t[F]&16||(t[F]|=64)}function u_(n,e,t,r){if(jT()){let i=r===null?null:{"":-1},s=tV(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&ZD(n,e,t,o,i,a),i&&nV(t,r,i)}t.mergedAttrs=Oa(t.mergedAttrs,t.attrs)}function ZD(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Xm(Xu(t,e),n,r[l].type);iV(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=KD(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=Oa(t.mergedAttrs,u.hostAttrs),sV(n,t,e,c,u),rV(c,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}q1(n,t,s)}function J1(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;Z1(o)!=a&&o.push(a),o.push(t,r,s)}}function Z1(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function X1(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;$a(t)&&oV(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Xu(t,e),Vr(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Ys(e,n,a,t);if(Vr(l,e),o!==null&&lV(e,a-i,l,c,t,o),Fr(c)){let u=Br(t.index,e);u[tn]=Ys(e,n,a,t)}}}function XD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=hF();try{Ri(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Qm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eV(c,l)}}finally{Ri(-1),Qm(o)}}function eV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tV(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(TL(e,o.selectors,!1))if(r||(r=[]),Fr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;dg(n,e,c)}else r.unshift(o),dg(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function dg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nV(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new R(-301,!1);r.push(e[i],s)}}}function rV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Fr(e)&&(t[""]=n)}}function iV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sV(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=$s(i.type,!0)),o=new Mi(s,Fr(i),S);n.blueprint[r]=o,t[r]=o,J1(n,e,r,KD(n,t,i.hostVars,Jn),i)}function oV(n,e,t){let r=At(e,n),i=QD(t),s=n[Cn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Pd(n,kd(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function aV(n,e,t,r,i,s){let o=At(n,e);cV(e[Me],o,s,n.value,t,r,i)}function cV(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Bs(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function lV(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];qD(r,t,c,l,u,d)}}function uV(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function eS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function tS(n,e){let t=n.contentQueries;if(t!==null){let r=te(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];zT(s),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function Pd(n,e){return n[La]?n[Tb][Xt]=e:n[La]=e,n[Tb]=e,e}function hg(n,e,t){zT(0);let r=te(null);try{e(n,t)}finally{te(r)}}function dV(n){return n[Gu]??=[]}function hV(n){return n.cleanup??=[]}function nS(n,e){let t=n[zs],r=t?t.get(qn,null):null;r&&r.handleError(e)}function d_(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];qD(u,l,r,a,c,i)}}function rS(n,e,t){let r=OT(e,n);w1(n[Me],r,t)}function fV(n,e){let t=Br(e,n),r=t[G];pV(r,t);let i=t[Dt];i!==null&&t[wn]===null&&(t[wn]=Zg(i,t[zs])),h_(r,t,t[tn])}function pV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function h_(n,e,t){$g(e);try{let r=n.viewQuery;r!==null&&hg(1,r,t);let i=n.template;i!==null&&YD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[qs]?.finishViewCreation(n),n.staticContentQueries&&tS(n,e),n.staticViewQueries&&hg(2,n.viewQuery,t);let s=n.components;s!==null&&mV(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[F]&=-5,Hg()}}function mV(n,e){for(let t=0;t<e.length;t++)fV(n,e[t])}function gV(n,e,t,r){let i=te(null);try{let s=e.tView,a=n[F]&4096?4096:16,c=kd(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Gs]=l;let u=n[qs];return u!==null&&(c[qs]=u.createEmbeddedView(s)),h_(s,c,t),c}finally{te(i)}}function $b(n,e){return!e||e.firstChild===null||nd(n)}function _V(n,e,t,r=!0){let i=e[G];if(D1(i,e,n,t),r){let o=ug(t,n),a=e[Me],c=jD(a,n[Gn]);c!==null&&b1(i,n[sn],a,e,c,o)}let s=e[wn];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function od(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(nn(s)),Sn(s)&&vV(s,r);let o=t.type;if(o&8)od(n,e,t.child,r);else if(o&32){let a=t_(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=BD(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ni(e[Ut]);od(c[G],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vV(n,e){for(let t=bt;t<n.length;t++){let r=n[t],i=r[G].firstChild;i!==null&&od(r[G],r,i,e)}n[Gn]!==n[Dt]&&e.push(n[Gn])}var iS=[];function yV(n){return n[Vt]??IV(n)}function IV(n){let e=iS.pop()??Object.create(wV);return e.lView=n,e}function EV(n){n.lView[Vt]!==n&&(n.lView=null,iS.push(n))}var wV=$(w({},Ta),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wd(n.lView)},consumerOnSignalRead(){this.lView[Vt]=this}});function CV(n){let e=n[Vt]??Object.create(bV);return e.lView=n,e}var bV=$(w({},Ta),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ni(n.lView);for(;e&&!sS(e[G]);)e=Ni(e);e&&FT(e)},consumerOnSignalRead(){this.lView[Vt]=this}});function sS(n){return n.type!==2}var TV=100;function oS(n,e=!0,t=0){let r=n[Cn],i=r.rendererFactory,s=!1;s||i.begin?.();try{DV(n,t)}catch(o){throw e&&nS(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function DV(n,e){let t=HT();try{Sb(!0),fg(n,e);let r=0;for(;Ed(n);){if(r===TV)throw new R(103,!1);r++,fg(n,1)}}finally{Sb(t)}}function SV(n,e,t,r){let i=e[F];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Cn].inlineEffectRunner?.flush(),$g(e);let a=!0,c=null,l=null;s||(sS(n)?(l=yV(e),c=tu(l)):NC()===null?(a=!1,l=CV(e),c=tu(l)):e[Vt]&&(sm(e[Vt]),e[Vt]=null));try{LT(e),lF(n.bindingStartIndex),t!==null&&YD(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&Vu(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Uu(e,f,0,null),Am(e,0)}if(o||AV(e),aS(e,0),n.contentQueries!==null&&tS(n,e),!s)if(u){let f=n.contentCheckHooks;f!==null&&Vu(e,f)}else{let f=n.contentHooks;f!==null&&Uu(e,f,1),Am(e,1)}U1(n,e);let d=n.components;d!==null&&lS(e,d,0);let h=n.viewQuery;if(h!==null&&hg(2,h,r),!s)if(u){let f=n.viewCheckHooks;f!==null&&Vu(e,f)}else{let f=n.viewHooks;f!==null&&Uu(e,f,2),Am(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Sm]){for(let f of e[Sm])f();e[Sm]=null}s||(e[F]&=-73)}catch(u){throw s||wd(e),u}finally{l!==null&&(rm(l,c),a&&EV(l)),Hg()}}function aS(n,e){for(let t=_D(n);t!==null;t=vD(t))for(let r=bt;r<t.length;r++){let i=t[r];cS(i,e)}}function AV(n){for(let e=_D(n);e!==null;e=vD(e)){if(!(e[F]&Yu.HasTransplantedViews))continue;let t=e[Ku];for(let r=0;r<t.length;r++){let i=t[r];FT(i)}}}function NV(n,e,t){let r=Br(e,n);cS(r,t)}function cS(n,e){Vg(n)&&fg(n,e)}function fg(n,e){let r=n[G],i=n[F],s=n[Vt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&im(s)),o||=!1,s&&(s.dirty=!1),n[F]&=-9217,o)SV(r,n,r.template,n[tn]);else if(i&8192){aS(n,1);let a=r.components;a!==null&&lS(n,a,1)}}function lS(n,e,t){for(let r=0;r<e.length;r++)NV(n,e[r],t)}function f_(n,e){let t=HT()?64:1088;for(n[Cn].changeDetectionScheduler?.notify(e);n;){n[F]|=t;let r=Ni(n);if(Qu(n)&&!r)return n;n=r}return null}var ki=class{get rootNodes(){let e=this._lView,t=e[G];return od(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tn]}set context(e){this._lView[tn]=e}get destroyed(){return(this._lView[F]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ze];if(Sn(e)){let t=e[qu],r=t?t.indexOf(this):-1;r>-1&&(lg(e,r),Wu(t,r))}this._attachedToViewContainer=!1}VD(this._lView[G],this._lView)}onDestroy(e){VT(this._lView,e)}markForCheck(){f_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[F]&=-129}reattach(){Ym(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,oS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Qu(this._lView),t=this._lView[Gs];t!==null&&!e&&r_(t,this._lView),LD(this._lView[G],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e;let t=Qu(this._lView),r=this._lView[Gs];r!==null&&!t&&FD(r,this._lView),Ym(this._lView)}},Od=(()=>{class n{static{this.__NG_ELEMENT_ID__=kV}}return n})(),RV=Od,MV=class extends RV{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=gV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ki(i)}};function kV(){return PV(at(),_e())}function PV(n,e){return n.type&4?new MV(e,n,Td(n,e)):null}var OV=new RegExp(`^(\\d+)*(${wD}|${ED})*(.*)`);function xV(n){let e=n.match(OV),[t,r,i,s]=e,o=r?parseInt(r,10):i,a=[];for(let[c,l,u]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[o,...a]}function LV(n){return!n.prev&&n.parent?.type===8}function Om(n){return n.index-ot}function FV(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function xd(n,e,t,r){let i=Om(r),s=FV(n,i);if(s===void 0){let o=n.data[e1];if(o?.[i])s=UV(o[i],t);else if(e.firstChild===r)s=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(LV(r)){let l=Om(r.parent);s=cg(n,l)}else{let l=At(c,t);if(a)s=l.firstChild;else{let u=Om(c),d=cg(n,u);if(c.type===2&&d){let f=Xg(n,u)+1;s=Ld(f,d)}else s=l.nextSibling}}}}return s}function Ld(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function VV(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],s=e[r+1];for(let o=0;o<s;o++)switch(i){case ag.FirstChild:t=t.firstChild;break;case ag.NextSibling:t=t.nextSibling;break}}return t}function UV(n,e){let[t,...r]=xV(n),i;if(t===ED)i=e[Ut][Dt];else if(t===wD)i=I1(e[Ut][Dt]);else{let s=Number(t);i=nn(e[s+ot])}return VV(i,r)}var jV=!1;function BV(n){jV=n}function $V(n){let e=n[wn];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[Me];for(let s of r.values())HV(i,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function HV(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-ot);i&&i_(n,i,!1)}}function uS(n){let e=n[Fa]??[],r=n[Ze][Me];for(let i of e)WV(i,r);n[Fa]=Ct}function WV(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[rd];for(;t<i;){let s=r.nextSibling;i_(e,r,!1),r=s,t++}}}function dS(n){uS(n);let e=n[Dt];en(e)&&ad(e);for(let t=bt;t<n.length;t++)ad(n[t])}function ad(n){$V(n);let e=n[G];for(let t=ot;t<e.bindingStartIndex;t++)if(Sn(n[t])){let r=n[t];dS(r)}else en(n[t])&&ad(n[t])}function zV(n){let e=n._views;for(let t of e){let r=s1(t);r!==null&&r[Dt]!==null&&(en(r)?ad(r):dS(r))}}function GV(n,e){let t=[];for(let r of e)for(let i=0;i<(r[CD]??1);i++){let s={data:r,firstChild:null};r[rd]>0&&(s.firstChild=n,n=Ld(r[rd],n)),t.push(s)}return[n,t]}var hS=()=>null;function qV(n,e){let t=n[Fa];return!e||t===null||t.length===0?null:t[0].data[XF]===e?t.shift():(uS(n),null)}function KV(){hS=qV}function Hb(n,e){return hS(n,e)}var Qs=class{},Fd=new A("",{providedIn:"root",factory:()=>!1});var fS=new A(""),pS=new A(""),pg=class{},cd=class{};function YV(n){let e=Error(`No component factory found for ${st(n)}.`);return e[QV]=n,e}var QV="ngComponent";var mg=class{resolveComponentFactory(e){throw YV(e)}},Js=class{static{this.NULL=new mg}},Zs=class{},Rn=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>JV()}}return n})();function JV(){let n=_e(),e=at(),t=Br(e.index,n);return(en(t)?t:n)[Me]}var ZV=(()=>{class n{static{this.\u0275prov=N({token:n,providedIn:"root",factory:()=>null})}}return n})();function ld(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=mb(i,a);else if(s==2){let c=a,l=e[++o];r=mb(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ud=class extends Js{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Lr(e);return new Xs(t,this.ngModule)}};function Wb(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:xr.None;e?t.push({propName:o,templateName:r,isSignal:(a&xr.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function XV(n){let e=n.toLowerCase();return e==="svg"?QL:e==="math"?JL:null}var Xs=class extends cd{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Wb(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Wb(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=NL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=te(null);try{i=i||this.ngModule;let o=i instanceof Tt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Jm(e,o):e,c=a.get(Zs,null);if(c===null)throw new R(407,!1);let l=a.get(ZV,null),u=a.get(Qs,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},h=c.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",m=r?$1(h,r,this.componentDef.encapsulation,a):n_(h,f,XV(f)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let T=null;m!==null&&(T=Zg(m,a,!0));let P=l_(0,null,null,1,0,null,null,null,null,null,null),re=kd(null,P,null,v,null,null,d,h,a,null,T);$g(re);let ie,Ce,lt=null;try{let Oe=this.componentDef,Lt,Ii=null;Oe.findHostDirectiveDefs?(Lt=[],Ii=new Map,Oe.findHostDirectiveDefs(Oe,Lt,Ii),Lt.push(Oe)):Lt=[Oe];let Wn=eU(re,m);lt=tU(Wn,m,Oe,Lt,re,d,h),Ce=xT(P,ot),m&&iU(h,Oe,m,r),t!==void 0&&sU(Ce,this.ngContentSelectors,t),ie=rU(lt,Oe,Lt,Ii,re,[oU]),h_(P,re,null)}catch(Oe){throw lt!==null&&sg(lt),sg(re),Oe}finally{Hg()}return new gg(this.componentType,ie,Td(Ce,re),re,Ce)}finally{te(s)}}},gg=class extends pg{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ki(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;d_(s[G],s,i,e,t),this.previousInputValues.set(e,t);let o=Br(this._tNode.index,s);f_(o,1)}}get injector(){return new Si(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function eU(n,e){let t=n[G],r=ot;return n[r]=e,Ga(t,r,2,"#host",null)}function tU(n,e,t,r,i,s,o){let a=i[G];nU(r,n,e,o);let c=null;e!==null&&(c=Zg(e,i[zs]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=kd(i,QD(t),null,u,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&dg(a,n,r.length-1),Pd(i,d),i[n.index]=d}function nU(n,e,t,r){for(let i of n)e.mergedAttrs=Oa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ld(e,e.mergedAttrs,!0),t!==null&&WD(r,t,e))}function rU(n,e,t,r,i,s){let o=at(),a=i[G],c=At(o,i);ZD(a,i,o,t,null,r);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,h=Ys(i,a,d,o);Vr(h,i)}XD(a,i,o),c&&Vr(c,i);let l=Ys(i,a,o.directiveStart+o.componentOffset,o);if(n[tn]=i[tn]=l,s!==null)for(let u of s)u(l,e);return o_(a,o,i),l}function iU(n,e,t,r){if(r)Wm(n,t,["ng-version","18.2.10"]);else{let{attrs:i,classes:s}=RL(e.selectors[0]);i&&Wm(n,t,i),s&&s.length>0&&HD(n,t,s.join(" "))}}function sU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function oU(){let n=at();bd(_e()[G],n)}var ro=(()=>{class n{static{this.__NG_ELEMENT_ID__=aU}}return n})();function aU(){let n=at();return lU(n,_e())}var cU=ro,mS=class extends cU{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Td(this._hostTNode,this._hostLView)}get injector(){return new Si(this._hostTNode,this._hostLView)}get parentInjector(){let e=Wg(this._hostTNode,this._hostLView);if(tD(e)){let t=Zu(e,this._hostLView),r=Ju(e),i=t[G].data[r+8];return new Si(i,t)}else return new Si(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=zb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-bt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Hb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,$b(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!GL(e),a;if(o)a=t;else{let m=t||{};a=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}let c=o?e:new Xs(Lr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let v=(o?l:this.parentInjector).get(Tt,null);v&&(s=v)}let u=Lr(c.componentType??{}),d=Hb(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,s);return this.insertImpl(f.hostView,a,$b(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(ZL(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ze],l=new mS(c,c[sn],c[Ze]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return _V(o,i,s,r),e.attachToViewContainerRef(),dT(xm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=zb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lg(this._lContainer,t);r&&(Wu(xm(this._lContainer),t),VD(r[G],r))}detach(e){let t=this._adjustIndex(e,-1),r=lg(this._lContainer,t);return r&&Wu(xm(this._lContainer),t)!=null?new ki(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function zb(n){return n[qu]}function xm(n){return n[qu]||(n[qu]=[])}function lU(n,e){let t,r=e[n.index];return Sn(r)?t=r:(t=eS(r,e,null,n),e[n.index]=t,Pd(e,t)),gS(t,e,n,r),new mS(t,n,e)}function uU(n,e){let t=n[Me],r=t.createComment(""),i=At(e,n),s=jD(t,i);return sd(t,s,r,M1(t,i),!1),r}var gS=_S,p_=()=>!1;function dU(n,e,t){return p_(n,e,t)}function _S(n,e,t,r){if(n[Gn])return;let i;t.type&8?i=nn(r):i=uU(e,t),n[Gn]=i}function hU(n,e,t){if(n[Gn]&&n[Fa])return!0;let r=t[wn],i=e.index-ot;if(!r||WF(e)||Wa(r,i))return!1;let o=cg(r,i),a=r.data[Jg]?.[i],[c,l]=GV(o,a);return n[Gn]=c,n[Fa]=l,!0}function fU(n,e,t,r){p_(n,t,e)||_S(n,e,t,r)}function pU(){gS=fU,p_=hU}var Gb=new Set;function Zn(n){Gb.has(n)||(Gb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function qa(n,e){Zn("NgSignals");let t=jC(n),r=t[Tr];return e?.equal&&(r.equal=e.equal),t.set=i=>om(r,i),t.update=i=>BC(r,i),t.asReadonly=mU.bind(t),t}function mU(){let n=this[Tr];if(n.readonlyFn===void 0){let e=()=>this();e[Tr]=n,n.readonlyFn=e}return n.readonlyFn}function gU(n){return Object.getPrototypeOf(n.prototype).constructor}function jt(n){let e=gU(n.type),t=!0,r=[n];for(;e;){let i;if(Fr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new R(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Pu(n.inputs),o.inputTransforms=Pu(n.inputTransforms),o.declaredInputs=Pu(n.declaredInputs),o.outputs=Pu(n.outputs);let a=i.hostBindings;a&&EU(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&yU(n,c),l&&IU(n,l),_U(n,i),Jx(n.outputs,i.outputs),Fr(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===jt&&(t=!1)}}e=Object.getPrototypeOf(e)}vU(r)}function _U(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function vU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Oa(i.hostAttrs,t=Oa(t,i.hostAttrs))}}function Pu(n){return n===Hs?{}:n===Ct?[]:n}function yU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function IU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function EU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function m_(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Ur=class{},Va=class{};var _g=class extends Ur{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ud(this);let s=IT(e);this._bootstrapComponents=PD(s.bootstrap),this._r3Injector=uD(e,t,[{provide:Ur,useValue:this},{provide:Js,useValue:this.componentFactoryResolver},...r],st(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vg=class extends Va{constructor(e){super(),this.moduleType=e}create(e){return new _g(this.moduleType,e,[])}};var dd=class extends Ur{constructor(e){super(),this.componentFactoryResolver=new ud(this),this.instance=null;let t=new xa([...e.providers,{provide:Ur,useValue:this},{provide:Js,useValue:this.componentFactoryResolver}],e.parent||Lg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Vd(n,e,t=null){return new dd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function vS(n){return CU(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function wU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function CU(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function g_(n,e,t){return n[e]=t}function jr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function __(n,e,t,r){let i=jr(n,e,t);return jr(n,e+1,r)||i}function bU(n,e,t,r,i){let s=__(n,e,t,r);return jr(n,e+2,i)||s}function Ka(n){return(n.flags&32)===32}function TU(n,e,t,r,i,s,o,a,c){let l=e.consts,u=Ga(e,n,4,o||null,a||null);u_(e,t,u,Ks(l,c)),bd(e,u);let d=u.tView=l_(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function DU(n,e,t,r,i,s,o,a,c,l){let u=t+ot,d=e.firstCreatePass?TU(u,e,n,r,i,s,o,a,c):e.data[u];Oi(d,!1);let h=yS(e,n,d,t);Cd()&&Rd(e,n,h,d),Vr(h,n);let f=eS(h,n,h,d);return n[u]=f,Pd(n,f),dU(f,d,n),Id(d)&&a_(e,n,d),c!=null&&c_(n,d,l),d}function ne(n,e,t,r,i,s,o,a){let c=_e(),l=Nt(),u=Ks(l.consts,s);return DU(c,l,n,e,t,r,i,u,o,a),ne}var yS=IS;function IS(n,e,t,r){return $r(!0),e[Me].createComment("")}function SU(n,e,t,r){let i=e[wn],s=!i||Ha()||Ka(t)||Wa(i,r);if($r(s),s)return IS(n,e,t,r);let o=i.data[ZF]?.[r]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=xd(i,n,e,t);Ad(i,r,a);let c=Xg(i,r);return Ld(c,a)}function AU(){yS=SU}var Vs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Vs||{}),ES=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=N({token:n,providedIn:"root",factory:()=>new n})}}return n})(),yg=class n{constructor(){this.ngZone=I(oe),this.scheduler=I(Qs),this.errorHandler=I(qn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Vs.EarlyRead,Vs.Write,Vs.MixedReadWrite,Vs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=N({token:n,providedIn:"root",factory:()=>new n})}},Ig=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function v_(n,e){!e?.injector&&zL(v_);let t=e?.injector??I(Ge);return Ra(t)?(Zn("NgAfterNextRender"),RU(n,t,e,!0)):MU}function NU(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function RU(n,e,t,r){let i=e.get(ES);i.impl??=e.get(yg);let s=t?.phase??Vs.MixedReadWrite,o=t?.manualCleanup!==!0?e.get(Gg):null,a=new Ig(i.impl,NU(n,s),r,o);return i.impl.register(a),a}var MU={destroy(){}};function Hr(n,e,t,r){let i=_e(),s=Bg();if(jr(i,s,e)){let o=Nt(),a=JT();aV(a,i,n,e,t,r)}return Hr}function kU(n,e,t,r){return jr(n,Bg(),t)?e+Bs(t)+r:Jn}function PU(n,e,t,r,i,s){let o=cF(),a=__(n,o,t,i);return WT(2),a?e+Bs(t)+r+Bs(i)+s:Jn}function Ou(n,e){return n<<17|e<<2}function Pi(n){return n>>17&32767}function OU(n){return(n&2)==2}function xU(n,e){return n&131071|e<<17}function Eg(n){return n|2}function eo(n){return(n&131068)>>2}function Lm(n,e){return n&-131069|e<<2}function LU(n){return(n&1)===1}function wg(n){return n|1}function FU(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Pi(o),c=eo(o);n[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Ba(d,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let h=Pi(n[a+1]);n[r+1]=Ou(h,a),h!==0&&(n[h+1]=Lm(n[h+1],r)),n[a+1]=xU(n[a+1],r)}else n[r+1]=Ou(a,0),a!==0&&(n[a+1]=Lm(n[a+1],r)),a=r;else n[r+1]=Ou(c,0),a===0?a=r:n[c+1]=Lm(n[c+1],r),c=r;l&&(n[r+1]=Eg(n[r+1])),qb(n,u,r,!0),qb(n,u,r,!1),VU(e,u,n,r,s),o=Ou(a,c),s?e.classBindings=o:e.styleBindings=o}function VU(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ba(s,e)>=0&&(t[r+1]=wg(t[r+1]))}function qb(n,e,t,r){let i=n[t+1],s=e===null,o=r?Pi(i):eo(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];UU(c,e)&&(a=!0,n[o+1]=r?wg(l):Eg(l)),o=r?Pi(l):eo(l)}a&&(n[t+1]=r?Eg(i):wg(i))}function UU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ba(n,e)>=0:!1}function D(n,e,t){let r=_e(),i=Bg();if(jr(r,i,e)){let s=Nt(),o=JT();Y1(s,o,r,n,e,r[Me],t,!1)}return D}function Kb(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";d_(n,t,s[o],o,r)}function Ud(n,e){return jU(n,e,null,!0),Ud}function jU(n,e,t,r){let i=_e(),s=Nt(),o=WT(2);if(s.firstUpdatePass&&$U(s,n,o,r),e!==Jn&&jr(i,o,e)){let a=s.data[xi()];qU(s,a,i,i[Me],n,i[o+1]=KU(e,t),r,o)}}function BU(n,e){return e>=n.expandoStartIndex}function $U(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[xi()],o=BU(n,t);YU(s,r)&&e===null&&!o&&(e=!1),e=HU(i,s,e,r),FU(i,s,e,t,o,r)}}function HU(n,e,t,r){let i=fF(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Fm(null,n,e,t,r),t=Ua(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Fm(i,n,e,t,r),s===null){let c=WU(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Fm(null,n,e,c[1],r),c=Ua(c,e.attrs,r),zU(n,e,r,c))}else s=GU(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function WU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(eo(r)!==0)return n[Pi(r)]}function zU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Pi(i)]=r}function GU(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ua(r,o,t)}return Ua(r,e.attrs,t)}function Fm(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ua(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ua(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_L(n,o,t?!0:e[++s]))}return n===void 0?null:n}function qU(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=LU(l)?Yb(c,e,t,i,eo(l),o):void 0;if(!hd(u)){hd(s)||OU(l)&&(s=Yb(c,null,t,i,a,o));let d=OT(xi(),t);F1(r,o,d,i,s)}}function Yb(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[i+1];h===Jn&&(h=d?Ct:void 0);let f=d?Tm(h,r):u===r?h:void 0;if(l&&!hd(f)&&(f=Tm(c,r)),hd(f)&&(a=f,o))return a;let m=n[i+1];i=o?Pi(m):eo(m)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Tm(c,r))}return a}function hd(n){return n!==void 0}function KU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=st(za(n)))),n}function YU(n,e){return(n.flags&(e?8:16))!==0}function QU(n,e,t,r,i,s){let o=e.consts,a=Ks(o,i),c=Ga(e,n,2,r,a);return u_(e,t,c,Ks(o,s)),c.attrs!==null&&ld(c,c.attrs,!1),c.mergedAttrs!==null&&ld(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function _(n,e,t,r){let i=_e(),s=Nt(),o=ot+n,a=i[Me],c=s.firstCreatePass?QU(o,s,i,e,t,r):s.data[o],l=wS(s,i,c,a,e,n);i[o]=l;let u=Id(c);return Oi(c,!0),WD(a,l,c),!Ka(c)&&Cd()&&Rd(s,i,l,c),tF()===0&&Vr(l,i),nF(),u&&(a_(s,i,c),o_(s,c,i)),r!==null&&c_(i,c),_}function g(){let n=at();Ug()?$T():(n=n.parent,Oi(n,!1));let e=n;iF(e)&&oF(),rF();let t=Nt();return t.firstCreatePass&&(bd(t,n),Fg(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&yF(e)&&Kb(t,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&IF(e)&&Kb(t,e,_e(),e.stylesWithoutHost,!1),g}function ee(n,e,t,r){return _(n,e,t,r),g(),ee}var wS=(n,e,t,r,i,s)=>($r(!0),n_(r,i,ZT()));function JU(n,e,t,r,i,s){let o=e[wn],a=!o||Ha()||Ka(t)||Wa(o,s);if($r(a),a)return n_(r,i,ZT());let c=xd(o,n,e,t);return SD(o,s)&&Ad(o,s,c.nextSibling),o&&(pD(t)||mD(c))&&$a(t)&&(sF(t),$D(c)),c}function ZU(){wS=JU}function XU(n,e,t,r,i){let s=e.consts,o=Ks(s,r),a=Ga(e,n,8,"ng-container",o);o!==null&&ld(a,o,!0);let c=Ks(s,i);return u_(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Ya(n,e,t){let r=_e(),i=Nt(),s=n+ot,o=i.firstCreatePass?XU(s,i,r,e,t):i.data[s];Oi(o,!0);let a=CS(i,r,o,n);return r[s]=a,Cd()&&Rd(i,r,a,o),Vr(a,r),Id(o)&&(a_(i,r,o),o_(i,o,r)),t!=null&&c_(r,o),Ya}function Qa(){let n=at(),e=Nt();return Ug()?$T():(n=n.parent,Oi(n,!1)),e.firstCreatePass&&(bd(e,n),Fg(n)&&e.queries.elementEnd(n)),Qa}var CS=(n,e,t,r)=>($r(!0),xD(e[Me],""));function ej(n,e,t,r){let i,s=e[wn],o=!s||Ha()||Wa(s,r)||Ka(t);if($r(o),o)return xD(e[Me],"");let a=xd(s,n,e,t),c=c1(s,r);return Ad(s,r,a),i=Ld(c,a),i}function tj(){CS=ej}function io(){return _e()}var fd="en-US";var nj=fd;function rj(n){typeof n=="string"&&(nj=n.toLowerCase().replace(/_/g,"-"))}var ij=(n,e,t)=>{};function ye(n,e,t,r){let i=_e(),s=Nt(),o=at();return oj(s,i,i[Me],o,n,e,r),ye}function sj(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Gu],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function oj(n,e,t,r,i,s,o){let a=Id(r),l=n.firstCreatePass&&hV(n),u=e[tn],d=dV(e),h=!0;if(r.type&3||o){let v=At(r,e),T=o?o(v):v,P=d.length,re=o?Ce=>o(nn(Ce[r.index])):r.index,ie=null;if(!o&&a&&(ie=sj(n,e,i,r.index)),ie!==null){let Ce=ie.__ngLastListenerFn__||ie;Ce.__ngNextListenerFn__=s,ie.__ngLastListenerFn__=s,h=!1}else{s=Jb(r,e,u,s),ij(v,i,s);let Ce=t.listen(T,i,s);d.push(s,Ce),l&&l.push(i,re,P,P+1)}}else s=Jb(r,e,u,s);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let v=m.length;if(v)for(let T=0;T<v;T+=2){let P=m[T],re=m[T+1],lt=e[P][re].subscribe(s),Oe=d.length;d.push(s,lt),l&&l.push(i,r.index,Oe,-(Oe+1))}}}function Qb(n,e,t,r){let i=te(null);try{return yn(6,e,t),t(r)!==!1}catch(s){return nS(n,s),!1}finally{yn(7,e,t),te(i)}}function Jb(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Br(n.index,e):e;f_(o,5);let a=Qb(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=Qb(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Ie(n=1){return mF(n)}function y(n,e=""){let t=_e(),r=Nt(),i=n+ot,s=r.firstCreatePass?Ga(r,i,1,e,null):r.data[i],o=bS(r,t,s,e,n);t[i]=o,Cd()&&Rd(r,t,o,s),Oi(s,!1)}var bS=(n,e,t,r,i)=>($r(!0),OD(e[Me],r));function aj(n,e,t,r,i){let s=e[wn],o=!s||Ha()||Ka(t)||Wa(s,i);return $r(o),o?OD(e[Me],r):xd(s,n,e,t)}function cj(){bS=aj}function Wr(n){return Fi("",n,""),Wr}function Fi(n,e,t){let r=_e(),i=kU(r,n,e,t);return i!==Jn&&rS(r,xi(),i),Fi}function y_(n,e,t,r,i){let s=_e(),o=PU(s,n,e,t,r,i);return o!==Jn&&rS(s,xi(),o),y_}function lj(n,e,t){let r=Nt();if(r.firstCreatePass){let i=Fr(n);Cg(t,r.data,r.blueprint,i,!0),Cg(e,r.data,r.blueprint,i,!1)}}function Cg(n,e,t,r,i){if(n=it(n),Array.isArray(n))for(let s=0;s<n.length;s++)Cg(n[s],e,t,r,i);else{let s=Nt(),o=_e(),a=at(),c=Ws(n)?n:it(n.provide),l=DT(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ws(n)||!n.multi){let f=new Mi(l,i,S),m=Um(c,e,i?u:u+h,d);m===-1?(Xm(Xu(a,o),s,c),Vm(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[m]=f,o[m]=f)}else{let f=Um(c,e,u+h,d),m=Um(c,e,u,u+h),v=f>=0&&t[f],T=m>=0&&t[m];if(i&&!T||!i&&!v){Xm(Xu(a,o),s,c);let P=hj(i?dj:uj,t.length,i,r,l);!i&&T&&(t[m].providerFactory=P),Vm(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else{let P=TS(t[i?m:f],l,!i&&r);Vm(s,n,f>-1?f:m,P)}!i&&r&&T&&t[m].componentProviders++}}}function Vm(n,e,t,r){let i=Ws(e),s=VL(e);if(i||s){let c=(s?it(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function TS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Um(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function uj(n,e,t,r){return bg(this.multi,[])}function dj(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ys(t,t[G],this.providerFactory.index,r);s=a.slice(0,o),bg(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],bg(i,s);return s}function bg(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function hj(n,e,t,r,i){let s=new Mi(n,t,S);return s.multi=[],s.index=e,s.componentProviders=0,TS(s,i,r&&!t),s}function zr(n,e=[]){return t=>{t.providersResolver=(r,i)=>lj(r,i?i(n):n,e)}}var fj=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=CT(!1,t.type),i=r.length>0?Vd([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=N({token:n,providedIn:"environment",factory:()=>new n(k(Tt))})}}return n})();function de(n){Zn("NgStandalone"),n.getStandaloneInjector=e=>e.get(fj).getOrCreateStandaloneInjector(n)}function jd(n,e,t,r){return pj(_e(),jg(),n,e,t,r)}function Mt(n,e,t,r,i){return mj(_e(),jg(),n,e,t,r,i)}function DS(n,e,t,r,i,s){return gj(_e(),jg(),n,e,t,r,i,s)}function I_(n,e){let t=n[e];return t===Jn?void 0:t}function pj(n,e,t,r,i,s){let o=e+t;return jr(n,o,i)?g_(n,o+1,s?r.call(s,i):r(i)):I_(n,o+1)}function mj(n,e,t,r,i,s,o){let a=e+t;return __(n,a,i,s)?g_(n,a+2,o?r.call(o,i,s):r(i,s)):I_(n,a+2)}function gj(n,e,t,r,i,s,o,a){let c=e+t;return bU(n,c,i,s,o)?g_(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):I_(n,c+3)}var Yn=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},SS=new Yn("18.2.10");var Bd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var AS=new A("");function Vi(n){return!!n&&typeof n.then=="function"}function NS(n){return!!n&&typeof n.subscribe=="function"}var $d=new A(""),RS=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=I($d,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Vi(s))t.push(s);else if(NS(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ui=new A("");function _j(){UC(()=>{throw new R(600,!1)})}function vj(n){return n.isBoundToModule}var yj=10;function Ij(n,e,t){try{let r=t();return Vi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Mn=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=I(jF),this.afterRenderManager=I(ES),this.zonelessEnabled=I(Fd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new We,this.afterTick=new We,this.componentTypes=[],this.components=[],this.isStable=I(Li).hasPendingTasks.pipe(x(t=>!t)),this._injector=I(Tt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof cd;if(!this._injector.get(RS).done){let h=!i&&yT(t),f=!1;throw new R(405,f)}let o;i?o=t:o=this._injector.get(Js).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=vj(o)?void 0:this._injector.get(Ur),c=r||o.selector,l=o.create(Ge.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(AS,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),ju(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new R(101,!1);let t=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,te(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Zs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<yj;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)Ej(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ed(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ju(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Ui,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ju(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new R(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ju(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var xu;function Hd(n){xu??=new WeakMap;let e=xu.get(n);if(e)return e;let t=n.isStable.pipe(Jt(r=>r)).toPromise().then(()=>{});return xu.set(n,t),n.onDestroy(()=>xu?.delete(n)),t}function Ej(n,e,t,r){if(!t&&!Ed(n))return;oS(n,e,t&&!r?0:1)}var Tg=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Wd=(()=>{class n{compileModuleSync(t){return new vg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=IT(t),s=PD(i.declarations).reduce((o,a)=>{let c=Lr(a);return c&&o.push(new Xs(c)),o},[]);return new Tg(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var wj=(()=>{class n{constructor(){this.zone=I(oe),this.changeDetectionScheduler=I(Qs),this.applicationRef=I(Mn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Cj=new A("",{factory:()=>!1});function MS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new oe($(w({},PS()),{scheduleInRootZone:t})),[{provide:oe,useFactory:n},{provide:Ai,multi:!0,useFactory:()=>{let r=I(wj,{optional:!0});return()=>r.initialize()}},{provide:Ai,multi:!0,useFactory:()=>{let r=I(bj);return()=>{r.initialize()}}},e===!0?{provide:fS,useValue:!0}:[],{provide:pS,useValue:t??dD}]}function kS(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=MS({ngZoneFactory:()=>{let i=PS(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Zn("NgZone_CoalesceEvent"),new oe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return St([{provide:Cj,useValue:!0},{provide:Fd,useValue:!1},r])}function PS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var bj=(()=>{class n{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=I(oe),this.pendingTasks=I(Li)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Tj=(()=>{class n{constructor(){this.appRef=I(Mn),this.taskService=I(Li),this.ngZone=I(oe),this.zonelessEnabled=I(Fd),this.disableScheduling=I(fS,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ae,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(td):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(I(pS,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ig||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Pb:hD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(td+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Pb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Dj(){return typeof $localize<"u"&&$localize.locale||fd}var E_=new A("",{providedIn:"root",factory:()=>I(E_,H.Optional|H.SkipSelf)||Dj()});var Dg=new A("");function Lu(n){return!n.moduleRef}function Sj(n){let e=Lu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(oe);return t.run(()=>{Lu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(qn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Lu(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Dg);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Dg);o.add(s),n.moduleRef.onDestroy(()=>{ju(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return Ij(r,t,()=>{let s=e.get(RS);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(E_,fd);if(rj(o||fd),Lu(n)){let a=e.get(Mn);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Aj(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Aj(n,e){let t=n.injector.get(Mn);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new R(-403,!1);e.push(n)}var Bu=null;function Nj(n=[],e){return Ge.create({name:e,providers:[{provide:vd,useValue:"platform"},{provide:Dg,useValue:new Set([()=>Bu=null])},...n]})}function Rj(n=[]){if(Bu)return Bu;let e=Nj(n);return Bu=e,_j(),Mj(e),e}function Mj(n){n.get(Yg,null)?.forEach(t=>t())}var so=(()=>{class n{static{this.__NG_ELEMENT_ID__=kj}}return n})();function kj(n){return Pj(at(),_e(),(n&16)===16)}function Pj(n,e,t){if($a(n)&&!t){let r=Br(n.index,e);return new ki(r,r)}else if(n.type&175){let r=e[Ut];return new ki(r,e)}return null}var Sg=class{constructor(){}supports(e){return vS(e)}create(e){return new Ag(e)}},Oj=(n,e)=>e,Ag=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Oj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<Zb(r,i,s)?t:r,a=Zb(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let f=h<s.length?s[h]:s[h]=0,m=f+h;u<=m&&m<l&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!vS(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,wU(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Ng(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new pd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ng=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Rg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},pd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Rg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Zb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Xb(){return new w_([new Sg])}var w_=(()=>{class n{static{this.\u0275prov=N({token:n,providedIn:"root",factory:Xb})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Xb()),deps:[[n,new kg,new Xe]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new R(901,!1)}}return n})();function OS(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Rj(r),s=[MS({}),{provide:Qs,useExisting:Tj},...t||[]],o=new dd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Sj({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var eT=!1;function xj(){eT||(eT=!0,i1(),ZU(),cj(),tj(),AU(),pU(),KV(),z1())}function Lj(n,e){return Hd(n)}function xS(){return St([{provide:Mu,useFactory:()=>{let n=!0;return Ra()&&(n=!!I(no,{optional:!0})?.get(TD,null)),n&&Zn("NgHydration"),n}},{provide:Ai,useValue:()=>{BV(!1),Ra()&&I(Mu)&&(Fj(),xj())},multi:!0},{provide:ND,useFactory:()=>Ra()&&I(Mu)},{provide:Ui,useFactory:()=>{if(Ra()&&I(Mu)){let n=I(Mn),e=I(Ge);return()=>{Lj(n,e).then(()=>{zV(n)})}}return()=>{}},multi:!0}])}function Fj(){let n=Dd(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===n1){e=t;break}if(!e)throw new R(-507,!1)}function ji(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ja(n,e){Zn("NgSignals");let t=LC(n);return e?.equal&&(t[Tr].equal=e.equal),t}function Xn(n){let e=te(null);try{return n()}finally{te(e)}}function LS(n){let e=Lr(n);if(!e)return null;let t=new Xs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var $S=null;function tr(){return $S}function HS(n){$S??=n}var zd=class{};var ct=new A(""),A_=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:()=>I(Vj),providedIn:"platform"})}}return n})(),WS=new A(""),Vj=(()=>{class n extends A_{constructor(){super(),this._doc=I(ct),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tr().getBaseHref(this._doc)}onPopState(t){let r=tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=tr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function N_(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function FS(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function er(n){return n&&n[0]!=="?"?"?"+n:n}var nr=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:()=>I(R_),providedIn:"root"})}}return n})(),zS=new A(""),R_=(()=>{class n extends nr{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return N_(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+er(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+er(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+er(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(k(A_),k(zS,8))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GS=(()=>{class n extends nr{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=N_(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+er(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+er(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(k(A_),k(zS,8))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})(),oo=(()=>{class n{constructor(t){this._subject=new Le,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Bj(FS(VS(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+er(r))}normalize(t){return n.stripTrailingSlash(jj(this._basePath,VS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+er(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+er(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=er}static{this.joinWithSlash=N_}static{this.stripTrailingSlash=FS}static{this.\u0275fac=function(r){return new(r||n)(k(nr))}}static{this.\u0275prov=N({token:n,factory:()=>Uj(),providedIn:"root"})}}return n})();function Uj(){return new oo(k(nr))}function jj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function VS(n){return n.replace(/\/index.html$/,"")}function Bj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function M_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var C_=/\s+/,US=[],Gr=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=US,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(C_):US}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(C_):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(C_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(S(an),S(Rn))}}static{this.\u0275dir=De({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var b_=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qS=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new b_(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),jS(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);jS(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(S(ro),S(Od),S(w_))}}static{this.\u0275dir=De({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function jS(n,e){n.context.$implicit=e.item}var Bt=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new T_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){BS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){BS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(S(ro),S(Od))}}static{this.\u0275dir=De({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),T_=class{constructor(){this.$implicit=null,this.ngIf=null}};function BS(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${st(e)}'.`)}var Ye=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Dn({type:n})}static{this.\u0275inj=Tn({})}}return n})(),k_="browser",$j="server";function Hj(n){return n===k_}function Za(n){return n===$j}var KS=(()=>{class n{static{this.\u0275prov=N({token:n,providedIn:"root",factory:()=>Hj(I(Rt))?new D_(I(ct),window):new S_})}}return n})(),D_=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Wj(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function Wj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var S_=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Gd=class{};var Kd=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var n0=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(n0||{}),P_=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Kd,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Yd=class n extends P_{constructor(e={}){super(e),this.type=n0.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var zj=new A("");var Gj=new A(""),YS="b",QS="h",JS="s",ZS="st",XS="u",e0="rt",qd=new A(""),qj=["GET","HEAD"];function Kj(n,e){let f=I(qd),{isCacheActive:t}=f,r=SC(f,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||i===!1||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!qj.includes(s)||!r.includeRequestsWithAuthHeaders&&Yj(n)||r.filter?.(n)===!1)return e(n);let o=I(no),a=I(Gj,{optional:!0}),c=Za(I(Rt));if(a&&!c)throw new R(2803,!1);let l=c&&a?Xj(n.url,a):n.url,u=Jj(n,l),d=o.get(u,null),h=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(h=i.includeHeaders),d){let{[YS]:m,[e0]:v,[QS]:T,[JS]:P,[ZS]:re,[XS]:ie}=d,Ce=m;switch(v){case"arraybuffer":Ce=new TextEncoder().encode(m).buffer;break;case"blob":Ce=new Blob([m]);break}let lt=new Kd(T);return M(new Yd({body:Ce,headers:lt,status:P,statusText:re,url:ie}))}return e(n).pipe(Te(m=>{m instanceof Yd&&c&&o.set(u,{[YS]:m.body,[QS]:Qj(m.headers,h),[JS]:m.status,[ZS]:m.statusText,[XS]:l,[e0]:n.responseType})}))}function Yj(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function Qj(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function t0(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Jj(n,e){let{params:t,method:r,responseType:i}=n,s=t0(t),o=n.serializeBody();o instanceof URLSearchParams?o=t0(o):typeof o!="string"&&(o="");let a=[r,i,e,o,s].join("|"),c=Zj(a);return c}function Zj(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function r0(n){return[{provide:qd,useFactory:()=>(Zn("NgHttpTransferCache"),w({isCacheActive:!0},n))},{provide:zj,useValue:Kj,multi:!0,deps:[no,qd]},{provide:Ui,multi:!0,useFactory:()=>{let e=I(Mn),t=I(qd);return()=>{Hd(e).then(()=>{t.isCacheActive=!1})}}}]}function Xj(n,e){let t=new URL(n,"resolve://").origin,r=e[t];return r?n.replace(t,r):n}var L_=class extends zd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},F_=class n extends L_{static makeCurrent(){HS(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=eB();return t==null?null:tB(t)}resetBaseElement(){Xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return M_(document.cookie,e)}},Xa=null;function eB(){return Xa=Xa||document.querySelector("base"),Xa?Xa.getAttribute("href"):null}function tB(n){return new URL(n,document.baseURI).pathname}var nB=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})(),V_=new A(""),a0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new R(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(k(V_),k(oe))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})(),Qd=class{constructor(e){this._doc=e}},O_="ng-app-id",c0=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Za(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${O_}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(O_),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(O_,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(k(ct),k(Sd),k(Qg,8),k(Rt))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})(),x_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},B_=/%COMP%/g,l0="%COMP%",rB=`_nghost-${l0}`,iB=`_ngcontent-${l0}`,sB=!0,oB=new A("",{providedIn:"root",factory:()=>sB});function aB(n){return iB.replace(B_,n)}function cB(n){return rB.replace(B_,n)}function u0(n,e){return e.map(t=>t.replace(B_,n))}var i0=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Za(a),this.defaultRenderer=new ec(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===En.ShadowDom&&(r=$(w({},r),{encapsulation:En.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Jd?i.applyToHost(t):i instanceof tc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case En.Emulated:s=new Jd(c,l,r,this.appId,u,o,a,d);break;case En.ShadowDom:return new U_(c,l,t,r,o,a,this.nonce,d);default:s=new tc(c,l,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(k(a0),k(c0),k(Sd),k(oB),k(ct),k(Rt),k(oe),k(Qg))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})(),ec=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(x_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(s0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(s0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new R(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=x_[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=x_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Kn.DashCase|Kn.Important)?e.style.setProperty(t,r,i&Kn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Kn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=tr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function s0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var U_=class extends ec{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=u0(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},tc=class extends ec{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?u0(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Jd=class extends tc{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=aB(l),this.hostAttr=cB(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},lB=(()=>{class n extends Qd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(k(ct))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})(),o0=["alt","control","meta","shift"],uB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hB=(()=>{class n extends Qd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),o0.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=uB[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),o0.forEach(o=>{if(o!==i){let a=dB[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(k(ct))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})();function d0(n,e){return OS(w({rootComponent:n},fB(e)))}function fB(n){return{appProviders:[...vB,...n?.providers??[]],platformProviders:_B}}function pB(){F_.makeCurrent()}function mB(){return new qn}function gB(){return ID(document),document}var _B=[{provide:Rt,useValue:k_},{provide:Yg,useValue:pB,multi:!0},{provide:ct,useFactory:gB,deps:[]}];var vB=[{provide:vd,useValue:"root"},{provide:qn,useFactory:mB,deps:[]},{provide:V_,useClass:lB,multi:!0,deps:[ct,oe,Rt]},{provide:V_,useClass:hB,multi:!0,deps:[ct]},i0,c0,a0,{provide:Zs,useExisting:i0},{provide:Gd,useClass:nB,deps:[]},[]];var h0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(k(ct))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var j_=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(j_||{});function f0(...n){let e=[],t=new Set,r=t.has(j_.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return St([[],xS(),t.has(j_.NoHttpTransferCache)||r?[]:r0({}),e])}var U="primary",gc=Symbol("RouteTitle"),G_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function po(n){return new G_(n)}function IB(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function EB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kn(n[t],e[t]))return!1;return!0}function kn(n,e){let t=n?q_(n):void 0,r=e?q_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!b0(n[i],e[i]))return!1;return!0}function q_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function b0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function T0(n){return n.length>0?n[n.length-1]:null}function Kr(n){return vm(n)?n:Vi(n)?se(Promise.resolve(n)):M(n)}var wB={exact:S0,subset:A0},D0={exact:CB,subset:bB,ignored:()=>!0};function p0(n,e,t){return wB[t.paths](n.root,e.root,t.matrixParams)&&D0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function CB(n,e){return kn(n,e)}function S0(n,e,t){if(!$i(n.segments,e.segments)||!eh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!S0(n.children[r],e.children[r],t))return!1;return!0}function bB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>b0(n[t],e[t]))}function A0(n,e,t){return N0(n,e,e.segments,t)}function N0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!$i(i,t)||e.hasChildren()||!eh(i,t,r))}else if(n.segments.length===t.length){if(!$i(n.segments,t)||!eh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!A0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!$i(n.segments,i)||!eh(n.segments,i,r)||!n.children[U]?!1:N0(n.children[U],e,s,r)}}function eh(n,e,t){return e.every((r,i)=>D0[t](n[i].parameters,r.parameters))}var ir=class{constructor(e=new he([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=po(this.queryParams),this._queryParamMap}toString(){return SB.serialize(this)}},he=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return th(this)}},Bi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=po(this.parameters),this._parameterMap}toString(){return M0(this)}};function TB(n,e){return $i(n,e)&&n.every((t,r)=>kn(t.parameters,e[r].parameters))}function $i(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function DB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===U&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==U&&(t=t.concat(e(i,r)))}),t}var _c=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:()=>new mo,providedIn:"root"})}}return n})(),mo=class{parse(e){let t=new Y_(e);return new ir(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${nc(e.root,!0)}`,r=RB(e.queryParams),i=typeof e.fragment=="string"?`#${AB(e.fragment)}`:"";return`${t}${r}${i}`}},SB=new mo;function th(n){return n.segments.map(e=>M0(e)).join("/")}function nc(n,e){if(!n.hasChildren())return th(n);if(e){let t=n.children[U]?nc(n.children[U],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==U&&r.push(`${i}:${nc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=DB(n,(r,i)=>i===U?[nc(n.children[U],!1)]:[`${i}:${nc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[U]!=null?`${th(n)}/${t[0]}`:`${th(n)}/(${t.join("//")})`}}function R0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zd(n){return R0(n).replace(/%3B/gi,";")}function AB(n){return encodeURI(n)}function K_(n){return R0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nh(n){return decodeURIComponent(n)}function m0(n){return nh(n.replace(/\+/g,"%20"))}function M0(n){return`${K_(n.path)}${NB(n.parameters)}`}function NB(n){return Object.entries(n).map(([e,t])=>`;${K_(e)}=${K_(t)}`).join("")}function RB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Zd(t)}=${Zd(i)}`).join("&"):`${Zd(t)}=${Zd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var MB=/^[^\/()?;#]+/;function $_(n){let e=n.match(MB);return e?e[0]:""}var kB=/^[^\/()?;=#]+/;function PB(n){let e=n.match(kB);return e?e[0]:""}var OB=/^[^=?&#]+/;function xB(n){let e=n.match(OB);return e?e[0]:""}var LB=/^[^&#]+/;function FB(n){let e=n.match(LB);return e?e[0]:""}var Y_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[U]=new he(e,t)),r}parseSegment(){let e=$_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new Bi(nh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=PB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=$_(this.remaining);i&&(r=i,this.capture(r))}e[nh(t)]=nh(r)}parseQueryParam(e){let t=xB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=FB(this.remaining);o&&(r=o,this.capture(r))}let i=m0(t),s=m0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=$_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new R(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=U);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[U]:new he([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}};function k0(n){return n.segments.length>0?new he([],{[U]:n}):n}function P0(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=P0(i);if(r===U&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new he(n.segments,e);return VB(t)}function VB(n){if(n.numberOfChildren===1&&n.children[U]){let e=n.children[U];return new he(n.segments.concat(e.segments),e.children)}return n}function Hi(n){return n instanceof ir}function UB(n,e,t=null,r=null){let i=O0(n);return x0(i,e,t,r)}function O0(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new he(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=k0(r);return e??i}function x0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return H_(i,i,i,t,r);let s=jB(e);if(s.toRoot())return H_(i,i,new he([],{}),t,r);let o=BB(s,i,n),a=o.processChildren?sc(o.segmentGroup,o.index,s.commands):F0(o.segmentGroup,o.index,s.commands);return H_(i,o.segmentGroup,a,t,r)}function rh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function cc(n){return typeof n=="object"&&n!=null&&n.outlets}function H_(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=L0(n,e,t);let a=k0(P0(o));return new ir(a,s,i)}function L0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=L0(s,e,t)}),new he(n.segments,r)}var ih=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rh(r[0]))throw new R(4003,!1);let i=r.find(cc);if(i&&i!==T0(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ih(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new ih(t,e,r)}var uo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function BB(n,e,t){if(n.isAbsolute)return new uo(e,!0,0);if(!t)return new uo(e,!1,NaN);if(t.parent===null)return new uo(t,!0,0);let r=rh(n.commands[0])?0:1,i=t.segments.length-1+r;return $B(t,i,n.numberOfDoubleDots)}function $B(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new uo(r,!1,i-s)}function HB(n){return cc(n[0])?n[0].outlets:{[U]:n}}function F0(n,e,t){if(n??=new he([],{}),n.segments.length===0&&n.hasChildren())return sc(n,e,t);let r=WB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new he(n.segments.slice(0,r.pathIndex),{});return s.children[U]=new he(n.segments.slice(r.pathIndex),n.children),sc(s,0,i)}else return r.match&&i.length===0?new he(n.segments,{}):r.match&&!n.hasChildren()?Q_(n,e,t):r.match?sc(n,0,i):Q_(n,e,t)}function sc(n,e,t){if(t.length===0)return new he(n.segments,{});{let r=HB(t),i={};if(Object.keys(r).some(s=>s!==U)&&n.children[U]&&n.numberOfChildren===1&&n.children[U].segments.length===0){let s=sc(n.children[U],e,t);return new he(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=F0(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new he(n.segments,i)}}function WB(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(cc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!_0(c,l,o))return s;r+=2}else{if(!_0(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Q_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(cc(s)){let c=zB(s.outlets);return new he(r,c)}if(i===0&&rh(t[0])){let c=n.segments[e];r.push(new Bi(c.path,g0(t[0]))),i++;continue}let o=cc(s)?s.outlets[U]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&rh(a)?(r.push(new Bi(o,g0(a))),i+=2):(r.push(new Bi(o,{})),i++)}return new he(r,{})}function zB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Q_(new he([],{}),0,r))}),e}function g0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function _0(n,e,t){return n==t.path&&kn(e,t.parameters)}var oc="imperative",qe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(qe||{}),$t=class{constructor(e,t){this.id=e,this.url=t}},go=class extends $t{constructor(e,t,r="imperative",i=null){super(e,t),this.type=qe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pn=class extends $t{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Pt||{}),sh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sh||{}),rr=class extends $t{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qr=class extends $t{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=qe.NavigationSkipped}},lc=class extends $t{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},oh=class extends $t{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},J_=class extends $t{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Z_=class extends $t{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},X_=class extends $t{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ev=class extends $t{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tv=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},nv=class{constructor(e){this.route=e,this.type=qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rv=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},iv=class{constructor(e){this.snapshot=e,this.type=qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sv=class{constructor(e){this.snapshot=e,this.type=qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ov=class{constructor(e){this.snapshot=e,this.type=qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ah=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=qe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},uc=class{},_o=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function GB(n,e){return n.providers&&!n._injector&&(n._injector=Vd(n.providers,e,`Route: ${n.path}`)),n._injector??e}function cn(n){return n.outlet||U}function qB(n,e){let t=n.filter(r=>cn(r)===e);return t.push(...n.filter(r=>cn(r)!==e)),t}function vc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var av=class{get injector(){return vc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new yc(this.rootInjector),this.attachRef=null}},yc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new av(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(k(Tt))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ch=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=cv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=cv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=lv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lv(e,this._root).map(t=>t.value)}};function cv(n,e){if(n===e.value)return e;for(let t of e.children){let r=cv(n,t);if(r)return r}return null}function lv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=lv(n,t);if(r.length)return r.unshift(e),r}return[]}var kt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function lo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var lh=class extends ch{constructor(e,t){super(e),this.snapshot=t,vv(this,e)}toString(){return this.snapshot.toString()}};function V0(n){let e=KB(n),t=new Ke([new Bi("",{})]),r=new Ke({}),i=new Ke({}),s=new Ke({}),o=new Ke(""),a=new On(t,r,s,o,i,U,n,e.root);return a.snapshot=e.root,new lh(new kt(a,[]),e)}function KB(n){let e={},t={},r={},i="",s=new ho([],e,r,i,t,U,n,null,{});return new dh("",new kt(s,[]))}var On=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(x(l=>l[gc]))??M(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(x(e=>po(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(x(e=>po(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:w(w({},e.params),n.params),data:w(w({},e.data),n.data),resolve:w(w(w(w({},n.data),e.data),i?.data),n._resolvedData)}:r={params:w({},n.params),data:w({},n.data),resolve:w(w({},n.data),n._resolvedData??{})},i&&j0(i)&&(r.resolve[gc]=i.title),r}var ho=class{get title(){return this.data?.[gc]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=po(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=po(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},dh=class extends ch{constructor(e,t){super(t),this.url=e,vv(this,t)}toString(){return U0(this._root)}};function vv(n,e){e.value._routerState=n,e.children.forEach(t=>vv(n,t))}function U0(n){let e=n.children.length>0?` { ${n.children.map(U0).join(", ")} } `:"";return`${n.value}${e}`}function W_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),kn(e.params,t.params)||n.paramsSubject.next(t.params),EB(e.url,t.url)||n.urlSubject.next(t.url),kn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function uv(n,e){let t=kn(n.params,e.params)&&TB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||uv(n.parent,e.parent))}function j0(n){return typeof n.title=="string"||n.title===null}var Ic=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=U,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.parentContexts=I(yc),this.location=I(ro),this.changeDetector=I(so),this.inputBinder=I(mh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new dv(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=De({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[on]})}}return n})(),dv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===On?this.route:e===yc?this.childContexts:this.parent.get(e,t)}},mh=new A(""),v0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Aa([r.queryParams,r.params,r.data]).pipe(ze(([s,o,a],c)=>(a=w(w(w({},s),o),a),c===0?M(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=LS(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})();function YB(n,e,t){let r=dc(n,e._root,t?t._root:void 0);return new lh(r,e)}function dc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=QB(n,e,t);return new kt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>dc(n,a)),o}}let r=JB(e.value),i=e.children.map(s=>dc(n,s));return new kt(r,i)}}function QB(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dc(n,r,i);return dc(n,r)})}function JB(n){return new On(new Ke(n.url),new Ke(n.params),new Ke(n.queryParams),new Ke(n.fragment),new Ke(n.data),n.outlet,n.component,n)}var hc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},B0="ngNavigationCancelingError";function hh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Hi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$0(!1,Pt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function $0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[B0]=!0,t.cancellationCode=e,t}function ZB(n){return H0(n)&&Hi(n.url)}function H0(n){return!!n&&n[B0]}var XB=(n,e,t,r)=>x(i=>(new hv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),hv=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),W_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=lo(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=lo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=lo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=lo(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ov(s.value.snapshot))}),e.children.length&&this.forwardEvent(new iv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(W_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),W_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},fh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fo=class{constructor(e,t){this.component=e,this.route=t}};function e2(n,e,t){let r=n._root,i=e?e._root:null;return rc(r,i,t,[r.value])}function t2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function yo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!iT(n)?n:e.get(n):r}function rc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=lo(e);return n.children.forEach(o=>{n2(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ac(a,t.getContext(o),i)),i}function n2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=r2(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new fh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?rc(n,e,a?a.children:null,r,i):rc(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fo(a.outlet.component,o))}else o&&ac(e,a,i),i.canActivateChecks.push(new fh(r)),s.component?rc(n,null,a?a.children:null,r,i):rc(n,null,t,r,i);return i}function r2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!$i(n.url,e.url);case"pathParamsOrQueryParamsChange":return!$i(n.url,e.url)||!kn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!uv(n,e)||!kn(n.queryParams,e.queryParams);case"paramsChange":default:return!uv(n,e)}}function ac(n,e,t){let r=lo(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ac(o,e.children.getContext(s),t):ac(o,null,t):ac(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new fo(e.outlet.component,i)):t.canDeactivateChecks.push(new fo(null,i)):t.canDeactivateChecks.push(new fo(null,i))}function Ec(n){return typeof n=="function"}function i2(n){return typeof n=="boolean"}function s2(n){return n&&Ec(n.canLoad)}function o2(n){return n&&Ec(n.canActivate)}function a2(n){return n&&Ec(n.canActivateChild)}function c2(n){return n&&Ec(n.canDeactivate)}function l2(n){return n&&Ec(n.canMatch)}function W0(n){return n instanceof zn||n?.name==="EmptyError"}var Xd=Symbol("INITIAL_VALUE");function vo(){return ze(n=>Aa(n.map(e=>e.pipe(ht(1),Cm(Xd)))).pipe(x(e=>{for(let t of e)if(t!==!0){if(t===Xd)return Xd;if(t===!1||u2(t))return t}return!0}),wt(e=>e!==Xd),ht(1)))}function u2(n){return Hi(n)||n instanceof hc}function d2(n,e){return Re(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?M($(w({},t),{guardsResult:!0})):h2(o,r,i,n).pipe(Re(a=>a&&i2(a)?f2(r,s,n,e):M(a)),x(a=>$(w({},t),{guardsResult:a})))})}function h2(n,e,t,r){return se(n).pipe(Re(i=>v2(i.component,i.route,t,e,r)),Jt(i=>i!==!0,!0))}function f2(n,e,t,r){return se(e).pipe(Mr(i=>Rr(m2(i.route.parent,r),p2(i.route,r),_2(n,i.path,t),g2(n,i.route,t))),Jt(i=>i!==!0,!0))}function p2(n,e){return n!==null&&e&&e(new sv(n)),M(!0)}function m2(n,e){return n!==null&&e&&e(new rv(n)),M(!0)}function g2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return M(!0);let i=r.map(s=>Su(()=>{let o=vc(e)??t,a=yo(s,o),c=o2(a)?a.canActivate(e,n):rn(o,()=>a(e,n));return Kr(c).pipe(Jt())}));return M(i).pipe(vo())}function _2(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>t2(o)).filter(o=>o!==null).map(o=>Su(()=>{let a=o.guards.map(c=>{let l=vc(o.node)??t,u=yo(c,l),d=a2(u)?u.canActivateChild(r,n):rn(l,()=>u(r,n));return Kr(d).pipe(Jt())});return M(a).pipe(vo())}));return M(s).pipe(vo())}function v2(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return M(!0);let o=s.map(a=>{let c=vc(e)??i,l=yo(a,c),u=c2(l)?l.canDeactivate(n,e,t,r):rn(c,()=>l(n,e,t,r));return Kr(u).pipe(Jt())});return M(o).pipe(vo())}function y2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return M(!0);let s=i.map(o=>{let a=yo(o,n),c=s2(a)?a.canLoad(e,t):rn(n,()=>a(e,t));return Kr(c)});return M(s).pipe(vo(),z0(r))}function z0(n){return Da(Te(e=>{if(typeof e!="boolean")throw hh(n,e)}),x(e=>e===!0))}function I2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return M(!0);let s=i.map(o=>{let a=yo(o,n),c=l2(a)?a.canMatch(e,t):rn(n,()=>a(e,t));return Kr(c)});return M(s).pipe(vo(),z0(r))}var fc=class{constructor(e){this.segmentGroup=e||null}},pc=class extends Error{constructor(e){super(),this.urlTree=e}};function co(n){return Nr(new fc(n))}function E2(n){return Nr(new R(4e3,!1))}function w2(n){return Nr($0(!1,Pt.GuardRejected))}var fv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return M(r);if(i.numberOfChildren>1||!i.children[U])return E2(`${e.redirectTo}`);i=i.children[U]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,params:f,data:m,title:v}=i,T=rn(s,()=>a({params:f,data:m,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,title:v}));if(T instanceof ir)throw new pc(T);t=T}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new pc(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ir(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new he(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new R(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},pv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function C2(n,e,t,r,i){let s=G0(n,e,t);return s.matched?(r=GB(e,r),I2(r,e,t,i).pipe(x(o=>o===!0?s:w({},pv)))):M(s)}function G0(n,e,t){if(e.path==="**")return b2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?w({},pv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||IB)(t,n,e);if(!i)return w({},pv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?w(w({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function b2(n){return{matched:!0,parameters:n.length>0?T0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function y0(n,e,t,r){return t.length>0&&S2(n,t,r)?{segmentGroup:new he(e,D2(r,new he(t,n.children))),slicedSegments:[]}:t.length===0&&A2(n,t,r)?{segmentGroup:new he(n.segments,T2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new he(n.segments,n.children),slicedSegments:t}}function T2(n,e,t,r){let i={};for(let s of t)if(gh(n,e,s)&&!r[cn(s)]){let o=new he([],{});i[cn(s)]=o}return w(w({},r),i)}function D2(n,e){let t={};t[U]=e;for(let r of n)if(r.path===""&&cn(r)!==U){let i=new he([],{});t[cn(r)]=i}return t}function S2(n,e,t){return t.some(r=>gh(n,e,r)&&cn(r)!==U)}function A2(n,e,t){return t.some(r=>gh(n,e,r))}function gh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function N2(n,e,t){return e.length===0&&!n.children[t]}var mv=class{};function R2(n,e,t,r,i,s,o="emptyOnly"){return new gv(n,e,t,r,i,o,s).recognize()}var M2=31,gv=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new fv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new R(4002,`'${e.segmentGroup}'`)}recognize(){let e=y0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(x(({children:t,rootSnapshot:r})=>{let i=new kt(r,t),s=new dh("",i),o=UB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ho([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,U,t).pipe(x(r=>({children:r,rootSnapshot:t})),dt(r=>{if(r instanceof pc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof fc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(x(o=>o instanceof kt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return se(s).pipe(Mr(o=>{let a=r.children[o],c=qB(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Nu((o,a)=>(o.push(...a),o)),kr(null),wm(),Re(o=>{if(o===null)return co(r);let a=q0(o);return k2(a),M(a)}))}processSegment(e,t,r,i,s,o,a){return se(t).pipe(Mr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(dt(l=>{if(l instanceof fc)return M(null);throw l}))),Jt(c=>!!c),dt(c=>{if(W0(c))return N2(r,i,s)?M(new mv):co(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return cn(r)!==o&&(o===U||!gh(i,s,r))?co(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):co(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=G0(t,i,s);if(!c)return co(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>M2&&(this.allowRedirects=!1));let f=new ho(s,l,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,I0(i),cn(i),i.component??i._loadedComponent??null,i,E0(i)),m=uh(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(m.params),f.data=Object.freeze(m.data);let v=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(Re(T=>this.processSegment(e,r,t,T.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=C2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ze(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ze(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=c,m=new ho(h,d,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,I0(r),cn(r),r.component??r._loadedComponent??null,r,E0(r)),v=uh(m,o,this.paramsInheritanceStrategy);m.params=Object.freeze(v.params),m.data=Object.freeze(v.data);let{segmentGroup:T,slicedSegments:P}=y0(t,h,f,l);if(P.length===0&&T.hasChildren())return this.processChildren(u,l,T,m).pipe(x(ie=>new kt(m,ie)));if(l.length===0&&P.length===0)return M(new kt(m,[]));let re=cn(r)===s;return this.processSegment(u,l,T,P,re?U:s,!0,m).pipe(x(ie=>new kt(m,ie instanceof kt?[ie]:[])))}))):co(t)))}getChildConfig(e,t,r){return t.children?M({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?M({routes:t._loadedRoutes,injector:t._loadedInjector}):y2(e,t,r,this.urlSerializer).pipe(Re(i=>i?this.configLoader.loadChildren(e,t).pipe(Te(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):w2(t))):M({routes:[],injector:e})}};function k2(n){n.sort((e,t)=>e.value.outlet===U?-1:t.value.outlet===U?1:e.value.outlet.localeCompare(t.value.outlet))}function P2(n){let e=n.value.routeConfig;return e&&e.path===""}function q0(n){let e=[],t=new Set;for(let r of n){if(!P2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=q0(r.children);e.push(new kt(r.value,i))}return e.filter(r=>!t.has(r))}function I0(n){return n.data||{}}function E0(n){return n.resolve||{}}function O2(n,e,t,r,i,s){return Re(o=>R2(n,e,t,r,o.extractedUrl,i,s).pipe(x(({state:a,tree:c})=>$(w({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function x2(n,e){return Re(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return M(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of K0(c))o.add(l);let a=0;return se(o).pipe(Mr(c=>s.has(c)?L2(c,r,n,e):(c.data=uh(c,c.parent,n).resolve,M(void 0))),Te(()=>a++),Os(1),Re(c=>a===o.size?M(t):Et))})}function K0(n){let e=n.children.map(t=>K0(t)).flat();return[n,...e]}function L2(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!j0(i)&&(s[gc]=i.title),F2(s,n,e,r).pipe(x(o=>(n._resolvedData=o,n.data=uh(n,n.parent,t).resolve,null)))}function F2(n,e,t,r){let i=q_(n);if(i.length===0)return M({});let s={};return se(i).pipe(Re(o=>V2(n[o],e,t,r).pipe(Jt(),Te(a=>{if(a instanceof hc)throw hh(new mo,a);s[o]=a}))),Os(1),Na(s),dt(o=>W0(o)?Et:Nr(o)))}function V2(n,e,t,r){let i=vc(e)??r,s=yo(n,i),o=s.resolve?s.resolve(e,t):rn(i,()=>s(e,t));return Kr(o)}function z_(n){return ze(e=>{let t=n(e);return t?se(t).pipe(x(()=>e)):M(e)})}var Y0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===U);return r}getResolvedTitleForRoute(t){return t.data[gc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:()=>I(U2),providedIn:"root"})}}return n})(),U2=(()=>{class n extends Y0{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(k(h0))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wc=new A("",{providedIn:"root",factory:()=>({})}),j2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ue({type:n,selectors:[["ng-component"]],standalone:!0,features:[de],decls:1,vars:0,template:function(r,i){r&1&&ee(0,"router-outlet")},dependencies:[Ic],encapsulation:2})}}return n})();function yv(n){let e=n.children&&n.children.map(yv),t=e?$(w({},n),{children:e}):w({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==U&&(t.component=j2),t}var mc=new A(""),Iv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(Wd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return M(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Kr(t.loadComponent()).pipe(x(Q0),Te(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ps(()=>{this.componentLoaders.delete(t)})),i=new Ss(r,()=>new We).pipe(Ds());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return M({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=B2(r,this.compiler,t,this.onLoadEndListener).pipe(Ps(()=>{this.childrenLoaders.delete(r)})),o=new Ss(s,()=>new We).pipe(Ds());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B2(n,e,t,r){return Kr(n.loadChildren()).pipe(x(Q0),Re(i=>i instanceof Va||Array.isArray(i)?M(i):se(e.compileModuleAsync(i))),x(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(mc,[],{optional:!0,self:!0}).flat()),{routes:o.map(yv),injector:s}}))}function $2(n){return n&&typeof n=="object"&&"default"in n}function Q0(n){return $2(n)?n.default:n}var Ev=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:()=>I(H2),providedIn:"root"})}}return n})(),H2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),J0=new A(""),Z0=new A("");function W2(n,e,t){let r=n.get(Z0),i=n.get(ct);return n.get(oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),z2(n))),{onViewTransitionCreated:c}=r;return c&&rn(n,()=>c({transition:a,from:e,to:t})),o})}function z2(n){return new Promise(e=>{v_({read:()=>setTimeout(e)},{injector:n})})}var G2=new A(""),wv=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new We,this.transitionAbortSubject=new We,this.configLoader=I(Iv),this.environmentInjector=I(Tt),this.urlSerializer=I(_c),this.rootContexts=I(yc),this.location=I(oo),this.inputBindingEnabled=I(mh,{optional:!0})!==null,this.titleStrategy=I(Y0),this.options=I(wc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(Ev),this.createViewTransition=I(J0,{optional:!0}),this.navigationErrorHandler=I(G2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>M(void 0),this.rootComponentType=null;let t=i=>this.events.next(new tv(i)),r=i=>this.events.next(new nv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next($(w(w({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:oc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wt(s=>s.id!==0),x(s=>$(w({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ze(s=>{let o=!1,a=!1;return M(s).pipe(ze(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Pt.SupersededByNewNavigation),Et;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?$(w({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new qr(c.id,this.urlSerializer.serialize(c.rawUrl),d,sh.IgnoredSameUrlNavigation)),c.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return M(c).pipe(ze(d=>{let h=this.transitions?.getValue();return this.events.next(new go(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Et:Promise.resolve(d)}),O2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=$(w({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new oh(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:m,extras:v}=c,T=new go(d,this.urlSerializer.serialize(h),f,m);this.events.next(T);let P=V0(this.rootComponentType).snapshot;return this.currentTransition=s=$(w({},c),{targetSnapshot:P,urlAfterRedirects:h,extras:$(w({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,M(s)}else{let d="";return this.events.next(new qr(c.id,this.urlSerializer.serialize(c.extractedUrl),d,sh.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Et}}),Te(c=>{let l=new J_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),x(c=>(this.currentTransition=s=$(w({},c),{guards:e2(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),d2(this.environmentInjector,c=>this.events.next(c)),Te(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw hh(this.urlSerializer,c.guardsResult);let l=new Z_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),wt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Pt.GuardRejected),!1)),z_(c=>{if(c.guards.canActivateChecks.length)return M(c).pipe(Te(l=>{let u=new X_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ze(l=>{let u=!1;return M(l).pipe(x2(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Pt.NoDataFromResolver)}}))}),Te(l=>{let u=new ev(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),z_(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Te(h=>{u.component=h}),x(()=>{})));for(let h of u.children)d.push(...l(h));return d};return Aa(l(c.targetSnapshot.root)).pipe(kr(null),ht(1))}),z_(()=>this.afterPreactivation()),ze(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?se(u).pipe(x(()=>s)):M(s)}),x(c=>{let l=YB(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=$(w({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Te(()=>{this.events.next(new uc)}),XB(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ht(1),Te({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),bm(this.transitionAbortSubject.pipe(Te(c=>{throw c}))),Ps(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Pt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),dt(c=>{if(a=!0,H0(c))this.events.next(new rr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),ZB(c)?this.events.next(new _o(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new lc(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let u=rn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof hc){let{message:d,cancellationCode:h}=hh(this.urlSerializer,u);this.events.next(new rr(s.id,this.urlSerializer.serialize(s.extractedUrl),d,h)),this.events.next(new _o(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=t.errorHandler(c);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return Et}))}))}cancelNavigationTransition(t,r,i){let s=new rr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function q2(n){return n!==oc}var K2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:()=>I(Y2),providedIn:"root"})}}return n})(),_v=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Y2=(()=>{class n extends _v{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qn(n)))(i||n)}})()}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),X0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:()=>I(Q2),providedIn:"root"})}}return n})(),Q2=(()=>{class n extends X0{constructor(){super(...arguments),this.location=I(oo),this.urlSerializer=I(_c),this.options=I(wc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(Ev),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ir,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=V0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof go)this.stateMemento=this.createStateMemento();else if(t instanceof qr)this.rawUrlTree=r.initialUrl;else if(t instanceof oh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof uc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof rr&&(t.code===Pt.GuardRejected||t.code===Pt.NoDataFromResolver)?this.restoreHistory(r):t instanceof lc?this.restoreHistory(r,!0):t instanceof Pn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof ir?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=w(w({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=w(w({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qn(n)))(i||n)}})()}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ic=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ic||{});function eA(n,e){n.events.pipe(wt(t=>t instanceof Pn||t instanceof rr||t instanceof lc||t instanceof qr),x(t=>t instanceof Pn||t instanceof qr?ic.COMPLETE:(t instanceof rr?t.code===Pt.Redirect||t.code===Pt.SupersededByNewNavigation:!1)?ic.REDIRECTING:ic.FAILED),wt(t=>t!==ic.REDIRECTING),ht(1)).subscribe(()=>{e()})}function J2(n){throw n}var Z2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},X2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=I(Bd),this.stateManager=I(X0),this.options=I(wc,{optional:!0})||{},this.pendingTasks=I(Li),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(wv),this.urlSerializer=I(_c),this.location=I(oo),this.urlHandlingStrategy=I(Ev),this._events=new We,this.errorHandler=this.options.errorHandler||J2,this.navigated=!1,this.routeReuseStrategy=I(K2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(mc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(mh,{optional:!0}),this.eventsSubscription=new Ae,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof rr&&r.code!==Pt.Redirect&&r.code!==Pt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pn)this.navigated=!0;else if(r instanceof _o){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=w({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||q2(i.source)},o);this.scheduleNavigation(a,oc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}t$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=w({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(yv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=w(w({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=O0(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return x0(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Hi(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,oc,null,r)}navigate(t,r={skipLocationChange:!1}){return e$(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=w({},Z2):r===!1?i=w({},X2):i=r,Hi(t))return p0(this.currentUrlTree,t,i);let s=this.parseUrl(t);return p0(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return eA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function e$(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new R(4008,!1)}function t$(n){return!(n instanceof uc)&&!(n instanceof _o)}var _h=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new We,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Pn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Hi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:MD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Hi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(S(xe),S(On),zg("tabindex"),S(Rn),S(an),S(nr))}}static{this.\u0275dir=De({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ye("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Hr("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ji],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ji],replaceUrl:[2,"replaceUrl","replaceUrl",ji],routerLink:"routerLink"},standalone:!0,features:[m_,on]})}}return n})();var ph=class{};var n$=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(wt(t=>t instanceof Pn),Mr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Vd(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return se(i).pipe(ks())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=M(null);let s=i.pipe(Re(o=>o===null?M(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return se([s,o]).pipe(ks())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(k(xe),k(Wd),k(Tt),k(ph),k(Iv))}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tA=new A(""),r$=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof go?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qr&&t.code===sh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ah&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ah(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){GD()}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac})}}return n})();function nA(n,...e){return St([{provide:mc,multi:!0,useValue:n},[],{provide:On,useFactory:rA,deps:[xe]},{provide:Ui,multi:!0,useFactory:iA},e.map(t=>t.\u0275providers)])}function rA(n){return n.routerState.root}function Cc(n,e){return{\u0275kind:n,\u0275providers:e}}function iA(){let n=I(Ge);return e=>{let t=n.get(Mn);if(e!==t.components[0])return;let r=n.get(xe),i=n.get(sA);n.get(Cv)===1&&r.initialNavigation(),n.get(oA,null,H.Optional)?.setUpPreloading(),n.get(tA,null,H.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sA=new A("",{factory:()=>new We}),Cv=new A("",{providedIn:"root",factory:()=>1});function i$(){return Cc(2,[{provide:Cv,useValue:0},{provide:$d,multi:!0,deps:[Ge],useFactory:e=>{let t=e.get(WS,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(xe),s=e.get(sA);eA(i,()=>{r(!0)}),e.get(wv).afterPreactivation=()=>(r(!0),s.closed?M(void 0):s),i.initialNavigation()}))}}])}function s$(){return Cc(3,[{provide:$d,multi:!0,useFactory:()=>{let e=I(xe);return()=>{e.setUpLocationChangeListener()}}},{provide:Cv,useValue:2}])}var oA=new A("");function o$(n){return Cc(0,[{provide:oA,useExisting:n$},{provide:ph,useExisting:n}])}function a$(){return Cc(8,[v0,{provide:mh,useExisting:v0}])}function c$(n){let e=[{provide:J0,useValue:W2},{provide:Z0,useValue:w({skipNextTransition:!!n?.skipInitialTransition},n)}];return Cc(9,e)}var w0=new A("ROUTER_FORROOT_GUARD"),l$=[oo,{provide:_c,useClass:mo},xe,yc,{provide:On,useFactory:rA,deps:[xe]},Iv,[]],aA=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[l$,[],{provide:mc,multi:!0,useValue:t},{provide:w0,useFactory:f$,deps:[[xe,new Xe,new kg]]},{provide:wc,useValue:r||{}},r?.useHash?d$():h$(),u$(),r?.preloadingStrategy?o$(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?p$(r):[],r?.bindToComponentInputs?a$().\u0275providers:[],r?.enableViewTransitions?c$().\u0275providers:[],m$()]}}static forChild(t){return{ngModule:n,providers:[{provide:mc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(k(w0,8))}}static{this.\u0275mod=Dn({type:n})}static{this.\u0275inj=Tn({})}}return n})();function u$(){return{provide:tA,useFactory:()=>{let n=I(KS),e=I(oe),t=I(wc),r=I(wv),i=I(_c);return t.scrollOffset&&n.setOffset(t.scrollOffset),new r$(i,r,n,e,t)}}}function d$(){return{provide:nr,useClass:GS}}function h$(){return{provide:nr,useClass:R_}}function f$(n){return"guarded"}function p$(n){return[n.initialNavigation==="disabled"?s$().\u0275providers:[],n.initialNavigation==="enabledBlocking"?i$().\u0275providers:[]]}var C0=new A("");function m$(){return[{provide:C0,useFactory:iA},{provide:Ui,multi:!0,useExisting:C0}]}var _A=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(S(Rn),S(an))}}static{this.\u0275dir=De({type:n})}}return n})(),Ah=(()=>{class n extends _A{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qn(n)))(i||n)}})()}static{this.\u0275dir=De({type:n,features:[jt]})}}return n})(),Nc=new A(""),g$={provide:Nc,useExisting:bn(()=>Nv),multi:!0},Nv=(()=>{class n extends Ah{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qn(n)))(i||n)}})()}static{this.\u0275dir=De({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ye("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[zr([g$]),jt]})}}return n})(),_$={provide:Nc,useExisting:bn(()=>Jr),multi:!0};function v$(){let n=tr()?tr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var y$=new A(""),Jr=(()=>{class n extends _A{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!v$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(S(Rn),S(an),S(y$,8))}}static{this.\u0275dir=De({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ye("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[zr([_$]),jt]})}}return n})();function Yr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function vA(n){return n!=null&&typeof n.length=="number"}var Rv=new A(""),yA=new A(""),I$=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,be=class{static min(e){return E$(e)}static max(e){return w$(e)}static required(e){return IA(e)}static requiredTrue(e){return C$(e)}static email(e){return b$(e)}static minLength(e){return T$(e)}static maxLength(e){return D$(e)}static pattern(e){return S$(e)}static nullValidator(e){return Ih(e)}static compose(e){return DA(e)}static composeAsync(e){return AA(e)}};function E$(n){return e=>{if(Yr(e.value)||Yr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function w$(n){return e=>{if(Yr(e.value)||Yr(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function IA(n){return Yr(n.value)?{required:!0}:null}function C$(n){return n.value===!0?null:{required:!0}}function b$(n){return Yr(n.value)||I$.test(n.value)?null:{email:!0}}function T$(n){return e=>Yr(e.value)||!vA(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function D$(n){return e=>vA(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function S$(n){if(!n)return Ih;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Yr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Ih(n){return null}function EA(n){return n!=null}function wA(n){return Vi(n)?se(n):n}function CA(n){let e={};return n.forEach(t=>{e=t!=null?w(w({},e),t):e}),Object.keys(e).length===0?null:e}function bA(n,e){return e.map(t=>t(n))}function A$(n){return!n.validate}function TA(n){return n.map(e=>A$(e)?e:t=>e.validate(t))}function DA(n){if(!n)return null;let e=n.filter(EA);return e.length==0?null:function(t){return CA(bA(t,e))}}function SA(n){return n!=null?DA(TA(n)):null}function AA(n){if(!n)return null;let e=n.filter(EA);return e.length==0?null:function(t){let r=bA(t,e).map(wA);return ym(r).pipe(x(CA))}}function NA(n){return n!=null?AA(TA(n)):null}function cA(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RA(n){return n._rawValidators}function MA(n){return n._rawAsyncValidators}function bv(n){return n?Array.isArray(n)?n:[n]:[]}function Eh(n,e){return Array.isArray(n)?n.includes(e):n===e}function lA(n,e){let t=bv(e);return bv(n).forEach(i=>{Eh(t,i)||t.push(i)}),t}function uA(n,e){return bv(e).filter(t=>!Eh(n,t))}var wh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=NA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Co=class extends wh{get formDirective(){return null}get path(){return null}},Ac=class extends wh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ch=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},N$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ene=$(w({},N$),{"[class.ng-submitted]":"isSubmitted"}),To=(()=>{class n extends Ch{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(S(Ac,2))}}static{this.\u0275dir=De({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ud("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[jt]})}}return n})(),Do=(()=>{class n extends Ch{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(S(Co,10))}}static{this.\u0275dir=De({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ud("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[jt]})}}return n})();var bc="VALID",vh="INVALID",Eo="PENDING",Tc="DISABLED",Qr=class{},bh=class extends Qr{constructor(e,t){super(),this.value=e,this.source=t}},Dc=class extends Qr{constructor(e,t){super(),this.pristine=e,this.source=t}},Sc=class extends Qr{constructor(e,t){super(),this.touched=e,this.source=t}},wo=class extends Qr{constructor(e,t){super(),this.status=e,this.source=t}},Tv=class extends Qr{constructor(e){super(),this.source=e}},Dv=class extends Qr{constructor(e){super(),this.source=e}};function Mv(n){return(Nh(n)?n.validators:n)||null}function R$(n){return Array.isArray(n)?SA(n):n||null}function kv(n,e){return(Nh(e)?e.asyncValidators:n)||null}function M$(n){return Array.isArray(n)?NA(n):n||null}function Nh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function kA(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new R(1e3,"");if(!r[t])throw new R(1001,"")}function PA(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new R(1002,"")})}var bo=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ja(()=>this.statusReactive()),this.statusReactive=qa(void 0),this._pristine=Ja(()=>this.pristineReactive()),this.pristineReactive=qa(!0),this._touched=Ja(()=>this.touchedReactive()),this.touchedReactive=qa(!1),this._events=new We,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xn(this.statusReactive)}set status(e){Xn(()=>this.statusReactive.set(e))}get valid(){return this.status===bc}get invalid(){return this.status===vh}get pending(){return this.status==Eo}get disabled(){return this.status===Tc}get enabled(){return this.status!==Tc}get pristine(){return Xn(this.pristineReactive)}set pristine(e){Xn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Xn(this.touchedReactive)}set touched(e){Xn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uA(e,this._rawAsyncValidators))}hasValidator(e){return Eh(this._rawValidators,e)}hasAsyncValidator(e){return Eh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched($(w({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Sc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Sc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty($(w({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Dc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Dc(!0,r))}markAsPending(e={}){this.status=Eo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending($(w({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this.errors=null,this._forEachChild(i=>{i.disable($(w({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bh(this.value,r)),this._events.next(new wo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($(w({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=bc,this._forEachChild(r=>{r.enable($(w({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors($(w({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bc||this.status===Eo)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bh(this.value,t)),this._events.next(new wo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity($(w({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tc:bc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Eo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=wA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new wo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?Tc:this.errors?vh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Eo)?Eo:this._anyControlsHaveStatus(vh)?vh:bc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Dc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Sc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=R$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=M$(this._rawAsyncValidators)}},Th=class extends bo{constructor(e,t,r){super(Mv(t),kv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){PA(this,!0,e),Object.keys(e).forEach(r=>{kA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Sv=class extends Th{};var Pv=new A("CallSetDisabledState",{providedIn:"root",factory:()=>Rh}),Rh="always";function k$(n,e){return[...e.path,n]}function dA(n,e,t=Rh){Ov(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),O$(n,e),L$(n,e),x$(n,e),P$(n,e)}function hA(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Dh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function P$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Ov(n,e){let t=RA(n);e.validator!==null?n.setValidators(cA(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=MA(n);e.asyncValidator!==null?n.setAsyncValidators(cA(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Dh(e._rawValidators,i),Dh(e._rawAsyncValidators,i)}function Sh(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=RA(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=MA(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Dh(e._rawValidators,r),Dh(e._rawAsyncValidators,r),t}function O$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OA(n,e)})}function x$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OA(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OA(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function L$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function F$(n,e){n==null,Ov(n,e)}function V$(n,e){return Sh(n,e)}function U$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function j$(n){return Object.getPrototypeOf(n.constructor)===Ah}function B$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Jr?t=s:j$(s)?r=s:i=s}),i||r||t||null}function H$(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pA(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yh=class extends bo{constructor(e=null,t,r){super(Mv(t),kv(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(pA(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){pA(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var W$=n=>n instanceof yh;var So=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=De({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var xA=new A("");var z$={provide:Co,useExisting:bn(()=>Wi)},Wi=(()=>{class n extends Co{get submitted(){return Xn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Ja(()=>this._submittedReactive()),this._submittedReactive=qa(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Le,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return dA(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){hA(t.control||null,t,!1),H$(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),B$(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Tv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Dv(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(hA(r||null,t),W$(i)&&(dA(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);F$(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&V$(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ov(this.form,this),this._oldForm&&Sh(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(S(Rv,10),S(yA,10),S(Pv,8))}}static{this.\u0275dir=De({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ye("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zr([z$]),jt,on]})}}return n})();var G$={provide:Ac,useExisting:bn(()=>zi)},zi=(()=>{class n extends Ac{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Le,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$$(this,s)}ngOnChanges(t){this._added||this._setUpControl(),U$(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return k$(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(S(Co,13),S(Rv,10),S(yA,10),S(Nc,10),S(xA,8))}}static{this.\u0275dir=De({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[zr([G$]),jt,on]})}}return n})(),q$={provide:Nc,useExisting:bn(()=>Mh),multi:!0};function LA(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function K$(n){return n.split(":")[0]}var Mh=(()=>{class n extends Ah{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=LA(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=K$(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qn(n)))(i||n)}})()}static{this.\u0275dir=De({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ye("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[zr([q$]),jt]})}}return n})(),FA=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(LA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(S(an),S(Rn),S(Mh,9))}}static{this.\u0275dir=De({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),Y$={provide:Nc,useExisting:bn(()=>VA),multi:!0};function mA(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Q$(n){return n.split(":")[0]}var VA=(()=>{class n extends Ah{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Q$(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qn(n)))(i||n)}})()}static{this.\u0275dir=De({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ye("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[zr([Y$]),jt]})}}return n})(),UA=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(mA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(mA(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(S(an),S(Rn),S(VA,9))}}static{this.\u0275dir=De({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var J$=(()=>{class n{constructor(){this._validator=Ih}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ih,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=De({type:n,features:[on]})}}return n})();var Z$={provide:Rv,useExisting:bn(()=>xv),multi:!0};var xv=(()=>{class n extends J${constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ji,this.createValidator=t=>IA}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Qn(n)))(i||n)}})()}static{this.\u0275dir=De({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Hr("required",i._enabled?"":null)},inputs:{required:"required"},features:[zr([Z$]),jt]})}}return n})();var jA=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Dn({type:n})}static{this.\u0275inj=Tn({})}}return n})(),Av=class extends bo{constructor(e,t,r){super(Mv(t),kv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){PA(this,!1,e),e.forEach((r,i)=>{kA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function gA(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ao=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return gA(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Th(i,s)}record(t,r=null){let i=this._reduceControls(t);return new Sv(i,r)}control(t,r,i){let s={};return this.useNonNullable?(gA(r)?s=r:(s.validators=r,s.asyncValidators=i),new yh(t,$(w({},s),{nonNullable:!0}))):new yh(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new Av(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof yh)return t;if(t instanceof bo)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pv,useValue:t.callSetDisabledState??Rh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Dn({type:n})}static{this.\u0275inj=Tn({imports:[jA]})}}return n})(),No=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xA,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Pv,useValue:t.callSetDisabledState??Rh}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Dn({type:n})}static{this.\u0275inj=Tn({imports:[jA]})}}return n})();var Vv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var E=function(n,e){if(!n)throw Gi(e)},Gi=function(n){return new Error("Firebase Database ("+Vv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var $A=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},X$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Oh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(t[u],t[d],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($A(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):X$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new Uv;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Uv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Bv=function(n){let e=$A(n);return Oh.encodeByteArray(e,!0)},Rc=function(n){return Bv(n).replace(/\./g,"")},Mc=function(n){try{return Oh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function HA(n){return WA(void 0,n)}function WA(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!eH(t)||(n[t]=WA(n[t],e[t]));return n}function eH(n){return n!=="__proto__"}function tH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var nH=()=>tH().__FIREBASE_DEFAULTS__,rH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Mc(n[1]);return e&&JSON.parse(e)},$v=()=>{try{return nH()||rH()||iH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Hv=n=>{var e,t;return(t=(e=$v())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},zA=n=>{let e=Hv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Wv=()=>{var n;return(n=$v())===null||n===void 0?void 0:n.config},zv=n=>{var e;return(e=$v())===null||e===void 0?void 0:e[`_${n}`]};var Zr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function GA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Rc(JSON.stringify(t)),Rc(JSON.stringify(o)),""].join(".")}function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function qA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YA(){let n=et();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xn(){return Vv.NODE_CLIENT===!0||Vv.NODE_ADMIN===!0}function QA(){try{return typeof indexedDB=="object"}catch{return!1}}function JA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var sH="FirebaseError",ln=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=sH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sr.prototype.create)}},sr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?oH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ln(i,a,r)}};function oH(n,e){return n.replace(aH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var aH=/\{\$([^}]+)}/g;function Ro(n){return JSON.parse(n)}function Ue(n){return JSON.stringify(n)}var ZA=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=Ro(Mc(s[0])||""),t=Ro(Mc(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var XA=function(n){let e=ZA(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},eN=function(n){let e=ZA(n).claims;return typeof e=="object"&&e.admin===!0};function Ln(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function qi(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Pc(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Oc(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Mo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(BA(s)&&BA(o)){if(!Mo(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function BA(n){return n!==null&&typeof n=="object"}function Xr(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ko(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Po(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var Ph=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function tN(n,e){let t=new jv(n,e);return t.subscribe.bind(t)}var jv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");cH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Fv),i.error===void 0&&(i.error=Fv),i.complete===void 0&&(i.complete=Fv);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function cH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Fv(){}function Lh(n,e){return`${n} failed: ${e} argument `}var nN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,E(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},xc=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var bne=4*60*60*1e3;function Qe(n){return n&&n._delegate?n._delegate:n}var Ht=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ki="[DEFAULT]";var Fh=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Zr;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uH(e))try{this.getOrInitializeService({instanceIdentifier:Ki})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ki){return this.instances.has(e)}getOptions(e=Ki){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ki){return this.component?this.component.multipleInstances?e:Ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lH(n){return n===Ki?void 0:n}function uH(n){return n.instantiationMode==="EAGER"}var Lc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Fh(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var dH=[],fe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(fe||{}),hH={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},fH=fe.INFO,pH={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},mH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=pH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ei=class{constructor(e){this.name=e,this._logLevel=fH,this._logHandler=mH,this._userLogHandler=null,dH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}};var gH=(n,e)=>e.some(t=>n instanceof t),rN,iN;function _H(){return rN||(rN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vH(){return iN||(iN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sN=new WeakMap,qv=new WeakMap,oN=new WeakMap,Gv=new WeakMap,Yv=new WeakMap;function yH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Fn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&sN.set(t,n)}).catch(()=>{}),Yv.set(e,n),e}function IH(n){if(qv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});qv.set(n,e)}var Kv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aN(n){Kv=n(Kv)}function EH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Vh(this),e,...t);return oN.set(r,e.sort?e.sort():[e]),Fn(r)}:vH().includes(n)?function(...e){return n.apply(Vh(this),e),Fn(sN.get(this))}:function(...e){return Fn(n.apply(Vh(this),e))}}function wH(n){return typeof n=="function"?EH(n):(n instanceof IDBTransaction&&IH(n),gH(n,_H())?new Proxy(n,Kv):n)}function Fn(n){if(n instanceof IDBRequest)return yH(n);if(Gv.has(n))return Gv.get(n);let e=wH(n);return e!==n&&(Gv.set(n,e),Yv.set(e,n)),e}var Vh=n=>Yv.get(n);function Uh(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Fn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Fn(o.result),c.oldVersion,c.newVersion,Fn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var CH=["get","getKey","getAll","getAllKeys","count"],bH=["put","add","delete","clear"],Qv=new Map;function cN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qv.get(e))return Qv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=bH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CH.includes(t)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return Qv.set(e,s),s}aN(n=>$(w({},n),{get:(e,t,r)=>cN(e,t)||n.get(e,t,r),has:(e,t)=>!!cN(e,t)||n.has(e,t)}));var Zv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function TH(n){let e=n.getComponent();return e?.type==="VERSION"}var Xv="@firebase/app",lN="0.10.13";var or=new ei("@firebase/app"),DH="@firebase/app-compat",SH="@firebase/analytics-compat",AH="@firebase/analytics",NH="@firebase/app-check-compat",RH="@firebase/app-check",MH="@firebase/auth",kH="@firebase/auth-compat",PH="@firebase/database",OH="@firebase/data-connect",xH="@firebase/database-compat",LH="@firebase/functions",FH="@firebase/functions-compat",VH="@firebase/installations",UH="@firebase/installations-compat",jH="@firebase/messaging",BH="@firebase/messaging-compat",$H="@firebase/performance",HH="@firebase/performance-compat",WH="@firebase/remote-config",zH="@firebase/remote-config-compat",GH="@firebase/storage",qH="@firebase/storage-compat",KH="@firebase/firestore",YH="@firebase/vertexai-preview",QH="@firebase/firestore-compat",JH="firebase",ZH="10.14.1";var ey="[DEFAULT]",XH={[Xv]:"fire-core",[DH]:"fire-core-compat",[AH]:"fire-analytics",[SH]:"fire-analytics-compat",[RH]:"fire-app-check",[NH]:"fire-app-check-compat",[MH]:"fire-auth",[kH]:"fire-auth-compat",[PH]:"fire-rtdb",[OH]:"fire-data-connect",[xH]:"fire-rtdb-compat",[LH]:"fire-fn",[FH]:"fire-fn-compat",[VH]:"fire-iid",[UH]:"fire-iid-compat",[jH]:"fire-fcm",[BH]:"fire-fcm-compat",[$H]:"fire-perf",[HH]:"fire-perf-compat",[WH]:"fire-rc",[zH]:"fire-rc-compat",[GH]:"fire-gcs",[qH]:"fire-gcs-compat",[KH]:"fire-fst",[QH]:"fire-fst-compat",[YH]:"fire-vertex","fire-js":"fire-js",[JH]:"fire-js-all"};var Fc=new Map,eW=new Map,ty=new Map;function uN(n,e){try{n.container.addComponent(e)}catch(t){or.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ni(n){let e=n.name;if(ty.has(e))return or.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,n);for(let t of Fc.values())uN(t,n);for(let t of eW.values())uN(t,n);return!0}function Uc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wt(n){return n.settings!==void 0}var tW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ti=new sr("app","Firebase",tW);var ny=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}};var ri=ZH;function sy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ey,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ti.create("bad-app-name",{appName:String(i)});if(t||(t=Wv()),!t)throw ti.create("no-options");let s=Fc.get(i);if(s){if(Mo(t,s.options)&&Mo(r,s.config))return s;throw ti.create("duplicate-app",{appName:i})}let o=new Lc(i);for(let c of ty.values())o.addComponent(c);let a=new ny(t,r,o);return Fc.set(i,a),a}function Oo(n=ey){let e=Fc.get(n);if(!e&&n===ey&&Wv())return sy();if(!e)throw ti.create("no-app",{appName:n});return e}function jh(){return Array.from(Fc.values())}function Fe(n,e,t){var r;let i=(r=XH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),or.warn(a.join(" "));return}ni(new Ht(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var nW="firebase-heartbeat-database",rW=1,Vc="firebase-heartbeat-store",Jv=null;function pN(){return Jv||(Jv=Uh(nW,rW,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ti.create("idb-open",{originalErrorMessage:n.message})})),Jv}function iW(n){return p(this,null,function*(){try{let t=(yield pN()).transaction(Vc),r=yield t.objectStore(Vc).get(mN(n));return yield t.done,r}catch(e){if(e instanceof ln)or.warn(e.message);else{let t=ti.create("idb-get",{originalErrorMessage:e?.message});or.warn(t.message)}}})}function dN(n,e){return p(this,null,function*(){try{let r=(yield pN()).transaction(Vc,"readwrite");yield r.objectStore(Vc).put(e,mN(n)),yield r.done}catch(t){if(t instanceof ln)or.warn(t.message);else{let r=ti.create("idb-set",{originalErrorMessage:t?.message});or.warn(r.message)}}})}function mN(n){return`${n.name}!${n.options.appId}`}var sW=1024,oW=30*24*60*60*1e3,ry=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new iy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hN();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=oW}),this._storage.overwrite(this._heartbeatsCache))}catch(r){or.warn(r)}})}getHeartbeatsHeader(){return p(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=hN(),{heartbeatsToSend:r,unsentEntries:i}=aW(this._heartbeatsCache.heartbeats),s=Rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return or.warn(t),""}})}};function hN(){return new Date().toISOString().substring(0,10)}function aW(n,e=sW){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fN(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var iy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return QA()?JA().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield iW(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return dN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return dN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function fN(n){return Rc(JSON.stringify({version:2,heartbeats:n})).length}function cW(n){ni(new Ht("platform-logger",e=>new Zv(e),"PRIVATE")),ni(new Ht("heartbeat",e=>new ry(e),"PRIVATE")),Fe(Xv,lN,n),Fe(Xv,lN,"esm2017"),Fe("fire-js","")}cW("");var lW="firebase",uW="10.14.1";Fe(lW,uW,"app");var Qi=new Yn("ANGULARFIRE2_VERSION");function $h(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var jc=(n,e)=>{let t=e?[e]:jh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Lo=class{constructor(){return jc(dW)}},dW="app-check";function xo(){}var Bh=class{zone;delegate;constructor(e,t=_m){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},oy=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xo,{},xo,xo)),t.pipe(Te({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Fo=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Bh(Zone.current)),this.insideAngular=t.run(()=>new Bh(Zone.current,Ms)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(k(oe))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function hW(n){return Hh().ngZone.runOutsideAngular(()=>n())}function Yi(n){return Hh().ngZone.run(()=>n())}function fW(n){return pW(Hh())(n)}function pW(n){return function(t){return t=t.lift(new oy(n.ngZone)),t.pipe(Ar(n.outsideAngular),Sr(n.insideAngular))}}var mW=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Yi(()=>n.apply(void 0,r))},je=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xo,{},xo,xo))),r[s]=mW(r[s],t));let i=hW(()=>n.apply(this,r));if(!e)if(i instanceof L){let s=Hh();return i.pipe(Ar(s.outsideAngular),Sr(s.insideAngular))}else return Yi(()=>i);return i instanceof L?i.pipe(fW):i instanceof Promise?Yi(()=>new Promise((s,o)=>i.then(a=>Yi(()=>s(a)),a=>Yi(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Yi(()=>i)};var ar=class{constructor(e){return e}},Ji=class{constructor(){return jh()}};function gW(n){return n&&n.length===1?n[0]:new ar(Oo())}var ay=new A("angularfire2._apps"),_W={provide:ar,useFactory:gW,deps:[[new Xe,ay]]},vW={provide:Ji,deps:[[new Xe,ay]]};function yW(n){return(e,t)=>{let r=t.get(Rt);Fe("angularfire",Qi.full,"core"),Fe("angularfire",Qi.full,"app"),Fe("angular",SS.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ar(i)}}function gN(n,...e){return St([_W,vW,{provide:ay,useFactory:yW(n),multi:!0,deps:[oe,Ge,Fo,...e]}])}var _N=je(sy,!0);var ly={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var C=function(n,e){if(!n)throw Zi(e)},Zi=function(n){return new Error("Firebase Database ("+ly.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var vN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},IW=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(t[u],t[d],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):IW(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new uy;let h=s<<2|a>>4;if(r.push(h),l!==64){let f=a<<4&240|l>>2;if(r.push(f),d!==64){let m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},uy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},hy=function(n){let e=vN(n);return zh.encodeByteArray(e,!0)},fy=function(n){return hy(n).replace(/\./g,"")},Bc=function(n){try{return zh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yN(n){return IN(void 0,n)}function IN(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!EW(t)||(n[t]=IN(n[t],e[t]));return n}function EW(n){return n!=="__proto__"}function wW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var CW=()=>wW().__FIREBASE_DEFAULTS__,bW=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TW=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Bc(n[1]);return e&&JSON.parse(e)},DW=()=>{try{return CW()||bW()||TW()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var EN=n=>{var e;return(e=DW())===null||e===void 0?void 0:e[`_${n}`]};var Vo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $c(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function wN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Gh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Un(){return ly.NODE_CLIENT===!0||ly.NODE_ADMIN===!0}function bN(){try{return typeof indexedDB=="object"}catch{return!1}}function TN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var SW="FirebaseError",Vn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=SW,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cr.prototype.create)}},cr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?AW(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Vn(i,a,r)}};function AW(n,e){return n.replace(NW,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var NW=/\{\$([^}]+)}/g;function Uo(n){return JSON.parse(n)}function Be(n){return JSON.stringify(n)}var DN=function(n){let e={},t={},r={},i="";try{let s=n.split(".");e=Uo(Bc(s[0])||""),t=Uo(Bc(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};var SN=function(n){let e=DN(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},AN=function(n){let e=DN(n).claims;return typeof e=="object"&&e.admin===!0};function jn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Xi(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function qh(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hc(n,e,t){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function Wc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Wh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)r[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let r=t-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<t;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function NN(n,e){let t=new dy(n,e);return t.subscribe.bind(t)}var dy=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");RW(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=cy),i.error===void 0&&(i.error=cy),i.complete===void 0&&(i.complete=cy);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function RW(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cy(){}function py(n,e){return`${n} failed: ${e} argument `}var RN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,C(r<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},zc=function(n){let e=0;for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};var hre=4*60*60*1e3;function lr(n){return n&&n._delegate?n._delegate:n}var dn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var MW=[],pe=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(pe||{}),kW={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},PW=pe.INFO,OW={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},xW=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=OW[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ii=class{constructor(e){this.name=e,this._logLevel=PW,this._logHandler=xW,this._userLogHandler=null,MW.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var gy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VW(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function VW(n){let e=n.getComponent();return e?.type==="VERSION"}var _y="@firebase/app",MN="0.10.17";var dr=new ii("@firebase/app"),UW="@firebase/app-compat",jW="@firebase/analytics-compat",BW="@firebase/analytics",$W="@firebase/app-check-compat",HW="@firebase/app-check",WW="@firebase/auth",zW="@firebase/auth-compat",GW="@firebase/database",qW="@firebase/data-connect",KW="@firebase/database-compat",YW="@firebase/functions",QW="@firebase/functions-compat",JW="@firebase/installations",ZW="@firebase/installations-compat",XW="@firebase/messaging",ez="@firebase/messaging-compat",tz="@firebase/performance",nz="@firebase/performance-compat",rz="@firebase/remote-config",iz="@firebase/remote-config-compat",sz="@firebase/storage",oz="@firebase/storage-compat",az="@firebase/firestore",cz="@firebase/vertexai",lz="@firebase/firestore-compat",uz="firebase",dz="11.1.0";var hz={[_y]:"fire-core",[UW]:"fire-core-compat",[BW]:"fire-analytics",[jW]:"fire-analytics-compat",[HW]:"fire-app-check",[$W]:"fire-app-check-compat",[WW]:"fire-auth",[zW]:"fire-auth-compat",[GW]:"fire-rtdb",[qW]:"fire-data-connect",[KW]:"fire-rtdb-compat",[YW]:"fire-fn",[QW]:"fire-fn-compat",[JW]:"fire-iid",[ZW]:"fire-iid-compat",[XW]:"fire-fcm",[ez]:"fire-fcm-compat",[tz]:"fire-perf",[nz]:"fire-perf-compat",[rz]:"fire-rc",[iz]:"fire-rc-compat",[sz]:"fire-gcs",[oz]:"fire-gcs-compat",[az]:"fire-fst",[lz]:"fire-fst-compat",[cz]:"fire-vertex","fire-js":"fire-js",[uz]:"fire-js-all"};var fz=new Map,pz=new Map,kN=new Map;function PN(n,e){try{n.container.addComponent(e)}catch(t){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function si(n){let e=n.name;if(kN.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;kN.set(e,n);for(let t of fz.values())PN(t,n);for(let t of pz.values())PN(t,n);return!0}function jo(n){return n.settings!==void 0}var mz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Iy=new cr("app","Firebase",mz);var Bo=dz;function ur(n,e,t){var r;let i=(r=hz[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(a.join(" "));return}si(new dn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var gz="firebase-heartbeat-database",_z=1,Gc="firebase-heartbeat-store",my=null;function FN(){return my||(my=Uh(gz,_z,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Iy.create("idb-open",{originalErrorMessage:n.message})})),my}function vz(n){return p(this,null,function*(){try{let t=(yield FN()).transaction(Gc),r=yield t.objectStore(Gc).get(VN(n));return yield t.done,r}catch(e){if(e instanceof Vn)dr.warn(e.message);else{let t=Iy.create("idb-get",{originalErrorMessage:e?.message});dr.warn(t.message)}}})}function ON(n,e){return p(this,null,function*(){try{let r=(yield FN()).transaction(Gc,"readwrite");yield r.objectStore(Gc).put(e,VN(n)),yield r.done}catch(t){if(t instanceof Vn)dr.warn(t.message);else{let r=Iy.create("idb-set",{originalErrorMessage:t?.message});dr.warn(r.message)}}})}function VN(n){return`${n.name}!${n.options.appId}`}var yz=1024,Iz=30*24*60*60*1e3,vy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new yy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xN();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Iz}),this._storage.overwrite(this._heartbeatsCache))}catch(r){dr.warn(r)}})}getHeartbeatsHeader(){return p(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=xN(),{heartbeatsToSend:r,unsentEntries:i}=Ez(this._heartbeatsCache.heartbeats),s=fy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return dr.warn(t),""}})}};function xN(){return new Date().toISOString().substring(0,10)}function Ez(n,e=yz){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),LN(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),LN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var yy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return bN()?TN().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield vz(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ON(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ON(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function LN(n){return fy(JSON.stringify({version:2,heartbeats:n})).length}function wz(n){si(new dn("platform-logger",e=>new gy(e),"PRIVATE")),si(new dn("heartbeat",e=>new vy(e),"PRIVATE")),ur(_y,MN,n),ur(_y,MN,"esm2017"),ur("fire-js","")}wz("");function GN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qN=GN,KN=new cr("auth","Firebase",GN());var Jh=new ii("@firebase/auth");function Tz(n,...e){Jh.logLevel<=pe.WARN&&Jh.warn(`Auth (${Bo}): ${n}`,...e)}function Yh(n,...e){Jh.logLevel<=pe.ERROR&&Jh.error(`Auth (${Bo}): ${n}`,...e)}function UN(n,...e){throw ky(n,...e)}function My(n,...e){return ky(n,...e)}function YN(n,e,t){let r=Object.assign(Object.assign({},qN()),{[e]:t});return new cr("auth","Firebase",r).create(e,{appName:n.name})}function Qh(n){return YN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ky(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return KN.create(n,...e)}function ae(n,e,...t){if(!n)throw ky(e,...t)}function qc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Yh(e),new Error(e)}function Zh(n,e){n||qc(e)}function Dz(){return jN()==="http:"||jN()==="https:"}function jN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Sz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dz()||CN()||"connection"in navigator)?navigator.onLine:!0}function Az(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ts=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zh(t>e,"Short delay should be less than long delay!"),this.isMobile=$c()||Gh()}get(){return Sz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Nz(n,e){Zh(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Rz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Mz=new ts(3e4,6e4);function QN(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function rf(s,o,a,c){return p(this,arguments,function*(n,e,t,r,i={}){return JN(n,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Wc(Object.assign({key:n.config.apiKey},u)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let f=Object.assign({method:e,headers:h},l);return wN()||(f.referrerPolicy="no-referrer"),Xh.fetch()(ZN(n,n.config.apiHost,t,d),f)}))})}function JN(n,e,t){return p(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Rz),e);try{let i=new Cy(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Kh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kh(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Kh(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Kh(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw YN(n,u,l);UN(n,u)}}catch(i){if(i instanceof Vn)throw i;UN(n,"network-request-failed",{message:String(i)})}})}function ZN(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Nz(n.config,i):`${n.config.apiScheme}://${i}`}var Cy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(My(this.auth,"network-request-failed")),Mz.get())})}};function Kh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=My(n,e,r);return i.customData._tokenResponse=t,i}function kz(n,e){return p(this,null,function*(){return rf(n,"POST","/v1/accounts:delete",e)})}function XN(n,e){return p(this,null,function*(){return rf(n,"POST","/v1/accounts:lookup",e)})}function Kc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function eR(n,e=!1){return p(this,null,function*(){let t=lr(n),r=yield t.getIdToken(e),i=tR(r);ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Kc(Ey(i.auth_time)),issuedAtTime:Kc(Ey(i.iat)),expirationTime:Kc(Ey(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ey(n){return Number(n)*1e3}function tR(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Bc(t);return i?JSON.parse(i):(Yh("Failed to decode base64 JWT payload"),null)}catch(i){return Yh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function BN(n){let e=tR(n);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function by(n,e,t=!1){return p(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Vn&&Pz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Pz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ty=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),t)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Qc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ef(n){return p(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield by(n,XN(t,{idToken:r}));ae(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rR(s.providerUserInfo):[],a=Oz(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qc(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function nR(n){return p(this,null,function*(){let e=lr(n);yield ef(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Oz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rR(n){return n.map(e=>{var{providerId:t}=e,r=Di(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function xz(n,e){return p(this,null,function*(){let t=yield JN(n,{},()=>p(this,null,function*(){let r=Wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=ZN(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Lz(n,e){return p(this,null,function*(){return rf(n,"POST","/v2/accounts:revokeToken",QN(n,e))})}var Yc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ae(e.length!==0,"internal-error");let t=BN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return p(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield xz(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return qc("not implemented")}};function oi(n,e){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Jc=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Di(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ty(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let t=yield by(this,this.stsTokenManager.getToken(this.auth,e));return ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return eR(this,e)}reload(){return nR(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ef(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(jo(this.auth.app))return Promise.reject(Qh(this.auth));let e=yield this.getIdToken();return yield by(this,kz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(a=t.tenantId)!==null&&a!==void 0?a:void 0,T=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=t.createdAt)!==null&&l!==void 0?l:void 0,re=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:ie,emailVerified:Ce,isAnonymous:lt,providerData:Oe,stsTokenManager:Lt}=t;ae(ie&&Lt,e,"internal-error");let Ii=Yc.fromJSON(this.name,Lt);ae(typeof ie=="string",e,"internal-error"),oi(d,e.name),oi(h,e.name),ae(typeof Ce=="boolean",e,"internal-error"),ae(typeof lt=="boolean",e,"internal-error"),oi(f,e.name),oi(m,e.name),oi(v,e.name),oi(T,e.name),oi(P,e.name),oi(re,e.name);let Wn=new n({uid:ie,auth:e,email:h,emailVerified:Ce,displayName:d,isAnonymous:lt,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:Ii,createdAt:P,lastLoginAt:re});return Oe&&Array.isArray(Oe)&&(Wn.providerData=Oe.map(Xp=>Object.assign({},Xp))),T&&(Wn._redirectEventId=T),Wn}static _fromIdTokenResponse(e,t,r=!1){return p(this,null,function*(){let i=new Yc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ef(s),s})}static _fromGetAccountInfoResponse(e,t,r){return p(this,null,function*(){let i=t.users[0];ae(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?rR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Yc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Qc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var $N=new Map;function es(n){Zh(n instanceof Function,"Expected a class definition");let e=$N.get(n);return e?(Zh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$N.set(n,e),e)}var Fz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(t,r){return p(this,null,function*(){this.storage[t]=r})}_get(t){return p(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return p(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Dy=Fz;function wy(n,e,t){return`firebase:${n}:${e}:${t}`}var tf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=wy(this.userKey,i.apiKey,s),this.fullPersistenceKey=wy("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Jc._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return p(this,null,function*(){if(!t.length)return new n(es(Dy),e,r);let i=(yield Promise.all(t.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||es(Dy),o=wy(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=Jc._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function HN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Bz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hz(e))return"Blackberry";if(Wz(e))return"Webos";if(Uz(e))return"Safari";if((e.includes("chrome/")||jz(e))&&!e.includes("edge/"))return"Chrome";if($z(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Vz(n=un()){return/firefox\//i.test(n)}function Uz(n=un()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jz(n=un()){return/crios\//i.test(n)}function Bz(n=un()){return/iemobile/i.test(n)}function $z(n=un()){return/android/i.test(n)}function Hz(n=un()){return/blackberry/i.test(n)}function Wz(n=un()){return/webos/i.test(n)}function iR(n,e=[]){let t;switch(n){case"Browser":t=HN(un());break;case"Worker":t=`${HN(un())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${r}`}var Sy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function zz(t){return p(this,arguments,function*(n,e={}){return rf(n,"GET","/v2/passwordPolicy",QN(n,e))})}var Gz=6,Ay=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Gz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Ny=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nf(this),this.idTokenSubscription=new nf(this),this.beforeStateQueue=new Sy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=es(t)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield tf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let t=yield XN(this,{idToken:e}),r=yield Jc._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var t;if(jo(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield ef(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Az()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(jo(this.app))return Promise.reject(Qh(this));let t=e?lr(e):null;return t&&ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return p(this,null,function*(){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return jo(this.app)?Promise.reject(Qh(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jo(this.app)?Promise.reject(Qh(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(es(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield zz(this),t=new Ay(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Lz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&es(e)||this._popupRedirectResolver;ae(t,this,"argument-error"),this.redirectPersistenceManager=yield tf.create(this,[es(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return p(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Tz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function qz(n){return lr(n)}var nf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=NN(t=>this.observer=t)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Kz={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yz(n){Kz=n}function Qz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Jz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(es);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Py(n,e,t,r){return lr(n).onIdTokenChanged(e,t,r)}var Ure=Qz("rcb"),jre=new ts(3e4,6e4);var Bre=new ts(2e3,1e4);var $re=10*60*1e3;var Hre=new ts(3e4,6e4);var Wre=new ts(5e3,15e3);var zre=encodeURIComponent("fac");var WN="@firebase/auth",zN="1.8.1";var Ry=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Zz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xz(n){si(new dn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iR(n)},l=new Ny(r,i,s,c);return Jz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),si(new dn("auth-internal",e=>{let t=qz(e.getProvider("auth").getImmediate());return(r=>new Ry(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(WN,zN,Zz(n)),ur(WN,zN,"esm2017")}var eG=5*60,Gre=EN("authIdTokenMaxAge")||eG;function tG(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Yz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=My("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",tG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xz("Browser");function sR(n){return new L(function(e){var t=Py(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function wR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var CR=wR,bR=new sr("auth","Firebase",wR());var uf=new ei("@firebase/auth");function iG(n,...e){uf.logLevel<=fe.WARN&&uf.warn(`Auth (${ri}): ${n}`,...e)}function of(n,...e){uf.logLevel<=fe.ERROR&&uf.error(`Auth (${ri}): ${n}`,...e)}function zt(n,...e){throw eI(n,...e)}function hn(n,...e){return eI(n,...e)}function Xy(n,e,t){let r=Object.assign(Object.assign({},CR()),{[e]:t});return new sr("auth","Firebase",r).create(e,{appName:n.name})}function pr(n){return Xy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sG(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&zt(n,"argument-error"),Xy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function eI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return bR.create(n,...e)}function O(n,e,...t){if(!n)throw eI(e,...t)}function hr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw of(e),new Error(e)}function mr(n,e){n||hr(e)}function Ly(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function oG(){return oR()==="http:"||oR()==="https:"}function oR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function aG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oG()||KA()||"connection"in navigator)?navigator.onLine:!0}function cG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ns=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,mr(t>e,"Short delay should be less than long delay!"),this.isMobile=kc()||xh()}get(){return aG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function tI(n,e){mr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var df=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var lG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var uG=new ns(3e4,6e4);function ci(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function li(s,o,a,c){return p(this,arguments,function*(n,e,t,r,i={}){return TR(n,i,()=>p(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=Xr(Object.assign({key:n.config.apiKey},u)).slice(1),h=yield n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);let f=Object.assign({method:e,headers:h},l);return qA()||(f.referrerPolicy="no-referrer"),df.fetch()(DR(n,n.config.apiHost,t,d),f)}))})}function TR(n,e,t){return p(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},lG),e);try{let i=new Fy(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw sf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw sf(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw sf(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Xy(n,u,l);zt(n,u)}}catch(i){if(i instanceof ln)throw i;zt(n,"network-request-failed",{message:String(i)})}})}function sl(s,o,a,c){return p(this,arguments,function*(n,e,t,r,i={}){let l=yield li(n,e,t,r,i);return"mfaPendingCredential"in l&&zt(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function DR(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?tI(n.config,i):`${n.config.apiScheme}://${i}`}function dG(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Fy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),uG.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function sf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=hn(n,e,r);return i.customData._tokenResponse=t,i}function aR(n){return n!==void 0&&n.enterprise!==void 0}var Vy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dG(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function hG(n,e){return p(this,null,function*(){return li(n,"GET","/v2/recaptchaConfig",ci(n,e))})}function fG(n,e){return p(this,null,function*(){return li(n,"POST","/v1/accounts:delete",e)})}function SR(n,e){return p(this,null,function*(){return li(n,"POST","/v1/accounts:lookup",e)})}function Zc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function nI(n,e=!1){return p(this,null,function*(){let t=Qe(n),r=yield t.getIdToken(e),i=rI(r);O(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Zc(Oy(i.auth_time)),issuedAtTime:Zc(Oy(i.iat)),expirationTime:Zc(Oy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Oy(n){return Number(n)*1e3}function rI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return of("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mc(t);return i?JSON.parse(i):(of("Failed to decode base64 JWT payload"),null)}catch(i){return of("Caught error parsing JWT payload as JSON",i?.toString()),null}}function cR(n){let e=rI(n);return O(e,"internal-error"),O(typeof e.exp<"u","internal-error"),O(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function el(n,e,t=!1){return p(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof ln&&pG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function pG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Uy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),t)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var tl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hf(n){return p(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield el(n,SR(t,{idToken:r}));O(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?AR(s.providerUserInfo):[],a=mG(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tl(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function iI(n){return p(this,null,function*(){let e=Qe(n);yield hf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function mG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function AR(n){return n.map(e=>{var{providerId:t}=e,r=Di(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function gG(n,e){return p(this,null,function*(){let t=yield TR(n,{},()=>p(this,null,function*(){let r=Xr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=DR(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",df.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function _G(n,e){return p(this,null,function*(){return li(n,"POST","/v2/accounts:revokeToken",ci(n,e))})}var Xc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(typeof e.idToken<"u","internal-error"),O(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){O(e.length!==0,"internal-error");let t=cR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return p(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(O(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield gG(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(O(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(O(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(O(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return hr("not implemented")}};function ai(n,e){O(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ho=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Di(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tl(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let t=yield el(this,this.stsTokenManager.getToken(this.auth,e));return O(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return nI(this,e)}reload(){return iI(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield hf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Wt(this.auth.app))return Promise.reject(pr(this.auth));let e=yield this.getIdToken();return yield el(this,fG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=t.photoURL)!==null&&o!==void 0?o:void 0,v=(a=t.tenantId)!==null&&a!==void 0?a:void 0,T=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=t.createdAt)!==null&&l!==void 0?l:void 0,re=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:ie,emailVerified:Ce,isAnonymous:lt,providerData:Oe,stsTokenManager:Lt}=t;O(ie&&Lt,e,"internal-error");let Ii=Xc.fromJSON(this.name,Lt);O(typeof ie=="string",e,"internal-error"),ai(d,e.name),ai(h,e.name),O(typeof Ce=="boolean",e,"internal-error"),O(typeof lt=="boolean",e,"internal-error"),ai(f,e.name),ai(m,e.name),ai(v,e.name),ai(T,e.name),ai(P,e.name),ai(re,e.name);let Wn=new n({uid:ie,auth:e,email:h,emailVerified:Ce,displayName:d,isAnonymous:lt,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:Ii,createdAt:P,lastLoginAt:re});return Oe&&Array.isArray(Oe)&&(Wn.providerData=Oe.map(Xp=>Object.assign({},Xp))),T&&(Wn._redirectEventId=T),Wn}static _fromIdTokenResponse(e,t,r=!1){return p(this,null,function*(){let i=new Xc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield hf(s),s})}static _fromGetAccountInfoResponse(e,t,r){return p(this,null,function*(){let i=t.users[0];O(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?AR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Xc;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var lR=new Map;function fr(n){mr(n instanceof Function,"Expected a class definition");let e=lR.get(n);return e?(mr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,lR.set(n,e),e)}var vG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(t,r){return p(this,null,function*(){this.storage[t]=r})}_get(t){return p(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return p(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),jy=vG;function af(n,e,t){return`firebase:${n}:${e}:${t}`}var ff=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=af(this.userKey,i.apiKey,s),this.fullPersistenceKey=af("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ho._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return p(this,null,function*(){if(!t.length)return new n(fr(jy),e,r);let i=(yield Promise.all(t.map(l=>p(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||fr(jy),o=af(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=Ho._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>p(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function uR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OR(e))return"Blackberry";if(xR(e))return"Webos";if(RR(e))return"Safari";if((e.includes("chrome/")||MR(e))&&!e.includes("edge/"))return"Chrome";if(PR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function NR(n=et()){return/firefox\//i.test(n)}function RR(n=et()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MR(n=et()){return/crios\//i.test(n)}function kR(n=et()){return/iemobile/i.test(n)}function PR(n=et()){return/android/i.test(n)}function OR(n=et()){return/blackberry/i.test(n)}function xR(n=et()){return/webos/i.test(n)}function sI(n=et()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yG(n=et()){var e;return sI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IG(){return YA()&&document.documentMode===10}function LR(n=et()){return sI(n)||PR(n)||xR(n)||OR(n)||/windows phone/i.test(n)||kR(n)}function FR(n,e=[]){let t;switch(n){case"Browser":t=uR(et());break;case"Worker":t=`${uR(et())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ri}/${r}`}var By=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function EG(t){return p(this,arguments,function*(n,e={}){return li(n,"GET","/v2/passwordPolicy",ci(n,e))})}var wG=6,$y=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:wG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Hy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pf(this),this.idTokenSubscription=new pf(this),this.beforeStateQueue=new By(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fr(t)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ff.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let t=yield SR(this,{idToken:e}),r=yield Ho._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var t;if(Wt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield hf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=cG()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Wt(this.app))return Promise.reject(pr(this));let t=e?Qe(e):null;return t&&O(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return p(this,null,function*(){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Wt(this.app)?Promise.reject(pr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Wt(this.app)?Promise.reject(pr(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(fr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield EG(this),t=new $y(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new sr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield _G(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&fr(e)||this._popupRedirectResolver;O(t,this,"argument-error"),this.redirectPersistenceManager=yield ff.create(this,[fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return p(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&iG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ui(n){return Qe(n)}var pf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=tN(t=>this.observer=t)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Cf={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CG(n){Cf=n}function VR(n){return Cf.loadJS(n)}function bG(){return Cf.recaptchaEnterpriseScript}function TG(){return Cf.gapiScript}function UR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var DG="recaptcha-enterprise",SG="NO_RECAPTCHA",Wy=class{constructor(e){this.type=DG,this.auth=ui(e)}verify(e="verify",t=!1){return p(this,null,function*(){function r(s){return p(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>p(this,null,function*(){hG(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Vy(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;aR(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(SG)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&aR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=bG();c.length!==0&&(c+=a),VR(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function dR(n,e,t,r=!1){return p(this,null,function*(){let i=new Wy(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function zy(n,e,t,r){return p(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield dR(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>p(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield dR(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function oI(n,e){let t=Uc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Mo(s,e??{}))return i;zt(i,"already-initialized")}return t.initialize({options:e})}function AG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(fr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function aI(n,e,t){let r=ui(n);O(r._canInitEmulator,r,"emulator-config-failed"),O(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=jR(e),{host:o,port:a}=NG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||RG()}function jR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NG(n){let e=jR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:hR(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:hR(o)}}}function hR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function RG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Wo=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,t){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}};function MG(n,e){return p(this,null,function*(){return li(n,"POST","/v1/accounts:signUp",e)})}function kG(n,e){return p(this,null,function*(){return sl(n,"POST","/v1/accounts:signInWithPassword",ci(n,e))})}function PG(n,e){return p(this,null,function*(){return sl(n,"POST","/v1/accounts:signInWithEmailLink",ci(n,e))})}function OG(n,e){return p(this,null,function*(){return sl(n,"POST","/v1/accounts:signInWithEmailLink",ci(n,e))})}var nl=class n extends Wo{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return p(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,t,"signInWithPassword",kG);case"emailLink":return PG(e,{email:this._email,oobCode:this._password});default:zt(e,"internal-error")}})}_linkToIdToken(e,t){return p(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,r,"signUpPassword",MG);case"emailLink":return OG(e,{idToken:t,email:this._email,oobCode:this._password});default:zt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function $o(n,e){return p(this,null,function*(){return sl(n,"POST","/v1/accounts:signInWithIdp",ci(n,e))})}var xG="http://localhost",mf=class n extends Wo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Di(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,$o(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){let e={requestUri:xG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xr(t)}return e}};function LG(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FG(n){let e=ko(Po(n)).link,t=e?ko(Po(e)).deep_link_id:null,r=ko(Po(n)).deep_link_id;return(r?ko(Po(r)).link:null)||r||t||e||n}var gf=class n{constructor(e){var t,r,i,s,o,a;let c=ko(Po(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=LG((i=c.mode)!==null&&i!==void 0?i:null);O(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=FG(e);try{return new n(t)}catch{return null}}};var BR=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return nl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=gf.parseLink(r);return O(i,"argument-error"),nl._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),rl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var _f=class extends rl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var cI=(()=>{class n extends _f{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return mf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function VG(n,e){return p(this,null,function*(){return sl(n,"POST","/v1/accounts:signUp",ci(n,e))})}var zo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return p(this,null,function*(){let s=yield Ho._fromIdTokenResponse(e,r,i),o=fR(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=fR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function fR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Gy=class n extends ln{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function $R(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Gy._fromErrorAndOperation(n,s,e,r):s})}function UG(n,e,t=!1){return p(this,null,function*(){let r=yield el(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return zo._forOperation(n,"link",r)})}function jG(n,e,t=!1){return p(this,null,function*(){let{auth:r}=n;if(Wt(r.app))return Promise.reject(pr(r));let i="reauthenticate";try{let s=yield el(n,$R(r,i,e,n),t);O(s.idToken,r,"internal-error");let o=rI(s.idToken);O(o,r,"internal-error");let{sub:a}=o;return O(n.uid===a,r,"user-mismatch"),zo._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&zt(r,"user-mismatch"),s}})}function HR(n,e,t=!1){return p(this,null,function*(){if(Wt(n.app))return Promise.reject(pr(n));let r="signIn",i=yield $R(n,r,e),s=yield zo._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function lI(n,e){return p(this,null,function*(){return HR(ui(n),e)})}function WR(n){return p(this,null,function*(){let e=ui(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function uI(n,e,t){return p(this,null,function*(){if(Wt(n.app))return Promise.reject(pr(n));let r=ui(n),o=yield zy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VG).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&WR(n),c}),a=yield zo._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function dI(n,e,t){return Wt(n.app)?Promise.reject(pr(n)):lI(Qe(n),BR.credential(e,t)).catch(r=>p(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&WR(n),r}))}function hI(n,e,t,r){return Qe(n).onIdTokenChanged(e,t,r)}function fI(n,e,t){return Qe(n).beforeAuthStateChanged(e,t)}function pI(n,e,t,r){return Qe(n).onAuthStateChanged(e,t,r)}function mI(n){return Qe(n).signOut()}var vf="__sak";var yf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var BG=1e3,$G=10,HG=(()=>{class n extends yf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);IG()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,$G):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},BG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return p(this,null,function*(){yield br(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return p(this,null,function*(){let r=yield br(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return p(this,null,function*(){yield br(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zR=HG;var WG=(()=>{class n extends yf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),gI=WG;function zG(n){return Promise.all(n.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var GG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return p(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>p(this,null,function*(){return u(r.origin,o)})),l=yield zG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function _I(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var qy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=_I("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Bn(){return window}function qG(n){Bn().location.href=n}function GR(){return typeof Bn().WorkerGlobalScope<"u"&&typeof Bn().importScripts=="function"}function KG(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function YG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function QG(){return GR()?self:null}var qR="firebaseLocalStorageDb",JG=1,If="firebaseLocalStorage",KR="fbase_key",rs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function bf(n,e){return n.transaction([If],e?"readwrite":"readonly").objectStore(If)}function ZG(){let n=indexedDB.deleteDatabase(qR);return new rs(n).toPromise()}function Ky(){let n=indexedDB.open(qR,JG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(If,{keyPath:KR})}catch(i){t(i)}}),n.addEventListener("success",()=>p(this,null,function*(){let r=n.result;r.objectStoreNames.contains(If)?e(r):(r.close(),yield ZG(),e(yield Ky()))}))})}function pR(n,e,t){return p(this,null,function*(){let r=bf(n,!0).put({[KR]:e,value:t});return new rs(r).toPromise()})}function XG(n,e){return p(this,null,function*(){let t=bf(n,!1).get(e),r=yield new rs(t).toPromise();return r===void 0?null:r.value})}function mR(n,e){let t=bf(n,!0).delete(e);return new rs(t).toPromise()}var eq=800,tq=3,nq=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield Ky(),this.db)})}_withRetries(t){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>tq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return GR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=GG._getInstance(QG()),this.receiver._subscribe("keyChanged",(t,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var t,r;if(this.activeServiceWorker=yield KG(),!this.activeServiceWorker)return;this.sender=new qy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||YG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ky();return yield pR(t,vf,"1"),yield mR(t,vf),!0}catch{}return!1})}_withPendingWrite(t){return p(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>pR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return p(this,null,function*(){let r=yield this._withRetries(i=>XG(i,t));return this.localCache[t]=r,r})}_remove(t){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>mR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return p(this,null,function*(){let t=yield this._withRetries(s=>{let o=bf(s,!1).getAll();return new rs(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),eq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),YR=nq;var Ose=UR("rcb"),xse=new ns(3e4,6e4);function QR(n,e){return e?fr(e):(O(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var il=class extends Wo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function rq(n){return HR(n.auth,new il(n),n.bypassAuthState)}function iq(n){let{auth:e,user:t}=n;return O(t,e,"internal-error"),jG(t,new il(n),n.bypassAuthState)}function sq(n){return p(this,null,function*(){let{auth:e,user:t}=n;return O(t,e,"internal-error"),UG(t,new il(n),n.bypassAuthState)})}var Ef=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rq;case"linkViaPopup":case"linkViaRedirect":return sq;case"reauthViaPopup":case"reauthViaRedirect":return iq;default:zt(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var oq=new ns(2e3,1e4);function vI(n,e,t){return p(this,null,function*(){if(Wt(n.app))return Promise.reject(hn(n,"operation-not-supported-in-this-environment"));let r=ui(n);sG(n,e,rl);let i=QR(r,t);return new aq(r,"signInViaPopup",e,i).executeNotNull()})}var aq=(()=>{class n extends Ef{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return p(this,null,function*(){let t=yield this.execute();return O(t,this.auth,"internal-error"),t})}onExecution(){return p(this,null,function*(){mr(this.filter.length===1,"Popup operations only handle one event");let t=_I();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,oq.get())};t()}}n.currentPopupAction=null;return n})(),cq="pendingRedirect",cf=new Map,Yy=class n extends Ef{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=cf.get(this.auth._key());if(!e){try{let r=(yield lq(this.resolver,this.auth))?yield br(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}cf.set(this.auth._key(),e)}return this.bypassAuthState||cf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return br(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,br(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function lq(n,e){return p(this,null,function*(){let t=hq(e),r=dq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function uq(n,e){cf.set(n._key(),e)}function dq(n){return fr(n._redirectPersistence)}function hq(n){return af(cq,n.config.apiKey,n.name)}function fq(n,e,t=!1){return p(this,null,function*(){if(Wt(n.app))return Promise.reject(pr(n));let r=ui(n),i=QR(r,e),o=yield new Yy(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var pq=10*60*1e3,Qy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(hn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pq&&this.cachedEventUids.clear(),this.cachedEventUids.has(gR(e))}saveEventToCache(e){this.cachedEventUids.add(gR(e)),this.lastProcessedEventTime=Date.now()}};function gR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function mq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JR(n);default:return!1}}function gq(t){return p(this,arguments,function*(n,e={}){return li(n,"GET","/v1/projects",e)})}var _q=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vq=/^https?/;function yq(n){return p(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield gq(n);for(let t of e)try{if(Iq(t))return}catch{}zt(n,"unauthorized-domain")})}function Iq(n){let e=Ly(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!vq.test(t))return!1;if(_q.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Eq=new ns(3e4,6e4);function _R(){let n=Bn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function wq(n){return new Promise((e,t)=>{var r,i,s;function o(){_R(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_R(),t(hn(n,"network-request-failed"))},timeout:Eq.get()})}if(!((i=(r=Bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Bn().gapi)===null||s===void 0)&&s.load)o();else{let a=UR("iframefcb");return Bn()[a]=()=>{gapi.load?o():t(hn(n,"network-request-failed"))},VR(`${TG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw lf=null,e})}var lf=null;function Cq(n){return lf=lf||wq(n),lf}var bq=new ns(5e3,15e3),Tq="__/auth/iframe",Dq="emulator/auth/iframe",Sq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Aq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nq(n){let e=n.config;O(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?tI(e,Dq):`https://${n.config.authDomain}/${Tq}`,r={apiKey:e.apiKey,appName:n.name,v:ri},i=Aq.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Xr(r).slice(1)}`}function Rq(n){return p(this,null,function*(){let e=yield Cq(n),t=Bn().gapi;return O(t,n,"internal-error"),e.open({where:document.body,url:Nq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sq,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=hn(n,"network-request-failed"),a=Bn().setTimeout(()=>{s(o)},bq.get());function c(){Bn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Mq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kq=500,Pq=600,Oq="_blank",xq="http://localhost",wf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Lq(n,e,t,r=kq,i=Pq){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Mq),{width:r.toString(),height:i.toString(),top:s,left:o}),l=et().toLowerCase();t&&(a=MR(l)?Oq:t),NR(l)&&(e=e||xq,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(yG(l)&&a!=="_self")return Fq(e||"",a),new wf(null);let d=window.open(e||"",a,u);O(d,n,"popup-blocked");try{d.focus()}catch{}return new wf(d)}function Fq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Vq="__/auth/handler",Uq="emulator/auth/handler",jq=encodeURIComponent("fac");function vR(n,e,t,r,i,s){return p(this,null,function*(){O(n.config.authDomain,n,"auth-domain-config-required"),O(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ri,eventId:i};if(e instanceof rl){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Pc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof _f){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${jq}=${encodeURIComponent(c)}`:"";return`${Bq(n)}?${Xr(a).slice(1)}${l}`})}function Bq({config:n}){return n.emulator?tI(n,Uq):`https://${n.authDomain}/${Vq}`}var xy="webStorageSupport",Jy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gI,this._completeRedirectFn=fq,this._overrideRedirectResult=uq}_openPopup(e,t,r,i){return p(this,null,function*(){var s;mr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield vR(e,t,r,Ly(),i);return Lq(e,o,_I())})}_openRedirect(e,t,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield vR(e,t,r,Ly(),i);return qG(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(mr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return p(this,null,function*(){let t=yield Rq(e),r=new Qy(e);return t.register("authEvent",i=>(O(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xy,{type:xy},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[xy];o!==void 0&&t(!!o),zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return LR()||RR()||sI()}},ZR=Jy;var yR="@firebase/auth",IR="1.7.9";var Zy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function $q(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Hq(n){ni(new Ht("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;O(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FR(n)},l=new Hy(r,i,s,c);return AG(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ni(new Ht("auth-internal",e=>{let t=ui(e.getProvider("auth").getImmediate());return(r=>new Zy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fe(yR,IR,$q(n)),Fe(yR,IR,"esm2017")}var Wq=5*60,zq=zv("authIdTokenMaxAge")||Wq,ER=null,Gq=n=>e=>p(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>zq)return;let i=t?.token;ER!==i&&(ER=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function yI(n=Oo()){let e=Uc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=oI(n,{popupRedirectResolver:ZR,persistence:[YR,zR,gI]}),r=zv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Gq(s.toString());fI(t,o,()=>o(t.currentUser)),hI(t,a=>o(a))}}let i=Hv("auth");return i&&aI(t,`http://${i}`),t}function qq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}CG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=hn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",qq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Hq("Browser");var XR="auth",gr=class{constructor(e){return e}},ol=class{constructor(){return jc(XR)}};var II=new A("angularfire2.auth-instances");function x3(n,e){let t=$h(XR,n,e);return t&&new gr(t)}function L3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gr(r)}}var F3={provide:ol,deps:[[new Xe,II]]},V3={provide:gr,useFactory:x3,deps:[[new Xe,II],ar]};function eM(n,...e){return Fe("angularfire",Qi.full,"auth"),St([V3,F3,{provide:II,useFactory:L3(n),multi:!0,deps:[oe,Ge,Fo,Ji,[new Xe,Lo],...e]}])}var tM=je(sR,!0);var nM=je(uI,!0);var rM=je(yI,!0);var EI=je(pI,!0);var iM=je(dI,!0);var sM=je(vI,!0);var oM=je(mI,!0);var cM="@firebase/database",lM="1.0.10";var DE="";function U3(n){DE=n}var NI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Be(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Uo(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var RI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return jn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var $M=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new NI(e)}}catch{}return new RI},ss=$M("localStorage"),MI=$M("sessionStorage");var Yo=new ii("@firebase/database"),j3=function(){let n=1;return function(){return n++}}(),HM=function(n){let e=RN(n),t=new Wh;t.update(e);let r=t.digest();return zh.encodeByteArray(r)},El=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=El.apply(null,r):typeof r=="object"?e+=Be(r):e+=r,e+=" "}return e},os=null,uM=!0,B3=function(n,e){C(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Yo.logLevel=pe.VERBOSE,os=Yo.log.bind(Yo),e&&MI.set("logging_enabled",!0)):typeof n=="function"?os=n:(os=null,MI.remove("logging_enabled"))},tt=function(...n){if(uM===!0&&(uM=!1,os===null&&MI.get("logging_enabled")===!0&&B3(!0)),os){let e=El.apply(null,n);os(e)}},wl=function(n){return function(...e){tt(n,...e)}},kI=function(...n){let e="FIREBASE INTERNAL ERROR: "+El(...n);Yo.error(e)},as=function(...n){let e=`FIREBASE FATAL ERROR: ${El(...n)}`;throw Yo.error(e),new Error(e)},Ot=function(...n){let e="FIREBASE WARNING: "+El(...n);Yo.warn(e)},$3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},WM=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},H3=function(n){if(Un()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Zo="[MIN_NAME]",cs="[MAX_NAME]",sa=function(n,e){if(n===e)return 0;if(n===Zo||e===cs)return-1;if(e===Zo||n===cs)return 1;{let t=dM(n),r=dM(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},W3=function(n,e){return n===e?0:n<e?-1:1},al=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Be(e))},SE=function(n){if(typeof n!="object"||n===null)return Be(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Be(e[r]),t+=":",t+=SE(n[e[r]]);return t+="}",t},zM=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function pt(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var GM=function(n){C(!WM(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},z3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},G3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function q3(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var K3=new RegExp("^-?(0*)\\d{1,10}$"),Y3=-2147483648,Q3=2147483647,dM=function(n){if(K3.test(n)){let e=Number(n);if(e>=Y3&&e<=Q3)return e}return null},Cl=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Ot("Exception was thrown by user callback.",t),e},Math.floor(0))}},J3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},hl=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var PI=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ot(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var OI=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ot(e)}},hM=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Df="5",qM="v",KM="s",YM="r",QM="f",JM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ZM="ls",XM="p",xI="ac",ek="websocket",tk="long_polling";var LI=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ss.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ss.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Z3(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function nk(n,e,t){C(typeof e=="string","typeof type must == string"),C(typeof t=="object","typeof params must == object");let r;if(e===ek)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===tk)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Z3(n)&&(t.ns=n.namespace);let i=[];return pt(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var FI=class{constructor(){this.counters_={}}incrementCounter(e,t=1){jn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return yN(this.counters_)}};var wI={},CI={};function AE(n){let e=n.toString();return wI[e]||(wI[e]=new FI),wI[e]}function X3(n,e){let t=n.toString();return CI[t]||(CI[t]=e()),CI[t]}var VI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Cl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var fM="start",e4="close",t4="pLPCommand",n4="pRTLPCB",rk="id",ik="pw",sk="ser",r4="cb",i4="seg",s4="ts",o4="d",a4="dframe",ok=1870,ak=30,c4=ok-ak,l4=25e3,u4=3e4,UI=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=wl(e),this.stats_=AE(t),this.urlFn=c=>(this.appCheckToken&&(c[xI]=this.appCheckToken),nk(t,tk,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new VI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(u4)),H3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new jI((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===fM)this.id=a,this.password=c;else if(o===e4)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[fM]="t",r[sk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[r4]=this.scriptTagHolder.uniqueCallbackIdentifier),r[qM]=Df,this.transportSessionId&&(r[KM]=this.transportSessionId),this.lastSessionId&&(r[ZM]=this.lastSessionId),this.applicationId&&(r[XM]=this.applicationId),this.appCheckToken&&(r[xI]=this.appCheckToken),typeof location<"u"&&location.hostname&&JM.test(location.hostname)&&(r[YM]=QM);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Un()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!z3()&&!G3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Be(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=hy(t),i=zM(r,c4);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Un())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[a4]="t",r[rk]=e,r[ik]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Be(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},jI=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Un())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=j3(),window[t4+this.uniqueCallbackIdentifier]=e,window[n4+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){tt("frame writing exception"),a.stack&&tt(a.stack),tt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||tt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[rk]=this.myID,e[ik]=this.myPW,e[sk]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ak+r.length<=ok;){let o=this.pendingSegs.shift();r=r+"&"+i4+i+"="+o.seg+"&"+s4+i+"="+o.ts+"&"+o4+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(l4)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Un()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{tt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var d4=16384,h4=45e3,Sf=null;typeof MozWebSocket<"u"?Sf=MozWebSocket:typeof WebSocket<"u"&&(Sf=WebSocket);var cl=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=wl(this.connId),this.stats_=AE(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[qM]=Df,!Un()&&typeof location<"u"&&location.hostname&&JM.test(location.hostname)&&(a[YM]=QM),r&&(a[KM]=r),i&&(a[ZM]=i),s&&(a[xI]=s),o&&(a[XM]=o),nk(t,ek,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ss.set("previous_websocket_failure",!0);try{let i;if(Un()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Df}/${DE}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Sf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Sf!==null&&!n.forceDisallow_}static previouslyFailed(){return ss.isInMemoryStorage||ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){ss.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Uo(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(C(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Be(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=zM(r,d4);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(h4))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),f4=(()=>{class n{static get ALL_TRANSPORTS(){return[UI,cl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=cl&&cl.isAvailable(),i=r&&!cl.previouslyFailed();if(t.webSocketOnly&&(r||Ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[cl];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),p4=6e4,m4=5e3,g4=10*1024,_4=100*1024,bI="t",pM="d",v4="s",mM="r",y4="e",gM="o",_M="a",vM="n",yM="p",I4="h",BI=class{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=wl("c:"+this.id+":"),this.transportManager_=new f4(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=hl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>g4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(bI in e){let t=e[bI];t===_M?this.upgradeIfSecondaryHealthy_():t===mM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===gM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=al("t",e),r=al("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:yM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:_M,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=al("t",e),r=al("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=al(bI,e);if(pM in e){let r=e[pM];if(t===I4){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===vM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===v4?this.onConnectionShutdown_(r):t===mM?this.onReset_(r):t===y4?kI("Server Error: "+r):t===gM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):kI("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Df!==r&&Ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),hl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(p4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(m4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:yM,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Af=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Nf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){C(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Rf=class n extends Nf{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!$c()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return C(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var IM=32,EM=768,me=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ce(){return new me("")}function Q(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function hi(n){return n.pieces_.length-n.pieceNum_}function Ee(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new me(n.pieces_,e)}function ck(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function E4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function lk(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function uk(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new me(e,0)}function $e(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof me)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new me(t,0)}function J(n){return n.pieceNum_>=n.pieces_.length}function ft(n,e){let t=Q(n),r=Q(e);if(t===null)return e;if(t===r)return ft(Ee(n),Ee(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function NE(n,e){if(hi(n)!==hi(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function pn(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(hi(n)>hi(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var $I=class{constructor(e,t){this.errorPrefix_=t,this.parts_=lk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zc(this.parts_[r]);dk(this)}};function w4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=zc(e),dk(n)}function C4(n){let e=n.parts_.pop();n.byteLength_-=zc(e),n.parts_.length>0&&(n.byteLength_-=1)}function dk(n){if(n.byteLength_>EM)throw new Error(n.errorPrefix_+"has a key path longer than "+EM+" bytes ("+n.byteLength_+").");if(n.parts_.length>IM)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+IM+") or object contains a cycle "+is(n))}function is(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var HI=class n extends Nf{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return C(e==="visible","Unknown event type: "+e),[this.visible_]}};var ll=1e3,b4=60*5*1e3,wM=30*1e3,T4=1.3,D4=3e4,S4="server_kill",CM=3,RE=(()=>{class n extends Af{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=wl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ll,this.maxReconnectDelay_=b4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Un())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");HI.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Rf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Be(o)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Vo,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),C(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&jn(t,"w")){let i=Xi(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||AN(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=wM)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=SN(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),C(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Be(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):kI("Unrecognized action received from server: "+Be(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ll,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ll,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>D4&&(this.reconnectDelay_=ll),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*T4)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){C(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?tt("getToken() completed but was canceled"):(tt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new BI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,m=>{Ot(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(S4)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Ot(h),l())}}})}interrupt(t){tt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){tt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],qh(this.interruptReasons_)&&(this.reconnectDelay_=ll,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>SE(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new me(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){tt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=CM&&(this.reconnectDelay_=wM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){tt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=CM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Un()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+DE.replace(/\./g,"-")]=1,$c()?t["framework.cordova"]=1:Gh()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Rf.getInstance().currentlyOnline();return qh(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),q=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Xo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new q(Zo,e),i=new q(Zo,t);return this.compare(r,i)!==0}minPost(){return q.MIN}};var Tf,Mf=class extends Xo{static get __EMPTY_NODE(){return Tf}static set __EMPTY_NODE(e){Tf=e}compare(e,t){return sa(e.name,t.name)}isDefinedOn(e){throw Zi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return q.MIN}maxPost(){return new q(cs,Tf)}makePost(e,t){return C(typeof e=="string","KeyIndex indexValue must always be a string."),new q(e,Tf)}toString(){return".key"}},Qo=new Mf;var qo=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},fn=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Gt.EMPTY_NODE,this.right=o??Gt.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),WI=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new fn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Gt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,fn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,fn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new qo(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new qo(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new qo(this.root_,null,this.comparator_,!0,e)}};Gt.EMPTY_NODE=new WI;function A4(n,e){return sa(n.name,e.name)}function ME(n,e){return sa(n,e)}var zI;function N4(n){zI=n}var hk=function(n){return typeof n=="number"?"number:"+GM(n):"string:"+n},fk=function(n){if(n.isLeafNode()){let e=n.val();C(typeof e=="string"||typeof e=="number"||typeof e=="object"&&jn(e,".sv"),"Priority must be a string or number.")}else C(n===zI||n.isEmpty(),"priority of unexpected type.");C(n===zI||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var bM,ea=(()=>{class n{static set __childrenNodeConstructor(t){bM=t}static get __childrenNodeConstructor(){return bM}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,C(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fk(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return J(t)?this:Q(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Q(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(C(i!==".priority"||hi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ee(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+hk(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=GM(this.value_):t+=this.value_,this.lazyHash_=HM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(C(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return C(s>=0,"Unknown leaf type: "+r),C(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),pk,mk;function R4(n){pk=n}function M4(n){mk=n}var GI=class extends Xo{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?sa(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return q.MIN}maxPost(){return new q(cs,new ea("[PRIORITY-POST]",mk))}makePost(e,t){let r=pk(e);return new q(t,new ea("[PRIORITY-POST]",r))}toString(){return".priority"}},ke=new GI;var k4=Math.log(2),qI=class{constructor(e){let t=s=>parseInt(Math.log(s)/k4,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},kf=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=n[c],h=t?t(d):d,new fn(h,d.node,fn.BLACK,null,null);{let f=parseInt(u/2,10)+c,m=i(c,f),v=i(f+1,l);return d=n[f],h=t?t(d):d,new fn(h,d.node,fn.BLACK,m,v)}},s=function(c){let l=null,u=null,d=n.length,h=function(m,v){let T=d-m,P=d;d-=m;let re=i(T+1,P),ie=n[T],Ce=t?t(ie):ie;f(new fn(Ce,ie.node,v,null,re))},f=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let v=c.nextBitIsOne(),T=Math.pow(2,c.count-(m+1));v?h(T,fn.BLACK):(h(T,fn.BLACK),h(T,fn.RED))}return u},o=new qI(n.length),a=s(o);return new Gt(r||e,a)};var TI,Go={},ta=class n{static get Default(){return C(Go&&ke,"ChildrenNode.ts has not been loaded"),TI=TI||new n({".priority":Go},{".priority":ke}),TI}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=Xi(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Gt?t:null}hasIndex(e){return jn(this.indexSet_,e.toString())}addIndex(e,t){C(e!==Qo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(q.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=kf(r,e.getCompare()):a=Go;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=Hc(this.indexes_,(i,s)=>{let o=Xi(this.indexSet_,s);if(C(o,"Missing index implementation for "+s),i===Go)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(q.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),kf(a,o.getCompare())}else return Go;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new q(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Hc(this.indexes_,i=>{if(i===Go)return i;{let s=t.get(e.name);return s?i.remove(new q(e.name,s)):i}});return new n(r,this.indexSet_)}};var ul,j=(()=>{class n{static get EMPTY_NODE(){return ul||(ul=new n(new Gt(ME),null,ta.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fk(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ul}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?ul:r}}getChild(t){let r=Q(t);return r===null?this:this.getImmediateChild(r).getChild(Ee(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(C(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new q(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?ul:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Q(t);if(i===null)return r;{C(Q(t)!==".priority"||hi(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ee(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ke,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+hk(this.getPriority().val())+":"),this.forEachChild(ke,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":HM(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new q(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new q(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new q(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,q.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,q.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bl?-1:0}withIndex(t){if(t===Qo||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Qo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ke),s=r.getIterator(ke),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Qo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),KI=class extends j{constructor(){super(new Gt(ME),j.EMPTY_NODE,ta.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return j.EMPTY_NODE}isEmpty(){return!1}},bl=new KI;Object.defineProperties(q,{MIN:{value:new q(Zo,j.EMPTY_NODE)},MAX:{value:new q(cs,bl)}});Mf.__EMPTY_NODE=j.EMPTY_NODE;ea.__childrenNodeConstructor=j;N4(bl);M4(bl);var P4=!0;function nt(n,e=null){if(n===null)return j.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),C(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new ea(t,nt(e))}if(!(n instanceof Array)&&P4){let t=[],r=!1;if(pt(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=nt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new q(o,c)))}}),t.length===0)return j.EMPTY_NODE;let s=kf(t,A4,o=>o.name,ME);if(r){let o=kf(t,ke.getCompare());return new j(s,nt(e),new ta({".priority":o},{".priority":ke}))}else return new j(s,nt(e),ta.Default)}else{let t=j.EMPTY_NODE;return pt(n,(r,i)=>{if(jn(n,r)&&r.substring(0,1)!=="."){let s=nt(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(nt(e))}}R4(nt);var YI=class extends Xo{constructor(e){super(),this.indexPath_=e,C(!J(e)&&Q(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?sa(e.name,t.name):s}makePost(e,t){let r=nt(e),i=j.EMPTY_NODE.updateChild(this.indexPath_,r);return new q(t,i)}maxPost(){let e=j.EMPTY_NODE.updateChild(this.indexPath_,bl);return new q(cs,e)}toString(){return lk(this.indexPath_,0).join("/")}};var QI=class extends Xo{compare(e,t){let r=e.node.compareTo(t.node);return r===0?sa(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return q.MIN}maxPost(){return q.MAX}makePost(e,t){let r=nt(e);return new q(t,r)}toString(){return".value"}},O4=new QI;function gk(n){return{type:"value",snapshotNode:n}}function na(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function gl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function _l(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function x4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var vl=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(gl(t,a)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(na(t,r)):o.trackChildChange(_l(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ke,(i,s)=>{t.hasChild(i)||r.trackChildChange(gl(i,s))}),t.isLeafNode()||t.forEachChild(ke,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(_l(i,s,o))}else r.trackChildChange(na(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?j.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Pf=class n{constructor(e){this.indexedFilter_=new vl(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new q(t,r))||(r=j.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=j.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(j.EMPTY_NODE);let s=this;return t.forEachChild(ke,(o,a)=>{s.matches(new q(o,a))||(i=i.updateImmediateChild(o,j.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var JI=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Pf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new q(t,r))||(r=j.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=j.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=j.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(j.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,j.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;C(a.numChildren()===this.limit_,"");let c=new q(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===t||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return s?.trackChildChange(_l(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(gl(t,d));let v=a.updateImmediateChild(t,j.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(na(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(gl(l.name,l.node)),s.trackChildChange(na(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,j.EMPTY_NODE)):e}};var ZI=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ke}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zo}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ke}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function L4(n){return n.loadsAllData()?new vl(n.getIndex()):n.hasLimit()?new JI(n):new Pf(n)}function TM(n){let e={};if(n.isDefault())return e;let t;if(n.index_===ke?t="$priority":n.index_===O4?t="$value":n.index_===Qo?t="$key":(C(n.index_ instanceof YI,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Be(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Be(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Be(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Be(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Be(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function DM(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==ke&&(e.i=n.index_.toString()),e}var XI=class n extends Af{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=wl("p:rest:"),this.listens_={}}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=TM(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),Xi(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=TM(e._queryParams),r=e._path.toString(),i=new Vo;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Wc(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Uo(a.responseText)}catch{Ot("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ot("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var eE=class{constructor(){this.rootNode_=j.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Of(){return{value:null,children:new Map}}function _k(n,e,t){if(J(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Q(e);n.children.has(r)||n.children.set(r,Of());let i=n.children.get(r);e=Ee(e),_k(i,e,t)}}function tE(n,e,t){n.value!==null?t(e,n.value):F4(n,(r,i)=>{let s=new me(e.toString()+"/"+r);tE(i,s,t)})}function F4(n,e){n.children.forEach((t,r)=>{e(r,t)})}var nE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&pt(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var SM=10*1e3,V4=30*1e3,U4=5*60*1e3,rE=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new nE(e);let r=SM+(V4-SM)*Math.random();hl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;pt(e,(i,s)=>{s>0&&jn(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),hl(this.reportStats_.bind(this),Math.floor(Math.random()*2*U4))}};var $n=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}($n||{});function vk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function PE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var iE=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=$n.ACK_USER_WRITE,this.source=vk()}operationForChild(e){if(J(this.path)){if(this.affectedTree.value!=null)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new me(e));return new n(ce(),t,this.revert)}}else return C(Q(this.path)===e,"operationForChild called for unrelated child."),new n(Ee(this.path),this.affectedTree,this.revert)}};var xf=class n{constructor(e,t){this.source=e,this.path=t,this.type=$n.LISTEN_COMPLETE}operationForChild(e){return J(this.path)?new n(this.source,ce()):new n(this.source,Ee(this.path))}};var ra=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=$n.OVERWRITE}operationForChild(e){return J(this.path)?new n(this.source,ce(),this.snap.getImmediateChild(e)):new n(this.source,Ee(this.path),this.snap)}};var Lf=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=$n.MERGE}operationForChild(e){if(J(this.path)){let t=this.children.subtree(new me(e));return t.isEmpty()?null:t.value?new ra(this.source,ce(),t.value):new n(this.source,ce(),t)}else return C(Q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var _r=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;let t=Q(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var sE=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function j4(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(x4(o.childName,o.snapshotNode))}),dl(n,i,"child_removed",e,r,t),dl(n,i,"child_added",e,r,t),dl(n,i,"child_moved",s,r,t),dl(n,i,"child_changed",e,r,t),dl(n,i,"value",e,r,t),i}function dl(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>$4(n,a,c)),o.forEach(a=>{let c=B4(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function B4(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function $4(n,e,t){if(e.childName==null||t.childName==null)throw Zi("Should only compare child_ events.");let r=new q(e.childName,e.snapshotNode),i=new q(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Qf(n,e){return{eventCache:n,serverCache:e}}function fl(n,e,t,r){return Qf(new _r(e,t,r),n.serverCache)}function yk(n,e,t,r){return Qf(n.eventCache,new _r(e,t,r))}function oE(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ls(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var DI,H4=()=>(DI||(DI=new Gt(W3)),DI),mt=class n{static fromObject(e){let t=new n(null);return pt(e,(r,i)=>{t=t.set(new me(r),i)}),t}constructor(e,t=H4()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ce(),value:this.value};if(J(e))return null;{let r=Q(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ee(e),t);return s!=null?{path:$e(new me(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(J(e))return this;{let t=Q(e),r=this.children.get(t);return r!==null?r.subtree(Ee(e)):new n(null)}}set(e,t){if(J(e))return new n(t,this.children);{let r=Q(e),s=(this.children.get(r)||new n(null)).set(Ee(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(J(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Q(e),r=this.children.get(t);if(r){let i=r.remove(Ee(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(J(e))return this.value;{let t=Q(e),r=this.children.get(t);return r?r.get(Ee(e)):null}}setTree(e,t){if(J(e))return t;{let r=Q(e),s=(this.children.get(r)||new n(null)).setTree(Ee(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(ce(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_($e(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ce(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(J(e))return null;{let s=Q(e),o=this.children.get(s);return o?o.findOnPath_(Ee(e),$e(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ce(),t)}foreachOnPath_(e,t,r){if(J(e))return this;{this.value&&r(t,this.value);let i=Q(e),s=this.children.get(i);return s?s.foreachOnPath_(Ee(e),$e(t,i),r):new n(null)}}foreach(e){this.foreach_(ce(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_($e(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var mn=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new mt(null))}};function pl(n,e,t){if(J(e))return new mn(new mt(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=ft(i,e);return s=s.updateChild(o,t),new mn(n.writeTree_.set(i,s))}else{let i=new mt(t),s=n.writeTree_.setTree(e,i);return new mn(s)}}}function AM(n,e,t){let r=n;return pt(t,(i,s)=>{r=pl(r,$e(e,i),s)}),r}function NM(n,e){if(J(e))return mn.empty();{let t=n.writeTree_.setTree(e,new mt(null));return new mn(t)}}function aE(n,e){return us(n,e)!=null}function us(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ft(t.path,e)):null}function RM(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(ke,(r,i)=>{e.push(new q(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new q(r,i.value))}),e}function di(n,e){if(J(e))return n;{let t=us(n,e);return t!=null?new mn(new mt(t)):new mn(n.writeTree_.subtree(e))}}function cE(n){return n.writeTree_.isEmpty()}function ia(n,e){return Ik(ce(),n.writeTree_,e)}function Ik(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(C(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=Ik($e(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild($e(n,".priority"),r)),t}}function OE(n,e){return bk(e,n)}function W4(n,e,t,r,i){C(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=pl(n.visibleWrites,e,t)),n.lastWriteId=r}function z4(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function G4(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);C(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&q4(a,r.path)?i=!1:pn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return K4(n),!0;if(r.snap)n.visibleWrites=NM(n.visibleWrites,r.path);else{let a=r.children;pt(a,c=>{n.visibleWrites=NM(n.visibleWrites,$e(r.path,c))})}return!0}else return!1}function q4(n,e){if(n.snap)return pn(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&pn($e(n.path,t),e))return!0;return!1}function K4(n){n.visibleWrites=Ek(n.allWrites,Y4,ce()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Y4(n){return n.visible}function Ek(n,e,t){let r=mn.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)pn(t,o)?(a=ft(t,o),r=pl(r,a,s.snap)):pn(o,t)&&(a=ft(o,t),r=pl(r,ce(),s.snap.getChild(a)));else if(s.children){if(pn(t,o))a=ft(t,o),r=AM(r,a,s.children);else if(pn(o,t))if(a=ft(o,t),J(a))r=AM(r,ce(),s.children);else{let c=Xi(s.children,Q(a));if(c){let l=c.getChild(Ee(a));r=pl(r,ce(),l)}}}else throw Zi("WriteRecord should have .snap or .children")}}return r}function wk(n,e,t,r,i){if(!r&&!i){let s=us(n.visibleWrites,e);if(s!=null)return s;{let o=di(n.visibleWrites,e);if(cE(o))return t;if(t==null&&!aE(o,ce()))return null;{let a=t||j.EMPTY_NODE;return ia(o,a)}}}else{let s=di(n.visibleWrites,e);if(!i&&cE(s))return t;if(!i&&t==null&&!aE(s,ce()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(pn(l.path,e)||pn(e,l.path))},a=Ek(n.allWrites,o,e),c=t||j.EMPTY_NODE;return ia(a,c)}}}function Q4(n,e,t){let r=j.EMPTY_NODE,i=us(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ke,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=di(n.visibleWrites,e);return t.forEachChild(ke,(o,a)=>{let c=ia(di(s,new me(o)),a);r=r.updateImmediateChild(o,c)}),RM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=di(n.visibleWrites,e);return RM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function J4(n,e,t,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=$e(e,t);if(aE(n.visibleWrites,s))return null;{let o=di(n.visibleWrites,s);return cE(o)?i.getChild(t):ia(o,i.getChild(t))}}function Z4(n,e,t,r){let i=$e(e,t),s=us(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=di(n.visibleWrites,i);return ia(o,r.getNode().getImmediateChild(t))}else return null}function X4(n,e){return us(n.visibleWrites,e)}function e8(n,e,t,r,i,s,o){let a,c=di(n.visibleWrites,e),l=us(c,ce());if(l!=null)a=l;else if(t!=null)a=ia(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function t8(){return{visibleWrites:mn.empty(),allWrites:[],lastWriteId:-1}}function Ff(n,e,t,r){return wk(n.writeTree,n.treePath,e,t,r)}function xE(n,e){return Q4(n.writeTree,n.treePath,e)}function MM(n,e,t,r){return J4(n.writeTree,n.treePath,e,t,r)}function Vf(n,e){return X4(n.writeTree,$e(n.treePath,e))}function n8(n,e,t,r,i,s){return e8(n.writeTree,n.treePath,e,t,r,i,s)}function LE(n,e,t){return Z4(n.writeTree,n.treePath,e,t)}function Ck(n,e){return bk($e(n.treePath,e),n.writeTree)}function bk(n,e){return{treePath:n,writeTree:e}}var lE=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;C(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),C(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,_l(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,gl(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,na(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,_l(r,e.snapshotNode,i.oldSnap));else throw Zi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var uE=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},Tk=new uE,yl=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new _r(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return LE(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ls(this.viewCache_),s=n8(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function r8(n){return{filter:n}}function i8(n,e){C(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function s8(n,e,t,r,i){let s=new lE,o,a;if(t.type===$n.OVERWRITE){let l=t;l.source.fromUser?o=dE(n,e,l.path,l.snap,r,i,s):(C(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!J(l.path),o=Uf(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===$n.MERGE){let l=t;l.source.fromUser?o=a8(n,e,l.path,l.children,r,i,s):(C(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=hE(n,e,l.path,l.children,r,i,a,s))}else if(t.type===$n.ACK_USER_WRITE){let l=t;l.revert?o=u8(n,e,l.path,r,i,s):o=c8(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===$n.LISTEN_COMPLETE)o=l8(n,e,t.path,r,s);else throw Zi("Unknown operation type: "+t.type);let c=s.getChanges();return o8(e,o,c),{viewCache:o,changes:c}}function o8(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=oE(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(gk(oE(e)))}}function Dk(n,e,t,r,i,s){let o=e.eventCache;if(Vf(r,t)!=null)return e;{let a,c;if(J(t))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ls(e),u=l instanceof j?l:j.EMPTY_NODE,d=xE(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=Ff(r,ls(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Q(t);if(l===".priority"){C(hi(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=MM(r,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=Ee(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=MM(r,t,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=LE(r,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return fl(e,a,o.isFullyInitialized()||J(t),n.filter.filtersNodes())}}function Uf(n,e,t,r,i,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(J(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=Q(t);if(!c.isCompleteForPath(t)&&hi(t)>1)return e;let m=Ee(t),T=c.getNode().getImmediateChild(f).updateChild(m,r);f===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),f,T,m,Tk,null)}let d=yk(e,l,c.isFullyInitialized()||J(t),u.filtersNodes()),h=new yl(i,d,s);return Dk(n,d,t,i,h,a)}function dE(n,e,t,r,i,s,o){let a=e.eventCache,c,l,u=new yl(i,e,s);if(J(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=fl(e,l,!0,n.filter.filtersNodes());else{let d=Q(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=fl(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=Ee(t),f=a.getNode().getImmediateChild(d),m;if(J(h))m=r;else{let v=u.getCompleteChild(d);v!=null?ck(h)===".priority"&&v.getChild(uk(h)).isEmpty()?m=v:m=v.updateChild(h,r):m=j.EMPTY_NODE}if(f.equals(m))c=e;else{let v=n.filter.updateChild(a.getNode(),d,m,h,u,o);c=fl(e,v,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function kM(n,e){return n.eventCache.isCompleteForChild(e)}function a8(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=$e(t,c);kM(e,Q(u))&&(a=dE(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=$e(t,c);kM(e,Q(u))||(a=dE(n,a,u,l,i,s,o))}),a}function PM(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function hE(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;J(t)?l=r:l=new mt(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),m=PM(n,f,h);c=Uf(n,c,new me(d),m,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let m=e.serverCache.getNode().getImmediateChild(d),v=PM(n,m,h);c=Uf(n,c,new me(d),v,i,s,o,a)}}),c}function c8(n,e,t,r,i,s,o){if(Vf(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(J(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Uf(n,e,t,c.getNode().getChild(t),i,s,a,o);if(J(t)){let l=new mt(null);return c.getNode().forEachChild(Qo,(u,d)=>{l=l.set(new me(u),d)}),hE(n,e,t,l,i,s,a,o)}else return e}else{let l=new mt(null);return r.foreach((u,d)=>{let h=$e(t,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),hE(n,e,t,l,i,s,a,o)}}function l8(n,e,t,r,i){let s=e.serverCache,o=yk(e,s.getNode(),s.isFullyInitialized()||J(t),s.isFiltered());return Dk(n,o,t,r,Tk,i)}function u8(n,e,t,r,i,s){let o;if(Vf(r,t)!=null)return e;{let a=new yl(r,e,i),c=e.eventCache.getNode(),l;if(J(t)||Q(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ff(r,ls(e));else{let d=e.serverCache.getNode();C(d instanceof j,"serverChildren would be complete if leaf node"),u=xE(r,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=Q(t),d=LE(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,Ee(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,j.EMPTY_NODE,Ee(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ff(r,ls(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Vf(r,ce())!=null,fl(e,l,o,n.filter.filtersNodes())}}var fE=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new vl(r.getIndex()),s=L4(r);this.processor_=r8(s);let o=t.serverCache,a=t.eventCache,c=i.updateFullNode(j.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(j.EMPTY_NODE,a.getNode(),null),u=new _r(c,o.isFullyInitialized(),i.filtersNodes()),d=new _r(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Qf(d,u),this.eventGenerator_=new sE(this.query_)}get query(){return this.query_}};function d8(n){return n.viewCache_.serverCache.getNode()}function h8(n,e){let t=ls(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!J(e)&&!t.getImmediateChild(Q(e)).isEmpty())?t.getChild(e):null}function OM(n){return n.eventRegistrations_.length===0}function f8(n,e){n.eventRegistrations_.push(e)}function xM(n,e,t){let r=[];if(t){C(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function LM(n,e,t,r){e.type===$n.MERGE&&e.source.queryId!==null&&(C(ls(n.viewCache_),"We should always have a full cache before handling merges"),C(oE(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=s8(n.processor_,i,e,t,r);return i8(n.processor_,s.viewCache),C(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Sk(n,s.changes,s.viewCache.eventCache.getNode(),null)}function p8(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ke,(s,o)=>{r.push(na(s,o))}),t.isFullyInitialized()&&r.push(gk(t.getNode())),Sk(n,r,t.getNode(),e)}function Sk(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return j4(n.eventGenerator_,e,t,i)}var jf,pE=class{constructor(){this.views=new Map}};function m8(n){C(!jf,"__referenceConstructor has already been defined"),jf=n}function g8(){return C(jf,"Reference.ts has not been loaded"),jf}function _8(n){return n.views.size===0}function FE(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return C(s!=null,"SyncTree gave us an op for an invalid query."),LM(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(LM(o,e,t,r));return s}}function v8(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=Ff(t,i?r:null),c=!1;a?c=!0:r instanceof j?(a=xE(t,r),c=!1):(a=j.EMPTY_NODE,c=!1);let l=Qf(new _r(a,c,!1),new _r(r,i,!1));return new fE(e,l)}return o}function y8(n,e,t,r,i,s){let o=v8(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),f8(o,t),p8(o,t)}function I8(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=fi(n);if(i==="default")for(let[c,l]of n.views.entries())o=o.concat(xM(l,t,r)),OM(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(i);c&&(o=o.concat(xM(c,t,r)),OM(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!fi(n)&&s.push(new(g8())(e._repo,e._path)),{removed:s,events:o}}function Ak(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jo(n,e){let t=null;for(let r of n.views.values())t=t||h8(r,e);return t}function Nk(n,e){if(e._queryParams.loadsAllData())return Jf(n);{let r=e._queryIdentifier;return n.views.get(r)}}function Rk(n,e){return Nk(n,e)!=null}function fi(n){return Jf(n)!=null}function Jf(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Bf;function E8(n){C(!Bf,"__referenceConstructor has already been defined"),Bf=n}function w8(){return C(Bf,"Reference.ts has not been loaded"),Bf}var C8=1,$f=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new mt(null),this.pendingWriteTree_=t8(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function b8(n,e,t,r,i){return W4(n.pendingWriteTree_,e,t,r,i),i?Tl(n,new ra(vk(),e,t)):[]}function Ko(n,e,t=!1){let r=z4(n.pendingWriteTree_,e);if(G4(n.pendingWriteTree_,e)){let s=new mt(null);return r.snap!=null?s=s.set(ce(),!0):pt(r.children,o=>{s=s.set(new me(o),!0)}),Tl(n,new iE(r.path,s,t))}else return[]}function Zf(n,e,t){return Tl(n,new ra(kE(),e,t))}function T8(n,e,t){let r=mt.fromObject(t);return Tl(n,new Lf(kE(),e,r))}function D8(n,e){return Tl(n,new xf(kE(),e))}function S8(n,e,t){let r=VE(n,t);if(r){let i=UE(r),s=i.path,o=i.queryId,a=ft(s,e),c=new xf(PE(o),a);return jE(n,s,c)}else return[]}function mE(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||Rk(o,e))){let c=I8(o,e,t,r);_8(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(h,f)=>fi(f));if(u&&!d){let h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=R8(h);for(let m=0;m<f.length;++m){let v=f[m],T=v.query,P=Ok(n,v);n.listenProvider_.startListening(ml(T),Hf(n,T),P.hashFn,P.onComplete)}}}!d&&l.length>0&&!r&&(u?n.listenProvider_.stopListening(ml(e),null):l.forEach(h=>{let f=n.queryToTagMap.get(Xf(h));n.listenProvider_.stopListening(ml(h),f)}))}M8(n,l)}return a}function A8(n,e,t,r){let i=VE(n,r);if(i!=null){let s=UE(i),o=s.path,a=s.queryId,c=ft(o,e),l=new ra(PE(a),c,t);return jE(n,o,l)}else return[]}function N8(n,e,t,r){let i=VE(n,r);if(i){let s=UE(i),o=s.path,a=s.queryId,c=ft(o,e),l=mt.fromObject(t),u=new Lf(PE(a),c,l);return jE(n,o,u)}else return[]}function FM(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(h,f)=>{let m=ft(h,i);s=s||Jo(f,m),o=o||fi(f)});let a=n.syncPointTree_.get(i);a?(o=o||fi(a),s=s||Jo(a,ce())):(a=new pE,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=j.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((f,m)=>{let v=Jo(m,ce());v&&(s=s.updateImmediateChild(f,v))}));let l=Rk(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Xf(e);C(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=k8();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let u=OE(n.pendingWriteTree_,i),d=y8(a,e,t,u,s,c);if(!l&&!o&&!r){let h=Nk(a,e);d=d.concat(P8(n,e,h))}return d}function Mk(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=ft(o,e),l=Jo(a,c);if(l)return l});return wk(i,e,s,t,!0)}function Tl(n,e){return kk(e,n.syncPointTree_,null,OE(n.pendingWriteTree_,ce()))}function kk(n,e,t,r){if(J(n.path))return Pk(n,e,t,r);{let i=e.get(ce());t==null&&i!=null&&(t=Jo(i,ce()));let s=[],o=Q(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=Ck(r,o);s=s.concat(kk(a,c,l,u))}return i&&(s=s.concat(FE(i,n,r,t))),s}}function Pk(n,e,t,r){let i=e.get(ce());t==null&&i!=null&&(t=Jo(i,ce()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=Ck(r,o),u=n.operationForChild(o);u&&(s=s.concat(Pk(u,a,c,l)))}),i&&(s=s.concat(FE(i,n,r,t))),s}function Ok(n,e){let t=e.query,r=Hf(n,t);return{hashFn:()=>(d8(e)||j.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?S8(n,t._path,r):D8(n,t._path);{let s=q3(i,t);return mE(n,t,null,s)}}}}function Hf(n,e){let t=Xf(e);return n.queryToTagMap.get(t)}function Xf(n){return n._path.toString()+"$"+n._queryIdentifier}function VE(n,e){return n.tagToQueryMap.get(e)}function UE(n){let e=n.indexOf("$");return C(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new me(n.substr(0,e))}}function jE(n,e,t){let r=n.syncPointTree_.get(e);C(r,"Missing sync point for query tag that we're tracking");let i=OE(n.pendingWriteTree_,e);return FE(r,t,i,null)}function R8(n){return n.fold((e,t,r)=>{if(t&&fi(t))return[Jf(t)];{let i=[];return t&&(i=Ak(t)),pt(r,(s,o)=>{i=i.concat(o)}),i}})}function ml(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(w8())(n._repo,n._path):n}function M8(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Xf(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function k8(){return C8++}function P8(n,e,t){let r=e._path,i=Hf(n,e),s=Ok(n,t),o=n.listenProvider_.startListening(ml(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)C(!fi(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!J(l)&&u&&fi(u))return[Jf(u).query];{let h=[];return u&&(h=h.concat(Ak(u).map(f=>f.query))),pt(d,(f,m)=>{h=h.concat(m)}),h}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(ml(u),Hf(n,u))}}return o}var gE=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},_E=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=$e(this.path_,e);return new n(this.syncTree_,t)}node(){return Mk(this.syncTree_,this.path_)}},O8=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},VM=function(n,e,t){if(!n||typeof n!="object")return n;if(C(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return x8(n[".sv"],e,t);if(typeof n[".sv"]=="object")return L8(n[".sv"],e);C(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},x8=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:C(!1,"Unexpected server value: "+n)}},L8=function(n,e,t){n.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&C(!1,"Unexpected increment value: "+r);let i=e.node();if(C(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},F8=function(n,e,t,r){return BE(e,new _E(t,n),r)},V8=function(n,e,t){return BE(n,new gE(e),t)};function BE(n,e,t){let r=n.getPriority().val(),i=VM(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=VM(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new ea(a,nt(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ea(i))),o.forEachChild(ke,(a,c)=>{let l=BE(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Il=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function $E(n,e){let t=e instanceof me?e:new me(e),r=n,i=Q(t);for(;i!==null;){let s=Xi(r.node.children,i)||{children:{},childCount:0};r=new Il(i,r,s),t=Ee(t),i=Q(t)}return r}function oa(n){return n.node.value}function xk(n,e){n.node.value=e,vE(n)}function Lk(n){return n.node.childCount>0}function U8(n){return oa(n)===void 0&&!Lk(n)}function ep(n,e){pt(n.node.children,(t,r)=>{e(new Il(t,n,r))})}function Fk(n,e,t,r){t&&!r&&e(n),ep(n,i=>{Fk(i,e,!0,r)}),t&&r&&e(n)}function j8(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Dl(n){return new me(n.parent===null?n.name:Dl(n.parent)+"/"+n.name)}function vE(n){n.parent!==null&&B8(n.parent,n.name,n)}function B8(n,e,t){let r=U8(t),i=jn(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,vE(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,vE(n))}var $8=/[\[\].#$\/\u0000-\u001F\u007F]/,H8=/[\[\].#$\u0000-\u001F\u007F]/,SI=10*1024*1024,Vk=function(n){return typeof n=="string"&&n.length!==0&&!$8.test(n)},Uk=function(n){return typeof n=="string"&&n.length!==0&&!H8.test(n)},W8=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Uk(n)};var jk=function(n,e,t){let r=t instanceof me?new $I(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+is(r));if(typeof e=="function")throw new Error(n+"contains a function "+is(r)+" with contents = "+e.toString());if(WM(e))throw new Error(n+"contains "+e.toString()+" "+is(r));if(typeof e=="string"&&e.length>SI/3&&zc(e)>SI)throw new Error(n+"contains a string greater than "+SI+" utf8 bytes "+is(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(pt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Vk(o)))throw new Error(n+" contains an invalid key ("+o+") "+is(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);w4(r,o),jk(n,a,r),C4(r)}),i&&s)throw new Error(n+' contains ".value" child '+is(r)+" in addition to actual children.")}};var Bk=function(n,e,t,r){if(!(r&&t===void 0)&&!Uk(t))throw new Error(py(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},z8=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Bk(n,e,t,r)};var G8=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Vk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!W8(t))throw new Error(py(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var yE=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function $k(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!NE(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Hk(n,e,t){$k(n,t),Wk(n,r=>NE(r,e))}function ds(n,e,t){$k(n,t),Wk(n,r=>pn(r,e)||pn(e,r))}function Wk(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(q8(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function q8(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();os&&tt("event: "+t.toString()),Cl(r)}}}var K8="repo_interrupt",Y8=25,IE=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Of(),this.transactionQueueTree_=new Il,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Q8(n,e,t){if(n.stats_=AE(n.repoInfo_),n.forceRestClient_||J3())n.server_=new XI(n.repoInfo_,(r,i,s,o)=>{UM(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>jM(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Be(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new RE(n.repoInfo_,e,(r,i,s,o)=>{UM(n,r,i,s,o)},r=>{jM(n,r)},r=>{Z8(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=X3(n.repoInfo_,()=>new rE(n.stats_,n.server_)),n.infoData_=new eE,n.infoSyncTree_=new $f({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Zf(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),HE(n,"connected",!1),n.serverSyncTree_=new $f({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);ds(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function J8(n){let t=n.infoData_.getNode(new me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function zk(n){return O8({timestamp:J8(n)})}function UM(n,e,t,r,i){n.dataUpdateCount++;let s=new me(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=Hc(t,l=>nt(l));o=N8(n.serverSyncTree_,s,c,i)}else{let c=nt(t);o=A8(n.serverSyncTree_,s,c,i)}else if(r){let c=Hc(t,l=>nt(l));o=T8(n.serverSyncTree_,s,c)}else{let c=nt(t);o=Zf(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=zE(n,s)),ds(n.eventQueue_,a,o)}function jM(n,e){HE(n,"connected",e),e===!1&&e6(n)}function Z8(n,e){pt(e,(t,r)=>{HE(n,t,r)})}function HE(n,e,t){let r=new me("/.info/"+e),i=nt(t);n.infoData_.updateSnapshot(r,i);let s=Zf(n.infoSyncTree_,r,i);ds(n.eventQueue_,r,s)}function X8(n){return n.nextWriteId_++}function e6(n){Gk(n,"onDisconnectEvents");let e=zk(n),t=Of();tE(n.onDisconnect_,ce(),(i,s)=>{let o=F8(i,s,n.serverSyncTree_,e);_k(t,i,o)});let r=[];tE(t,ce(),(i,s)=>{r=r.concat(Zf(n.serverSyncTree_,i,s));let o=s6(n,i);zE(n,o)}),n.onDisconnect_=Of(),ds(n.eventQueue_,ce(),r)}function t6(n,e,t){let r;Q(e._path)===".info"?r=FM(n.infoSyncTree_,e,t):r=FM(n.serverSyncTree_,e,t),Hk(n.eventQueue_,e._path,r)}function EE(n,e,t){let r;Q(e._path)===".info"?r=mE(n.infoSyncTree_,e,t):r=mE(n.serverSyncTree_,e,t),Hk(n.eventQueue_,e._path,r)}function n6(n){n.persistentConnection_&&n.persistentConnection_.interrupt(K8)}function Gk(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),tt(t,...e)}function qk(n,e,t){return Mk(n.serverSyncTree_,e,t)||j.EMPTY_NODE}function WE(n,e=n.transactionQueueTree_){if(e||tp(n,e),oa(e)){let t=Yk(n,e);C(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&r6(n,Dl(e),t)}else Lk(e)&&ep(e,t=>{WE(n,t)})}function r6(n,e,t){let r=t.map(l=>l.currentWriteId),i=qk(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let u=t[l];C(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=ft(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Gk(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(Ko(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();tp(n,$E(n.transactionQueueTree_,e)),WE(n,n.transactionQueueTree_),ds(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)Cl(d[h])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{Ot("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}zE(n,e)}},o)}function zE(n,e){let t=Kk(n,e),r=Dl(t),i=Yk(n,t);return i6(n,i,r),r}function i6(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=ft(t,c.path),u=!1,d;if(C(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Ko(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Y8)u=!0,d="maxretry",i=i.concat(Ko(n.serverSyncTree_,c.currentWriteId,!0));else{let h=qk(n,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){jk("transaction failed: Data returned ",f,c.path);let m=nt(f);typeof f=="object"&&f!=null&&jn(f,".priority")||(m=m.updatePriority(h.getPriority()));let T=c.currentWriteId,P=zk(n),re=V8(m,h,P);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=re,c.currentWriteId=X8(n),o.splice(o.indexOf(T),1),i=i.concat(b8(n.serverSyncTree_,c.path,re,c.currentWriteId,c.applyLocally)),i=i.concat(Ko(n.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(Ko(n.serverSyncTree_,c.currentWriteId,!0))}ds(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}tp(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Cl(r[a]);WE(n,n.transactionQueueTree_)}function Kk(n,e){let t,r=n.transactionQueueTree_;for(t=Q(e);t!==null&&oa(r)===void 0;)r=$E(r,t),e=Ee(e),t=Q(e);return r}function Yk(n,e){let t=[];return Qk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Qk(n,e,t){let r=oa(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ep(e,i=>{Qk(n,i,t)})}function tp(n,e){let t=oa(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,xk(e,t.length>0?t:void 0)}ep(e,r=>{tp(n,r)})}function s6(n,e){let t=Dl(Kk(n,e)),r=$E(n.transactionQueueTree_,e);return j8(r,i=>{AI(n,i)}),AI(n,r),Fk(r,i=>{AI(n,i)}),t}function AI(n,e){let t=oa(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(C(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(C(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Ko(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?xk(e,void 0):t.length=s+1,ds(n.eventQueue_,Dl(e),i);for(let o=0;o<r.length;o++)Cl(r[o])}}function o6(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function a6(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ot(`Invalid query segment '${t}' in query '${n}'`)}return e}var BM=function(n,e){let t=c6(n),r=t.namespace;t.domain==="firebase.com"&&as(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&as("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||$3();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new LI(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new me(t.pathString)}},c6=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=o6(n.substring(u,d)));let h=a6(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")t="localhost";else if(f.split(".").length<=2)t=f;else{let m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),t=e.substring(m+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Wf=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Be(this.snapshot.exportVal())}},zf=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Gf=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var wE=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return J(this._path)?null:ck(this._path)}get ref(){return new vr(this._repo,this._path)}get _queryIdentifier(){let e=DM(this._queryParams),t=SE(e);return t==="{}"?"default":t}get _queryObject(){return DM(this._queryParams)}isEqual(e){if(e=lr(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=NE(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+E4(this._path)}};var vr=class n extends wE{constructor(e,t){super(e,t,new ZI,!1)}get parent(){let e=uk(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},qf=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new me(e),r=CE(this.ref,e);return new n(this._node.getChild(t),r,ke)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,CE(this.ref,r),ke)))}hasChild(e){let t=new me(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function CE(n,e){return n=lr(n),Q(n._path)===null?z8("child","path",e,!1):Bk("child","path",e,!1),new vr(n._repo,$e(n._path,e))}var Kf=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new Wf("value",this,new qf(e.snapshotNode,new vr(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zf(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Yf=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zf(this,e,t):null}createEvent(e,t){C(e.childName!=null,"Child events should have a childName.");let r=CE(new vr(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Wf(e.type,this,new qf(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Sl(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=t,l=(u,d)=>{EE(n._repo,n,a),c(u,d)};l.userCallback=t.userCallback,l.context=t.context,t=l}let o=new Gf(t,s||void 0),a=e==="value"?new Kf(o):new Yf(e,o);return t6(n._repo,n,a),()=>EE(n._repo,n,a)}function Jk(n,e,t,r){return Sl(n,"value",e,t,r)}function Zk(n,e,t,r){return Sl(n,"child_added",e,t,r)}function Xk(n,e,t,r){return Sl(n,"child_changed",e,t,r)}function eP(n,e,t,r){return Sl(n,"child_moved",e,t,r)}function tP(n,e,t,r){return Sl(n,"child_removed",e,t,r)}function nP(n,e,t){let r=null,i=t?new Gf(t):null;e==="value"?r=new Kf(i):e&&(r=new Yf(e,i)),EE(n._repo,n,r)}m8(vr);E8(vr);var l6="FIREBASE_DATABASE_EMULATOR_HOST",bE={},u6=!1;function d6(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||as("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=BM(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[l6]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=BM(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new hM(hM.OWNER):new OI(n.name,n.options,e);G8("Invalid Firebase Database URL",o),J(o.path)||as("Database URL must point to the root of a Firebase Database (not including a child path).");let d=f6(a,n,u,new PI(n.name,t));return new TE(d,n)}function h6(n,e){let t=bE[e];(!t||t[n.key]!==n)&&as(`Database ${e}(${n.repoInfo_}) has already been deleted.`),n6(n),delete t[n.key]}function f6(n,e,t,r){let i=bE[e.name];i||(i={},bE[e.name]=i);let s=i[n.toURLString()];return s&&as("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new IE(n,u6,t,r),i[n.toURLString()]=s,s}var TE=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Q8(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vr(this._repo,ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(h6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&as("Cannot call "+e+" on a deleted database.")}};function p6(n){U3(Bo),si(new dn("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return d6(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),ur(cM,lM,n),ur(cM,lM,"esm2017")}RE.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};RE.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};p6();var hs,fs=function(n){return n.added="child_added",n.removed="child_removed",n.changed="child_changed",n.moved="child_moved",n.value="value",n}(fs||{}),m6=Object.freeze((hs={},hs[fs.added]=Zk,hs[fs.removed]=tP,hs[fs.changed]=Xk,hs[fs.moved]=eP,hs[fs.value]=Jk,hs));function rP(n,e){return new L(function(t){var r=m6[e](n,function(i,s){t.next({snapshot:i,prevKey:s,event:e})},t.error.bind(t));return{unsubscribe:function(){nP(n,e,r)}}}).pipe(Em(0))}var np=function(){return np=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},np.apply(this,arguments)};function iP(n,e){return e===void 0&&(e={}),rP(n,fs.value).pipe(x(function(t){return sP(t,e)}))}function sP(n,e){var t;e===void 0&&(e={});var r=n.snapshot.val();return!n.snapshot.exists()||typeof r!="object"?r:np(np({},r),e.keyField?(t={},t[e.keyField]=n.snapshot.key,t):null)}var oP="@firebase/database",aP="1.0.8";var Qw="";function g6(n){Qw=n}var XE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ue(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ro(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var ew=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ln(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var BP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new XE(e)}}catch{}return new ew},ms=BP("localStorage"),tw=BP("sessionStorage");var la=new ei("@firebase/database"),_6=function(){let n=1;return function(){return n++}}(),$P=function(n){let e=nN(n),t=new Ph;t.update(e);let r=t.digest();return Oh.encodeByteArray(r)},Hl=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Hl.apply(null,r):typeof r=="object"?e+=Ue(r):e+=r,e+=" "}return e},_s=null,cP=!0,v6=function(n,e){E(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(la.logLevel=fe.VERBOSE,_s=la.log.bind(la),e&&tw.set("logging_enabled",!0)):typeof n=="function"?_s=n:(_s=null,tw.remove("logging_enabled"))},rt=function(...n){if(cP===!0&&(cP=!1,_s===null&&tw.get("logging_enabled")===!0&&v6(!0)),_s){let e=Hl.apply(null,n);_s(e)}},Wl=function(n){return function(...e){rt(n,...e)}},nw=function(...n){let e="FIREBASE INTERNAL ERROR: "+Hl(...n);la.error(e)},yr=function(...n){let e=`FIREBASE FATAL ERROR: ${Hl(...n)}`;throw la.error(e),new Error(e)},_t=function(...n){let e="FIREBASE WARNING: "+Hl(...n);la.warn(e)},y6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_t("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},HP=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},I6=function(n){if(xn()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ha="[MIN_NAME]",vs="[MAX_NAME]",ya=function(n,e){if(n===e)return 0;if(n===ha||e===vs)return-1;if(e===ha||n===vs)return 1;{let t=lP(n),r=lP(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},E6=function(n,e){return n===e?0:n<e?-1:1},Al=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Ue(e))},Jw=function(n){if(typeof n!="object"||n===null)return Ue(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Ue(e[r]),t+=":",t+=Jw(n[e[r]]);return t+="}",t},WP=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function vt(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var zP=function(n){E(!HP(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},w6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},C6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function b6(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}var T6=new RegExp("^-?(0*)\\d{1,10}$"),D6=-2147483648,S6=2147483647,lP=function(n){if(T6.test(n)){let e=Number(n);if(e>=D6&&e<=S6)return e}return null},Ia=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw _t("Exception was thrown by user callback.",t),e},Math.floor(0))}},A6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pl=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var rw=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_t(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var iw=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(rt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_t(e)}},Ol=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),ip="5",GP="v",qP="s",KP="r",YP="f",QP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,JP="ls",ZP="p",sw="ac",XP="websocket",eO="long_polling";var sp=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ms.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ms.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function N6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function tO(n,e,t){E(typeof e=="string","typeof type must == string"),E(typeof t=="object","typeof params must == object");let r;if(e===XP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===eO)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);N6(n)&&(t.ns=n.namespace);let i=[];return vt(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var ow=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Ln(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return HA(this.counters_)}};var GE={},qE={};function Zw(n){let e=n.toString();return GE[e]||(GE[e]=new ow),GE[e]}function R6(n,e){let t=n.toString();return qE[t]||(qE[t]=e()),qE[t]}var aw=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ia(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var uP="start",M6="close",k6="pLPCommand",P6="pRTLPCB",nO="id",rO="pw",iO="ser",O6="cb",x6="seg",L6="ts",F6="d",V6="dframe",sO=1870,oO=30,U6=sO-oO,j6=25e3,B6=3e4,cw=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wl(e),this.stats_=Zw(t),this.urlFn=c=>(this.appCheckToken&&(c[sw]=this.appCheckToken),tO(t,eO,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new aw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(B6)),I6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lw((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===uP)this.id=a,this.password=c;else if(o===M6)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[uP]="t",r[iO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[O6]=this.scriptTagHolder.uniqueCallbackIdentifier),r[GP]=ip,this.transportSessionId&&(r[qP]=this.transportSessionId),this.lastSessionId&&(r[JP]=this.lastSessionId),this.applicationId&&(r[ZP]=this.applicationId),this.appCheckToken&&(r[sw]=this.appCheckToken),typeof location<"u"&&location.hostname&&QP.test(location.hostname)&&(r[KP]=YP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return xn()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!w6()&&!C6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Ue(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Bv(t),i=WP(r,U6);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(xn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[V6]="t",r[nO]=e,r[rO]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Ue(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},lw=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,xn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=_6(),window[k6+this.uniqueCallbackIdentifier]=e,window[P6+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){rt("frame writing exception"),a.stack&&rt(a.stack),rt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||rt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[nO]=this.myID,e[rO]=this.myPW,e[iO]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+oO+r.length<=sO;){let o=this.pendingSegs.shift();r=r+"&"+x6+i+"="+o.seg+"&"+L6+i+"="+o.ts+"&"+F6+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(j6)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){xn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{rt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var $6=16384,H6=45e3,op=null;typeof MozWebSocket<"u"?op=MozWebSocket:typeof WebSocket<"u"&&(op=WebSocket);var Nl=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wl(this.connId),this.stats_=Zw(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[GP]=ip,!xn()&&typeof location<"u"&&location.hostname&&QP.test(location.hostname)&&(a[KP]=YP),r&&(a[qP]=r),i&&(a[JP]=i),s&&(a[sw]=s),o&&(a[ZP]=o),tO(t,XP,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ms.set("previous_websocket_failure",!0);try{let i;if(xn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${ip}/${Qw}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new op(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&op!==null&&!n.forceDisallow_}static previouslyFailed(){return ms.isInMemoryStorage||ms.get("previous_websocket_failure")===!0}markConnectionHealthy(){ms.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ro(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(E(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Ue(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=WP(r,$6);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(H6))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),W6=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[cw,Nl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Nl&&Nl.isAvailable(),i=r&&!Nl.previouslyFailed();if(t.webSocketOnly&&(r||_t("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Nl];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),z6=6e4,G6=5e3,q6=10*1024,K6=100*1024,KE="t",dP="d",Y6="s",hP="r",Q6="e",fP="o",pP="a",mP="n",gP="p",J6="h",uw=class{constructor(e,t,r,i,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wl("c:"+this.id+":"),this.transportManager_=new W6(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Pl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>K6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>q6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(KE in e){let t=e[KE];t===pP?this.upgradeIfSecondaryHealthy_():t===hP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===fP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Al("t",e),r=Al("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:pP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:mP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Al("t",e),r=Al("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Al(KE,e);if(dP in e){let r=e[dP];if(t===J6){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===mP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Y6?this.onConnectionShutdown_(r):t===hP?this.onReset_(r):t===Q6?nw("Server Error: "+r):t===fP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nw("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ip!==r&&_t("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Pl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(z6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(G6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ms.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ap=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var cp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},E(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){E(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var lp=class n extends cp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!kc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return E(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var _P=32,vP=768,ge=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function le(){return new ge("")}function K(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function mi(n){return n.pieces_.length-n.pieceNum_}function we(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ge(n.pieces_,e)}function aO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Z6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function cO(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lO(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ge(e,0)}function He(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ge)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ge(t,0)}function Z(n){return n.pieceNum_>=n.pieces_.length}function gt(n,e){let t=K(n),r=K(e);if(t===null)return e;if(t===r)return gt(we(n),we(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Xw(n,e){if(mi(n)!==mi(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function _n(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(mi(n)>mi(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var dw=class{constructor(e,t){this.errorPrefix_=t,this.parts_=cO(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=xc(this.parts_[r]);uO(this)}};function X6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=xc(e),uO(n)}function e5(n){let e=n.parts_.pop();n.byteLength_-=xc(e),n.parts_.length>0&&(n.byteLength_-=1)}function uO(n){if(n.byteLength_>vP)throw new Error(n.errorPrefix_+"has a key path longer than "+vP+" bytes ("+n.byteLength_+").");if(n.parts_.length>_P)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_P+") or object contains a cycle "+ps(n))}function ps(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var hw=class n extends cp{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return E(e==="visible","Unknown event type: "+e),[this.visible_]}};var Rl=1e3,t5=60*5*1e3,yP=30*1e3,n5=1.3,r5=3e4,i5="server_kill",IP=3,eC=(()=>{class n extends ap{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Wl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Rl,this.maxReconnectDelay_=t5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!xn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hw.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&lp.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Ue(o)),E(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Zr,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),E(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),E(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Ln(t,"w")){let i=qi(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();_t(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||eN(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=yP)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=XA(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),E(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ue(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):nw("Unrecognized action received from server: "+Ue(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){E(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Rl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Rl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>r5&&(this.reconnectDelay_=Rl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*n5)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){E(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?rt("getToken() completed but was canceled"):(rt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new uw(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,m=>{_t(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(i5)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&_t(h),l())}}})}interrupt(t){rt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){rt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Pc(this.interruptReasons_)&&(this.reconnectDelay_=Rl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>Jw(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new ge(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){rt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=IP&&(this.reconnectDelay_=yP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){rt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=IP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";xn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+Qw.replace(/\./g,"-")]=1,kc()?t["framework.cordova"]=1:xh()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=lp.getInstance().currentlyOnline();return Pc(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Y=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var fa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Y(ha,e),i=new Y(ha,t);return this.compare(r,i)!==0}minPost(){return Y.MIN}};var rp,up=class extends fa{static get __EMPTY_NODE(){return rp}static set __EMPTY_NODE(e){rp=e}compare(e,t){return ya(e.name,t.name)}isDefinedOn(e){throw Gi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Y.MIN}maxPost(){return new Y(vs,rp)}makePost(e,t){return E(typeof e=="string","KeyIndex indexValue must always be a string."),new Y(e,rp)}toString(){return".key"}},ua=new up;var ca=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},gn=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??qt.EMPTY_NODE,this.right=o??qt.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return qt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return qt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),fw=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new gn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},qt=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,gn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ca(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ca(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ca(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ca(this.root_,null,this.comparator_,!0,e)}};qt.EMPTY_NODE=new fw;function s5(n,e){return ya(n.name,e.name)}function tC(n,e){return ya(n,e)}var pw;function o5(n){pw=n}var dO=function(n){return typeof n=="number"?"number:"+zP(n):"string:"+n},hO=function(n){if(n.isLeafNode()){let e=n.val();E(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ln(e,".sv"),"Priority must be a string or number.")}else E(n===pw||n.isEmpty(),"priority of unexpected type.");E(n===pw||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var EP,pa=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,E(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hO(this.priorityNode_)}static set __childrenNodeConstructor(t){EP=t}static get __childrenNodeConstructor(){return EP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Z(t)?this:K(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=K(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(E(i!==".priority"||mi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(we(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dO(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=zP(this.value_):t+=this.value_,this.lazyHash_=$P(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(E(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return E(s>=0,"Unknown leaf type: "+r),E(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),fO,pO;function a5(n){fO=n}function c5(n){pO=n}var mw=class extends fa{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?ya(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Y.MIN}maxPost(){return new Y(vs,new pa("[PRIORITY-POST]",pO))}makePost(e,t){let r=fO(e);return new Y(t,new pa("[PRIORITY-POST]",r))}toString(){return".priority"}},Pe=new mw;var l5=Math.log(2),gw=class{constructor(e){let t=s=>parseInt(Math.log(s)/l5,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},dp=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=n[c],h=t?t(d):d,new gn(h,d.node,gn.BLACK,null,null);{let f=parseInt(u/2,10)+c,m=i(c,f),v=i(f+1,l);return d=n[f],h=t?t(d):d,new gn(h,d.node,gn.BLACK,m,v)}},s=function(c){let l=null,u=null,d=n.length,h=function(m,v){let T=d-m,P=d;d-=m;let re=i(T+1,P),ie=n[T],Ce=t?t(ie):ie;f(new gn(Ce,ie.node,v,null,re))},f=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let v=c.nextBitIsOne(),T=Math.pow(2,c.count-(m+1));v?h(T,gn.BLACK):(h(T,gn.BLACK),h(T,gn.RED))}return u},o=new gw(n.length),a=s(o);return new qt(r||e,a)};var YE,aa={},ma=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return E(aa&&Pe,"ChildrenNode.ts has not been loaded"),YE=YE||new n({".priority":aa},{".priority":Pe}),YE}get(e){let t=qi(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qt?t:null}hasIndex(e){return Ln(this.indexSet_,e.toString())}addIndex(e,t){E(e!==ua,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(Y.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=dp(r,e.getCompare()):a=aa;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=Oc(this.indexes_,(i,s)=>{let o=qi(this.indexSet_,s);if(E(o,"Missing index implementation for "+s),i===aa)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(Y.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),dp(a,o.getCompare())}else return aa;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Y(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Oc(this.indexes_,i=>{if(i===aa)return i;{let s=t.get(e.name);return s?i.remove(new Y(e.name,s)):i}});return new n(r,this.indexSet_)}};var Ml,B=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&hO(this.priorityNode_),this.children_.isEmpty()&&E(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ml||(Ml=new n(new qt(tC),null,ma.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ml}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Ml:r}}getChild(t){let r=K(t);return r===null?this:this.getImmediateChild(r).getChild(we(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(E(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Y(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Ml:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=K(t);if(i===null)return r;{E(K(t)!==".priority"||mi(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(we(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Pe,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+dO(this.getPriority().val())+":"),this.forEachChild(Pe,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":$P(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Y(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Y(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Y(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Y.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Y.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zl?-1:0}withIndex(t){if(t===ua||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ua||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Pe),s=r.getIterator(Pe),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===ua?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),_w=class extends B{constructor(){super(new qt(tC),B.EMPTY_NODE,ma.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return B.EMPTY_NODE}isEmpty(){return!1}},zl=new _w;Object.defineProperties(Y,{MIN:{value:new Y(ha,B.EMPTY_NODE)},MAX:{value:new Y(vs,zl)}});up.__EMPTY_NODE=B.EMPTY_NODE;pa.__childrenNodeConstructor=B;o5(zl);c5(zl);var u5=!0;function Je(n,e=null){if(n===null)return B.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),E(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new pa(t,Je(e))}if(!(n instanceof Array)&&u5){let t=[],r=!1;if(vt(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=Je(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Y(o,c)))}}),t.length===0)return B.EMPTY_NODE;let s=dp(t,s5,o=>o.name,tC);if(r){let o=dp(t,Pe.getCompare());return new B(s,Je(e),new ma({".priority":o},{".priority":Pe}))}else return new B(s,Je(e),ma.Default)}else{let t=B.EMPTY_NODE;return vt(n,(r,i)=>{if(Ln(n,r)&&r.substring(0,1)!=="."){let s=Je(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Je(e))}}a5(Je);var vw=class extends fa{constructor(e){super(),this.indexPath_=e,E(!Z(e)&&K(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?ya(e.name,t.name):s}makePost(e,t){let r=Je(e),i=B.EMPTY_NODE.updateChild(this.indexPath_,r);return new Y(t,i)}maxPost(){let e=B.EMPTY_NODE.updateChild(this.indexPath_,zl);return new Y(vs,e)}toString(){return cO(this.indexPath_,0).join("/")}};var yw=class extends fa{compare(e,t){let r=e.node.compareTo(t.node);return r===0?ya(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Y.MIN}maxPost(){return Y.MAX}makePost(e,t){let r=Je(e);return new Y(t,r)}toString(){return".value"}},d5=new yw;function mO(n){return{type:"value",snapshotNode:n}}function ga(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Vl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ul(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function h5(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var jl=class{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){E(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(Vl(t,a)):E(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ga(t,r)):o.trackChildChange(Ul(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Pe,(i,s)=>{t.hasChild(i)||r.trackChildChange(Vl(i,s))}),t.isLeafNode()||t.forEachChild(Pe,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Ul(i,s,o))}else r.trackChildChange(ga(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?B.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var hp=class n{constructor(e){this.indexedFilter_=new jl(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Y(t,r))||(r=B.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=B.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(B.EMPTY_NODE);let s=this;return t.forEachChild(Pe,(o,a)=>{s.matches(new Y(o,a))||(i=i.updateImmediateChild(o,B.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var Iw=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{let r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Y(t,r))||(r=B.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=B.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){i=B.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=t.withIndex(this.index_),i=i.updatePriority(B.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,B.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;E(a.numChildren()===this.limit_,"");let c=new Y(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===t||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return s?.trackChildChange(Ul(t,r,d)),a.updateImmediateChild(t,r);{s?.trackChildChange(Vl(t,d));let v=a.updateImmediateChild(t,B.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(ga(h.name,h.node)),v.updateImmediateChild(h.name,h.node)):v}}else return r.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Vl(l.name,l.node)),s.trackChildChange(ga(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,B.EMPTY_NODE)):e}};var Ew=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return E(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return E(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ha}hasEnd(){return this.endSet_}getIndexEndValue(){return E(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return E(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return E(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pe}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function f5(n){return n.loadsAllData()?new jl(n.getIndex()):n.hasLimit()?new Iw(n):new hp(n)}function wP(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Pe?t="$priority":n.index_===d5?t="$value":n.index_===ua?t="$key":(E(n.index_ instanceof vw,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Ue(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Ue(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Ue(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Ue(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Ue(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function CP(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Pe&&(e.i=n.index_.toString()),e}var ww=class n extends ap{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Wl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(E(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=wP(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,r),qi(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=wP(e._queryParams),r=e._path.toString(),i=new Zr;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xr(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ro(a.responseText)}catch{_t("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&_t("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Cw=class{constructor(){this.rootNode_=B.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function fp(){return{value:null,children:new Map}}function gO(n,e,t){if(Z(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=K(e);n.children.has(r)||n.children.set(r,fp());let i=n.children.get(r);e=we(e),gO(i,e,t)}}function bw(n,e,t){n.value!==null?t(e,n.value):p5(n,(r,i)=>{let s=new ge(e.toString()+"/"+r);bw(i,s,t)})}function p5(n,e){n.children.forEach((t,r)=>{e(r,t)})}var Tw=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&vt(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var bP=10*1e3,m5=30*1e3,g5=5*60*1e3,Dw=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Tw(e);let r=bP+(m5-bP)*Math.random();Pl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;vt(e,(i,s)=>{s>0&&Ln(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Pl(this.reportStats_.bind(this),Math.floor(Math.random()*2*g5))}};var Hn=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Hn||{});function _O(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function nC(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rC(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Sw=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Hn.ACK_USER_WRITE,this.source=_O()}operationForChild(e){if(Z(this.path)){if(this.affectedTree.value!=null)return E(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ge(e));return new n(le(),t,this.revert)}}else return E(K(this.path)===e,"operationForChild called for unrelated child."),new n(we(this.path),this.affectedTree,this.revert)}};var pp=class n{constructor(e,t){this.source=e,this.path=t,this.type=Hn.LISTEN_COMPLETE}operationForChild(e){return Z(this.path)?new n(this.source,le()):new n(this.source,we(this.path))}};var _a=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Hn.OVERWRITE}operationForChild(e){return Z(this.path)?new n(this.source,le(),this.snap.getImmediateChild(e)):new n(this.source,we(this.path),this.snap)}};var mp=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Hn.MERGE}operationForChild(e){if(Z(this.path)){let t=this.children.subtree(new ge(e));return t.isEmpty()?null:t.value?new _a(this.source,le(),t.value):new n(this.source,le(),t)}else return E(K(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,we(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ir=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Z(e))return this.isFullyInitialized()&&!this.filtered_;let t=K(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Aw=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function _5(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(h5(o.childName,o.snapshotNode))}),kl(n,i,"child_removed",e,r,t),kl(n,i,"child_added",e,r,t),kl(n,i,"child_moved",s,r,t),kl(n,i,"child_changed",e,r,t),kl(n,i,"value",e,r,t),i}function kl(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>y5(n,a,c)),o.forEach(a=>{let c=v5(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function v5(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function y5(n,e,t){if(e.childName==null||t.childName==null)throw Gi("Should only compare child_ events.");let r=new Y(e.childName,e.snapshotNode),i=new Y(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Dp(n,e){return{eventCache:n,serverCache:e}}function xl(n,e,t,r){return Dp(new Ir(e,t,r),n.serverCache)}function vO(n,e,t,r){return Dp(n.eventCache,new Ir(e,t,r))}function Nw(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ys(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var QE,I5=()=>(QE||(QE=new qt(E6)),QE),yt=class n{constructor(e,t=I5()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return vt(e,(r,i)=>{t=t.set(new ge(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:le(),value:this.value};if(Z(e))return null;{let r=K(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(we(e),t);return s!=null?{path:He(new ge(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Z(e))return this;{let t=K(e),r=this.children.get(t);return r!==null?r.subtree(we(e)):new n(null)}}set(e,t){if(Z(e))return new n(t,this.children);{let r=K(e),s=(this.children.get(r)||new n(null)).set(we(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(Z(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=K(e),r=this.children.get(t);if(r){let i=r.remove(we(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(Z(e))return this.value;{let t=K(e),r=this.children.get(t);return r?r.get(we(e)):null}}setTree(e,t){if(Z(e))return t;{let r=K(e),s=(this.children.get(r)||new n(null)).setTree(we(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(le(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(He(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,le(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Z(e))return null;{let s=K(e),o=this.children.get(s);return o?o.findOnPath_(we(e),He(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,le(),t)}foreachOnPath_(e,t,r){if(Z(e))return this;{this.value&&r(t,this.value);let i=K(e),s=this.children.get(i);return s?s.foreachOnPath_(we(e),He(t,i),r):new n(null)}}foreach(e){this.foreach_(le(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(He(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var vn=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new yt(null))}};function Ll(n,e,t){if(Z(e))return new vn(new yt(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=gt(i,e);return s=s.updateChild(o,t),new vn(n.writeTree_.set(i,s))}else{let i=new yt(t),s=n.writeTree_.setTree(e,i);return new vn(s)}}}function TP(n,e,t){let r=n;return vt(t,(i,s)=>{r=Ll(r,He(e,i),s)}),r}function DP(n,e){if(Z(e))return vn.empty();{let t=n.writeTree_.setTree(e,new yt(null));return new vn(t)}}function Rw(n,e){return Is(n,e)!=null}function Is(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(gt(t.path,e)):null}function SP(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Pe,(r,i)=>{e.push(new Y(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Y(r,i.value))}),e}function pi(n,e){if(Z(e))return n;{let t=Is(n,e);return t!=null?new vn(new yt(t)):new vn(n.writeTree_.subtree(e))}}function Mw(n){return n.writeTree_.isEmpty()}function va(n,e){return yO(le(),n.writeTree_,e)}function yO(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(E(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=yO(He(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(He(n,".priority"),r)),t}}function iC(n,e){return CO(e,n)}function E5(n,e,t,r,i){E(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ll(n.visibleWrites,e,t)),n.lastWriteId=r}function w5(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function C5(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);E(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&b5(a,r.path)?i=!1:_n(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return T5(n),!0;if(r.snap)n.visibleWrites=DP(n.visibleWrites,r.path);else{let a=r.children;vt(a,c=>{n.visibleWrites=DP(n.visibleWrites,He(r.path,c))})}return!0}else return!1}function b5(n,e){if(n.snap)return _n(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&_n(He(n.path,t),e))return!0;return!1}function T5(n){n.visibleWrites=IO(n.allWrites,D5,le()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function D5(n){return n.visible}function IO(n,e,t){let r=vn.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)_n(t,o)?(a=gt(t,o),r=Ll(r,a,s.snap)):_n(o,t)&&(a=gt(o,t),r=Ll(r,le(),s.snap.getChild(a)));else if(s.children){if(_n(t,o))a=gt(t,o),r=TP(r,a,s.children);else if(_n(o,t))if(a=gt(o,t),Z(a))r=TP(r,le(),s.children);else{let c=qi(s.children,K(a));if(c){let l=c.getChild(we(a));r=Ll(r,le(),l)}}}else throw Gi("WriteRecord should have .snap or .children")}}return r}function EO(n,e,t,r,i){if(!r&&!i){let s=Is(n.visibleWrites,e);if(s!=null)return s;{let o=pi(n.visibleWrites,e);if(Mw(o))return t;if(t==null&&!Rw(o,le()))return null;{let a=t||B.EMPTY_NODE;return va(o,a)}}}else{let s=pi(n.visibleWrites,e);if(!i&&Mw(s))return t;if(!i&&t==null&&!Rw(s,le()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(_n(l.path,e)||_n(e,l.path))},a=IO(n.allWrites,o,e),c=t||B.EMPTY_NODE;return va(a,c)}}}function S5(n,e,t){let r=B.EMPTY_NODE,i=Is(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Pe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=pi(n.visibleWrites,e);return t.forEachChild(Pe,(o,a)=>{let c=va(pi(s,new ge(o)),a);r=r.updateImmediateChild(o,c)}),SP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=pi(n.visibleWrites,e);return SP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function A5(n,e,t,r,i){E(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=He(e,t);if(Rw(n.visibleWrites,s))return null;{let o=pi(n.visibleWrites,s);return Mw(o)?i.getChild(t):va(o,i.getChild(t))}}function N5(n,e,t,r){let i=He(e,t),s=Is(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=pi(n.visibleWrites,i);return va(o,r.getNode().getImmediateChild(t))}else return null}function R5(n,e){return Is(n.visibleWrites,e)}function M5(n,e,t,r,i,s,o){let a,c=pi(n.visibleWrites,e),l=Is(c,le());if(l!=null)a=l;else if(t!=null)a=va(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function k5(){return{visibleWrites:vn.empty(),allWrites:[],lastWriteId:-1}}function gp(n,e,t,r){return EO(n.writeTree,n.treePath,e,t,r)}function sC(n,e){return S5(n.writeTree,n.treePath,e)}function AP(n,e,t,r){return A5(n.writeTree,n.treePath,e,t,r)}function _p(n,e){return R5(n.writeTree,He(n.treePath,e))}function P5(n,e,t,r,i,s){return M5(n.writeTree,n.treePath,e,t,r,i,s)}function oC(n,e,t){return N5(n.writeTree,n.treePath,e,t)}function wO(n,e){return CO(He(n.treePath,e),n.writeTree)}function CO(n,e){return{treePath:n,writeTree:e}}var kw=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;E(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),E(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,Ul(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,Vl(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,ga(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,Ul(r,e.snapshotNode,i.oldSnap));else throw Gi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Pw=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},bO=new Pw,Bl=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Ir(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oC(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ys(this.viewCache_),s=P5(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function O5(n){return{filter:n}}function x5(n,e){E(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),E(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function L5(n,e,t,r,i){let s=new kw,o,a;if(t.type===Hn.OVERWRITE){let l=t;l.source.fromUser?o=Ow(n,e,l.path,l.snap,r,i,s):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Z(l.path),o=vp(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Hn.MERGE){let l=t;l.source.fromUser?o=V5(n,e,l.path,l.children,r,i,s):(E(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=xw(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Hn.ACK_USER_WRITE){let l=t;l.revert?o=B5(n,e,l.path,r,i,s):o=U5(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===Hn.LISTEN_COMPLETE)o=j5(n,e,t.path,r,s);else throw Gi("Unknown operation type: "+t.type);let c=s.getChanges();return F5(e,o,c),{viewCache:o,changes:c}}function F5(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Nw(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(mO(Nw(e)))}}function TO(n,e,t,r,i,s){let o=e.eventCache;if(_p(r,t)!=null)return e;{let a,c;if(Z(t))if(E(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=ys(e),u=l instanceof B?l:B.EMPTY_NODE,d=sC(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=gp(r,ys(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=K(t);if(l===".priority"){E(mi(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=AP(r,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=we(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=AP(r,t,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=oC(r,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,i,s):a=o.getNode()}}return xl(e,a,o.isFullyInitialized()||Z(t),n.filter.filtersNodes())}}function vp(n,e,t,r,i,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(Z(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=K(t);if(!c.isCompleteForPath(t)&&mi(t)>1)return e;let m=we(t),T=c.getNode().getImmediateChild(f).updateChild(m,r);f===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),f,T,m,bO,null)}let d=vO(e,l,c.isFullyInitialized()||Z(t),u.filtersNodes()),h=new Bl(i,d,s);return TO(n,d,t,i,h,a)}function Ow(n,e,t,r,i,s,o){let a=e.eventCache,c,l,u=new Bl(i,e,s);if(Z(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=xl(e,l,!0,n.filter.filtersNodes());else{let d=K(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=xl(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=we(t),f=a.getNode().getImmediateChild(d),m;if(Z(h))m=r;else{let v=u.getCompleteChild(d);v!=null?aO(h)===".priority"&&v.getChild(lO(h)).isEmpty()?m=v:m=v.updateChild(h,r):m=B.EMPTY_NODE}if(f.equals(m))c=e;else{let v=n.filter.updateChild(a.getNode(),d,m,h,u,o);c=xl(e,v,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function NP(n,e){return n.eventCache.isCompleteForChild(e)}function V5(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let u=He(t,c);NP(e,K(u))&&(a=Ow(n,a,u,l,i,s,o))}),r.foreach((c,l)=>{let u=He(t,c);NP(e,K(u))||(a=Ow(n,a,u,l,i,s,o))}),a}function RP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function xw(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Z(t)?l=r:l=new yt(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),m=RP(n,f,h);c=vp(n,c,new ge(d),m,i,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let m=e.serverCache.getNode().getImmediateChild(d),v=RP(n,m,h);c=vp(n,c,new ge(d),v,i,s,o,a)}}),c}function U5(n,e,t,r,i,s,o){if(_p(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Z(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return vp(n,e,t,c.getNode().getChild(t),i,s,a,o);if(Z(t)){let l=new yt(null);return c.getNode().forEachChild(ua,(u,d)=>{l=l.set(new ge(u),d)}),xw(n,e,t,l,i,s,a,o)}else return e}else{let l=new yt(null);return r.foreach((u,d)=>{let h=He(t,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),xw(n,e,t,l,i,s,a,o)}}function j5(n,e,t,r,i){let s=e.serverCache,o=vO(e,s.getNode(),s.isFullyInitialized()||Z(t),s.isFiltered());return TO(n,o,t,r,bO,i)}function B5(n,e,t,r,i,s){let o;if(_p(r,t)!=null)return e;{let a=new Bl(r,e,i),c=e.eventCache.getNode(),l;if(Z(t)||K(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=gp(r,ys(e));else{let d=e.serverCache.getNode();E(d instanceof B,"serverChildren would be complete if leaf node"),u=sC(r,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=K(t),d=oC(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,we(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,B.EMPTY_NODE,we(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=gp(r,ys(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||_p(r,le())!=null,xl(e,l,o,n.filter.filtersNodes())}}var Lw=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new jl(r.getIndex()),s=f5(r);this.processor_=O5(s);let o=t.serverCache,a=t.eventCache,c=i.updateFullNode(B.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(B.EMPTY_NODE,a.getNode(),null),u=new Ir(c,o.isFullyInitialized(),i.filtersNodes()),d=new Ir(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Dp(d,u),this.eventGenerator_=new Aw(this.query_)}get query(){return this.query_}};function $5(n){return n.viewCache_.serverCache.getNode()}function H5(n,e){let t=ys(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Z(e)&&!t.getImmediateChild(K(e)).isEmpty())?t.getChild(e):null}function MP(n){return n.eventRegistrations_.length===0}function W5(n,e){n.eventRegistrations_.push(e)}function kP(n,e,t){let r=[];if(t){E(e==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function PP(n,e,t,r){e.type===Hn.MERGE&&e.source.queryId!==null&&(E(ys(n.viewCache_),"We should always have a full cache before handling merges"),E(Nw(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=L5(n.processor_,i,e,t,r);return x5(n.processor_,s.viewCache),E(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,DO(n,s.changes,s.viewCache.eventCache.getNode(),null)}function z5(n,e){let t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Pe,(s,o)=>{r.push(ga(s,o))}),t.isFullyInitialized()&&r.push(mO(t.getNode())),DO(n,r,t.getNode(),e)}function DO(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return _5(n.eventGenerator_,e,t,i)}var yp,Fw=class{constructor(){this.views=new Map}};function G5(n){E(!yp,"__referenceConstructor has already been defined"),yp=n}function q5(){return E(yp,"Reference.ts has not been loaded"),yp}function K5(n){return n.views.size===0}function aC(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return E(s!=null,"SyncTree gave us an op for an invalid query."),PP(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(PP(o,e,t,r));return s}}function Y5(n,e,t,r,i){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=gp(t,i?r:null),c=!1;a?c=!0:r instanceof B?(a=sC(t,r),c=!1):(a=B.EMPTY_NODE,c=!1);let l=Dp(new Ir(a,c,!1),new Ir(r,i,!1));return new Lw(e,l)}return o}function Q5(n,e,t,r,i,s){let o=Y5(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),W5(o,t),z5(o,t)}function J5(n,e,t,r){let i=e._queryIdentifier,s=[],o=[],a=gi(n);if(i==="default")for(let[c,l]of n.views.entries())o=o.concat(kP(l,t,r)),MP(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(i);c&&(o=o.concat(kP(c,t,r)),MP(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!gi(n)&&s.push(new(q5())(e._repo,e._path)),{removed:s,events:o}}function SO(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function da(n,e){let t=null;for(let r of n.views.values())t=t||H5(r,e);return t}function AO(n,e){if(e._queryParams.loadsAllData())return Sp(n);{let r=e._queryIdentifier;return n.views.get(r)}}function NO(n,e){return AO(n,e)!=null}function gi(n){return Sp(n)!=null}function Sp(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Ip;function Z5(n){E(!Ip,"__referenceConstructor has already been defined"),Ip=n}function X5(){return E(Ip,"Reference.ts has not been loaded"),Ip}var eK=1,Ep=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yt(null),this.pendingWriteTree_=k5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function RO(n,e,t,r,i){return E5(n.pendingWriteTree_,e,t,r,i),i?Gl(n,new _a(_O(),e,t)):[]}function gs(n,e,t=!1){let r=w5(n.pendingWriteTree_,e);if(C5(n.pendingWriteTree_,e)){let s=new yt(null);return r.snap!=null?s=s.set(le(),!0):vt(r.children,o=>{s=s.set(new ge(o),!0)}),Gl(n,new Sw(r.path,s,t))}else return[]}function Ap(n,e,t){return Gl(n,new _a(nC(),e,t))}function tK(n,e,t){let r=yt.fromObject(t);return Gl(n,new mp(nC(),e,r))}function nK(n,e){return Gl(n,new pp(nC(),e))}function rK(n,e,t){let r=lC(n,t);if(r){let i=uC(r),s=i.path,o=i.queryId,a=gt(s,e),c=new pp(rC(o),a);return dC(n,s,c)}else return[]}function Vw(n,e,t,r,i=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||NO(o,e))){let c=J5(o,e,t,r);K5(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(h,f)=>gi(f));if(u&&!d){let h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=oK(h);for(let m=0;m<f.length;++m){let v=f[m],T=v.query,P=PO(n,v);n.listenProvider_.startListening(Fl(T),wp(n,T),P.hashFn,P.onComplete)}}}!d&&l.length>0&&!r&&(u?n.listenProvider_.stopListening(Fl(e),null):l.forEach(h=>{let f=n.queryToTagMap.get(Np(h));n.listenProvider_.stopListening(Fl(h),f)}))}aK(n,l)}return a}function iK(n,e,t,r){let i=lC(n,r);if(i!=null){let s=uC(i),o=s.path,a=s.queryId,c=gt(o,e),l=new _a(rC(a),c,t);return dC(n,o,l)}else return[]}function sK(n,e,t,r){let i=lC(n,r);if(i){let s=uC(i),o=s.path,a=s.queryId,c=gt(o,e),l=yt.fromObject(t),u=new mp(rC(a),c,l);return dC(n,o,u)}else return[]}function OP(n,e,t,r=!1){let i=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(h,f)=>{let m=gt(h,i);s=s||da(f,m),o=o||gi(f)});let a=n.syncPointTree_.get(i);a?(o=o||gi(a),s=s||da(a,le())):(a=new Fw,n.syncPointTree_=n.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=B.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((f,m)=>{let v=da(m,le());v&&(s=s.updateImmediateChild(f,v))}));let l=NO(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Np(e);E(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=cK();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let u=iC(n.pendingWriteTree_,i),d=Q5(a,e,t,u,s,c);if(!l&&!o&&!r){let h=AO(a,e);d=d.concat(lK(n,e,h))}return d}function cC(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=gt(o,e),l=da(a,c);if(l)return l});return EO(i,e,s,t,!0)}function Gl(n,e){return MO(e,n.syncPointTree_,null,iC(n.pendingWriteTree_,le()))}function MO(n,e,t,r){if(Z(n.path))return kO(n,e,t,r);{let i=e.get(le());t==null&&i!=null&&(t=da(i,le()));let s=[],o=K(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=wO(r,o);s=s.concat(MO(a,c,l,u))}return i&&(s=s.concat(aC(i,n,r,t))),s}}function kO(n,e,t,r){let i=e.get(le());t==null&&i!=null&&(t=da(i,le()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=wO(r,o),u=n.operationForChild(o);u&&(s=s.concat(kO(u,a,c,l)))}),i&&(s=s.concat(aC(i,n,r,t))),s}function PO(n,e){let t=e.query,r=wp(n,t);return{hashFn:()=>($5(e)||B.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?rK(n,t._path,r):nK(n,t._path);{let s=b6(i,t);return Vw(n,t,null,s)}}}}function wp(n,e){let t=Np(e);return n.queryToTagMap.get(t)}function Np(n){return n._path.toString()+"$"+n._queryIdentifier}function lC(n,e){return n.tagToQueryMap.get(e)}function uC(n){let e=n.indexOf("$");return E(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ge(n.substr(0,e))}}function dC(n,e,t){let r=n.syncPointTree_.get(e);E(r,"Missing sync point for query tag that we're tracking");let i=iC(n.pendingWriteTree_,e);return aC(r,t,i,null)}function oK(n){return n.fold((e,t,r)=>{if(t&&gi(t))return[Sp(t)];{let i=[];return t&&(i=SO(t)),vt(r,(s,o)=>{i=i.concat(o)}),i}})}function Fl(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(X5())(n._repo,n._path):n}function aK(n,e){for(let t=0;t<e.length;++t){let r=e[t];if(!r._queryParams.loadsAllData()){let i=Np(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}function cK(){return eK++}function lK(n,e,t){let r=e._path,i=wp(n,e),s=PO(n,t),o=n.listenProvider_.startListening(Fl(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)E(!gi(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!Z(l)&&u&&gi(u))return[Sp(u).query];{let h=[];return u&&(h=h.concat(SO(u).map(f=>f.query))),vt(d,(f,m)=>{h=h.concat(m)}),h}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(Fl(u),wp(n,u))}}return o}var Uw=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},jw=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=He(this.path_,e);return new n(this.syncTree_,t)}node(){return cC(this.syncTree_,this.path_)}},uK=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},xP=function(n,e,t){if(!n||typeof n!="object")return n;if(E(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return dK(n[".sv"],e,t);if(typeof n[".sv"]=="object")return hK(n[".sv"],e);E(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},dK=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:E(!1,"Unexpected server value: "+n)}},hK=function(n,e,t){n.hasOwnProperty("increment")||E(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&E(!1,"Unexpected increment value: "+r);let i=e.node();if(E(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},fK=function(n,e,t,r){return hC(e,new jw(t,n),r)},OO=function(n,e,t){return hC(n,new Uw(e),t)};function hC(n,e,t){let r=n.getPriority().val(),i=xP(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=xP(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new pa(a,Je(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new pa(i))),o.forEachChild(Pe,(a,c)=>{let l=hC(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var $l=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function fC(n,e){let t=e instanceof ge?e:new ge(e),r=n,i=K(t);for(;i!==null;){let s=qi(r.node.children,i)||{children:{},childCount:0};r=new $l(i,r,s),t=we(t),i=K(t)}return r}function Ea(n){return n.node.value}function xO(n,e){n.node.value=e,Bw(n)}function LO(n){return n.node.childCount>0}function pK(n){return Ea(n)===void 0&&!LO(n)}function Rp(n,e){vt(n.node.children,(t,r)=>{e(new $l(t,n,r))})}function FO(n,e,t,r){t&&!r&&e(n),Rp(n,i=>{FO(i,e,!0,r)}),t&&r&&e(n)}function mK(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ql(n){return new ge(n.parent===null?n.name:ql(n.parent)+"/"+n.name)}function Bw(n){n.parent!==null&&gK(n.parent,n.name,n)}function gK(n,e,t){let r=pK(t),i=Ln(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Bw(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Bw(n))}var _K=/[\[\].#$\/\u0000-\u001F\u007F]/,vK=/[\[\].#$\u0000-\u001F\u007F]/,JE=10*1024*1024,VO=function(n){return typeof n=="string"&&n.length!==0&&!_K.test(n)},UO=function(n){return typeof n=="string"&&n.length!==0&&!vK.test(n)},yK=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),UO(n)};var jO=function(n,e,t,r){r&&e===void 0||pC(Lh(n,"value"),e,t)},pC=function(n,e,t){let r=t instanceof ge?new dw(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ps(r));if(typeof e=="function")throw new Error(n+"contains a function "+ps(r)+" with contents = "+e.toString());if(HP(e))throw new Error(n+"contains "+e.toString()+" "+ps(r));if(typeof e=="string"&&e.length>JE/3&&xc(e)>JE)throw new Error(n+"contains a string greater than "+JE+" utf8 bytes "+ps(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(vt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!VO(o)))throw new Error(n+" contains an invalid key ("+o+") "+ps(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);X6(r,o),pC(n,a,r),e5(r)}),i&&s)throw new Error(n+' contains ".value" child '+ps(r)+" in addition to actual children.")}};var BO=function(n,e,t,r){if(!(r&&t===void 0)&&!UO(t))throw new Error(Lh(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},IK=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),BO(n,e,t,r)},mC=function(n,e){if(K(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},EK=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!VO(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!yK(t))throw new Error(Lh(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var $w=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function gC(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!Xw(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function $O(n,e,t){gC(n,t),HO(n,r=>Xw(r,e))}function Er(n,e,t){gC(n,t),HO(n,r=>_n(r,e)||_n(e,r))}function HO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(wK(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function wK(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();_s&&rt("event: "+t.toString()),Ia(r)}}}var CK="repo_interrupt",bK=25,Hw=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $w,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=fp(),this.transactionQueueTree_=new $l,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function TK(n,e,t){if(n.stats_=Zw(n.repoInfo_),n.forceRestClient_||A6())n.server_=new ww(n.repoInfo_,(r,i,s,o)=>{LP(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>FP(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ue(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new eC(n.repoInfo_,e,(r,i,s,o)=>{LP(n,r,i,s,o)},r=>{FP(n,r)},r=>{DK(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=R6(n.repoInfo_,()=>new Dw(n.stats_,n.server_)),n.infoData_=new Cw,n.infoSyncTree_=new Ep({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Ap(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),vC(n,"connected",!1),n.serverSyncTree_=new Ep({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Er(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function WO(n){let t=n.infoData_.getNode(new ge(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function _C(n){return uK({timestamp:WO(n)})}function LP(n,e,t,r,i){n.dataUpdateCount++;let s=new ge(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=Oc(t,l=>Je(l));o=sK(n.serverSyncTree_,s,c,i)}else{let c=Je(t);o=iK(n.serverSyncTree_,s,c,i)}else if(r){let c=Oc(t,l=>Je(l));o=tK(n.serverSyncTree_,s,c)}else{let c=Je(t);o=Ap(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Mp(n,s)),Er(n.eventQueue_,a,o)}function FP(n,e){vC(n,"connected",e),e===!1&&AK(n)}function DK(n,e){vt(e,(t,r)=>{vC(n,t,r)})}function vC(n,e,t){let r=new ge("/.info/"+e),i=Je(t);n.infoData_.updateSnapshot(r,i);let s=Ap(n.infoSyncTree_,r,i);Er(n.eventQueue_,r,s)}function zO(n){return n.nextWriteId_++}function SK(n,e,t,r,i){yC(n,"set",{path:e.toString(),value:t,priority:r});let s=_C(n),o=Je(t,r),a=cC(n.serverSyncTree_,e),c=OO(o,a,s),l=zO(n),u=RO(n.serverSyncTree_,e,c,l,!0);gC(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{let m=h==="ok";m||_t("set at "+e+" failed: "+h);let v=gs(n.serverSyncTree_,l,!m);Er(n.eventQueue_,e,v),MK(n,i,h,f)});let d=QO(n,e);Mp(n,d),Er(n.eventQueue_,d,[])}function AK(n){yC(n,"onDisconnectEvents");let e=_C(n),t=fp();bw(n.onDisconnect_,le(),(i,s)=>{let o=fK(i,s,n.serverSyncTree_,e);gO(t,i,o)});let r=[];bw(t,le(),(i,s)=>{r=r.concat(Ap(n.serverSyncTree_,i,s));let o=QO(n,i);Mp(n,o)}),n.onDisconnect_=fp(),Er(n.eventQueue_,le(),r)}function NK(n,e,t){let r;K(e._path)===".info"?r=OP(n.infoSyncTree_,e,t):r=OP(n.serverSyncTree_,e,t),$O(n.eventQueue_,e._path,r)}function VP(n,e,t){let r;K(e._path)===".info"?r=Vw(n.infoSyncTree_,e,t):r=Vw(n.serverSyncTree_,e,t),$O(n.eventQueue_,e._path,r)}function RK(n){n.persistentConnection_&&n.persistentConnection_.interrupt(CK)}function yC(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),rt(t,...e)}function MK(n,e,t,r){e&&Ia(()=>{if(t==="ok")e(null);else{let i=(t||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function GO(n,e,t){return cC(n.serverSyncTree_,e,t)||B.EMPTY_NODE}function IC(n,e=n.transactionQueueTree_){if(e||kp(n,e),Ea(e)){let t=KO(n,e);E(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&kK(n,ql(e),t)}else LO(e)&&Rp(e,t=>{IC(n,t)})}function kK(n,e,t){let r=t.map(l=>l.currentWriteId),i=GO(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let u=t[l];E(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=gt(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{yC(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(gs(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();kp(n,fC(n.transactionQueueTree_,e)),IC(n,n.transactionQueueTree_),Er(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)Ia(d[h])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{_t("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}Mp(n,e)}},o)}function Mp(n,e){let t=qO(n,e),r=ql(t),i=KO(n,t);return PK(n,i,r),r}function PK(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=gt(t,c.path),u=!1,d;if(E(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(gs(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=bK)u=!0,d="maxretry",i=i.concat(gs(n.serverSyncTree_,c.currentWriteId,!0));else{let h=GO(n,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){pC("transaction failed: Data returned ",f,c.path);let m=Je(f);typeof f=="object"&&f!=null&&Ln(f,".priority")||(m=m.updatePriority(h.getPriority()));let T=c.currentWriteId,P=_C(n),re=OO(m,h,P);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=re,c.currentWriteId=zO(n),o.splice(o.indexOf(T),1),i=i.concat(RO(n.serverSyncTree_,c.path,re,c.currentWriteId,c.applyLocally)),i=i.concat(gs(n.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(gs(n.serverSyncTree_,c.currentWriteId,!0))}Er(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}kp(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Ia(r[a]);IC(n,n.transactionQueueTree_)}function qO(n,e){let t,r=n.transactionQueueTree_;for(t=K(e);t!==null&&Ea(r)===void 0;)r=fC(r,t),e=we(e),t=K(e);return r}function KO(n,e){let t=[];return YO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function YO(n,e,t){let r=Ea(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Rp(e,i=>{YO(n,i,t)})}function kp(n,e){let t=Ea(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,xO(e,t.length>0?t:void 0)}Rp(e,r=>{kp(n,r)})}function QO(n,e){let t=ql(qO(n,e)),r=fC(n.transactionQueueTree_,e);return mK(r,i=>{ZE(n,i)}),ZE(n,r),FO(r,i=>{ZE(n,i)}),t}function ZE(n,e){let t=Ea(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(E(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(E(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(gs(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?xO(e,void 0):t.length=s+1,Er(n.eventQueue_,ql(e),i);for(let o=0;o<r.length;o++)Ia(r[o])}}function OK(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function xK(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_t(`Invalid query segment '${t}' in query '${n}'`)}return e}var UP=function(n,e){let t=LK(n),r=t.namespace;t.domain==="firebase.com"&&yr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&yr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||y6();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new sp(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new ge(t.pathString)}},LK=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(i=OK(n.substring(u,d)));let h=xK(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")t="localhost";else if(f.split(".").length<=2)t=f;else{let m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),t=e.substring(m+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var jP="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",FK=function(){let n=0,e=[];return function(t){let r=t===n;n=t;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=jP.charAt(t%64),t=Math.floor(t/64);E(t===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=jP.charAt(e[i]);return E(o.length===20,"nextPushId: Length should be 20."),o}}();var Cp=class{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ue(this.snapshot.exportVal())}},bp=class{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Ww=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return E(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var zw=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Z(this._path)?null:aO(this._path)}get ref(){return new wr(this._repo,this._path)}get _queryIdentifier(){let e=CP(this._queryParams),t=Jw(e);return t==="{}"?"default":t}get _queryObject(){return CP(this._queryParams)}isEqual(e){if(e=Qe(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=Xw(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Z6(this._path)}};var wr=class n extends zw{constructor(e,t){super(e,t,new Ew,!1)}get parent(){let e=lO(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Tp=class n{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new ge(e),r=_i(this.ref,e);return new n(this._node.getChild(t),r,Pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new n(i,_i(this.ref,r),Pe)))}hasChild(e){let t=new ge(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function JO(n,e){return n=Qe(n),n._checkNotDeleted("ref"),e!==void 0?_i(n._root,e):n._root}function _i(n,e){return n=Qe(n),K(n._path)===null?IK("child","path",e,!1):BO("child","path",e,!1),new wr(n._repo,He(n._path,e))}function ZO(n,e){n=Qe(n),mC("push",n._path),jO("push",e,n._path,!0);let t=WO(n._repo),r=FK(t),i=_i(n,r),s=_i(n,r),o;return e!=null?o=Pp(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function XO(n){return mC("remove",n._path),Pp(n,null)}function Pp(n,e){n=Qe(n),mC("set",n._path),jO("set",e,n._path,!1);let t=new Zr;return SK(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}var Gw=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let r=t._queryParams.getIndex();return new Cp("value",this,new Tp(e.snapshotNode,new wr(t._repo,t._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bp(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},qw=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bp(this,e,t):null}createEvent(e,t){E(e.childName!=null,"Child events should have a childName.");let r=_i(new wr(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Cp(e.type,this,new Tp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function VK(n,e,t,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=t,l=(u,d)=>{VP(n._repo,n,a),c(u,d)};l.userCallback=t.userCallback,l.context=t.context,t=l}let o=new Ww(t,s||void 0),a=e==="value"?new Gw(o):new qw(e,o);return NK(n._repo,n,a),()=>VP(n._repo,n,a)}function ex(n,e,t,r){return VK(n,"value",e,t,r)}G5(wr);Z5(wr);var UK="FIREBASE_DATABASE_EMULATOR_HOST",Kw={},jK=!1;function BK(n,e,t,r){n.repoInfo_=new sp(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function $K(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||yr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=UP(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[UK]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=UP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let u=i&&c?new Ol(Ol.OWNER):new iw(n.name,n.options,e);EK("Invalid Firebase Database URL",o),Z(o.path)||yr("Database URL must point to the root of a Firebase Database (not including a child path).");let d=WK(a,n,u,new rw(n.name,t));return new Yw(d,n)}function HK(n,e){let t=Kw[e];(!t||t[n.key]!==n)&&yr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),RK(n),delete t[n.key]}function WK(n,e,t,r){let i=Kw[e.name];i||(i={},Kw[e.name]=i);let s=i[n.toURLString()];return s&&yr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Hw(n,jK,t,r),i[n.toURLString()]=s,s}var Yw=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(TK(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wr(this._repo,le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(HK(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yr("Cannot call "+e+" on a deleted database.")}};function tx(n=Oo(),e){let t=Uc(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=zA("database");r&&nx(t,...r)}return t}function nx(n,e,t,r={}){n=Qe(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&yr("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ol(Ol.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:GA(r.mockUserToken,n.app.options.projectId);s=new Ol(o)}BK(i,e,t,s)}function zK(n){g6(ri),ni(new Ht("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return $K(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Fe(oP,aP,n),Fe(oP,aP,"esm2017")}eC.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};eC.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};zK();var Cr=class{constructor(e){return e}},rx="database",EC=class{constructor(){return jc(rx)}};var wC=new A("angularfire2.database-instances");function GK(n,e){let t=$h(rx,n,e);return t&&new Cr(t)}function qK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Cr(r)}}var KK={provide:EC,deps:[[new Xe,wC]]},YK={provide:Cr,useFactory:GK,deps:[[new Xe,wC],ar]};function ix(n,...e){return Fe("angularfire",Qi.full,"rtdb"),St([YK,KK,{provide:wC,useFactory:qK(n),multi:!0,deps:[oe,Ge,Fo,Ji,[new Xe,ol],[new Xe,Lo],...e]}])}var sx=je(iP,!0);var ox=je(_i,!0);var ax=je(tx,!0);var cx=je(ex,!0);var lx=je(ZO,!0);var vi=je(JO,!0);var ux=je(XO,!0);var Kl=je(Pp,!0);var Kt=class n{constructor(e){this.database=e}COLLECTION_NAME="persons";savePerson(e){let t=vi(this.database,`/persons/${e.uid}`);return Kl(t,e)}getByUid(e){let t=vi(this.database,this.COLLECTION_NAME),r=ox(t,e);return sx(r)}static \u0275fac=function(t){return new(t||n)(k(Cr))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};var Yt=class n{constructor(e,t){this.auth=e;this.personService=t}getCurrentUser(){return this.auth.currentUser}register({email:e,password:t}){return nM(this.auth,e,t)}login({email:e,password:t}){return se(iM(this.auth,e,t))}loginWithGoogle(){return sM(this.auth,new cI)}logout(){return se(oM(this.auth))}isAuthenticated(){return new L(e=>{EI(this.auth,t=>{e.next(!!t)},t=>{e.error(t)})})}getUserAuthenticated(){return new L(e=>{EI(this.auth,t=>{e.next(t)},t=>{e.error(t)})})}getUserDataAuth(){return se(this.getUserAuthenticated()).pipe(ze(e=>e&&e.uid?this.personService.getByUid(e.uid).pipe(x(t=>t?{user:e,person:t}:{user:null,person:null}),dt(()=>M({user:null,person:null}))):M({user:null,person:null})),dt(()=>M({user:null,person:null})))}static \u0275fac=function(t){return new(t||n)(k(gr),k(Kt))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};var hx=(n,e)=>({"is-valid":n,"is-invalid":e});function QK(n,e){n&1&&(_(0,"small"),y(1,"El email es obligatorio."),g())}function JK(n,e){n&1&&(_(0,"small"),y(1,"Email inv\xE1lido."),g())}function ZK(n,e){if(n&1&&(_(0,"div",20),ne(1,QK,2,0,"small",21)(2,JK,2,0,"small",21),g()),n&2){let t,r,i=Ie();b(),D("ngIf",(t=i.formLogin.get("email"))==null?null:t.hasError("required")),b(),D("ngIf",(r=i.formLogin.get("email"))==null?null:r.hasError("email"))}}function XK(n,e){n&1&&(_(0,"small"),y(1,"La contrase\xF1a es obligatoria."),g())}function eY(n,e){n&1&&(_(0,"small"),y(1,"La contrase\xF1a debe tener al menos 6 caracteres."),g())}function tY(n,e){if(n&1&&(_(0,"div",20),ne(1,XK,2,0,"small",21)(2,eY,2,0,"small",21),g()),n&2){let t,r,i=Ie();b(),D("ngIf",(t=i.formLogin.get("password"))==null?null:t.hasError("required")),b(),D("ngIf",(r=i.formLogin.get("password"))==null?null:r.hasError("minlength"))}}var Op=class n{constructor(e,t,r){this.loginservice=t;this.router=r;this.formLogin=e.group({email:["",[be.required,be.email]],password:["",[be.required,be.minLength(6)]]})}formLogin;onSubmit(){this.formLogin.valid?(console.log("Los campos de texto son v\xE1lidos"),this.loginservice.login(this.formLogin.value).subscribe({next:e=>{console.log("Login exitoso:",e),this.router.navigate(["/tasks"])},error:e=>{console.error("Error en el login:",e)}}),console.log(this.loginservice.isAuthenticated)):alert("Por favor, completa todos los campos correctamente.")}loginWithGoogle(){this.loginservice.loginWithGoogle().then(e=>this.router.navigate(["/home"])).catch(e=>console.log(e))}goToRegister(){this.router.navigate(["/signin"])}static \u0275fac=function(t){return new(t||n)(S(Ao),S(Yt),S(xe))};static \u0275cmp=ue({type:n,selectors:[["app-login"]],standalone:!0,features:[de],decls:31,vars:12,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100",2,"background-color","#f0f8ff"],[1,"card","shadow-lg","p-4","border-0","rounded-3",2,"width","30rem","max-width","90%"],[1,"text-center","mb-4","text-primary"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-3"],["for","email",1,"form-label","fw-bold"],["type","email","id","email","placeholder","Introduce tu email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label","fw-bold"],["type","password","id","password","placeholder","Introduce tu contrase\xF1a","formControlName","password",1,"form-control",3,"ngClass"],[1,"form-group","form-check","mb-3"],["type","checkbox","id","rememberMe",1,"form-check-input"],["for","rememberMe",1,"form-check-label"],[1,"d-flex","justify-content-center","mb-3"],["type","submit",1,"btn","btn-primary","w-100","fw-bold","py-2",3,"disabled"],["type","button",1,"btn","btn-danger","w-100","fw-bold","py-2",3,"click"],[1,"bi","bi-google","me-2"],[1,"text-center"],[1,"text-muted"],["href","javascript:void(0);",1,"text-decoration-none","text-primary","fw-bold",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,r){if(t&1&&(_(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"Bienvenido a TaskManager"),g(),_(4,"form",3),ye("ngSubmit",function(){return r.onSubmit()}),_(5,"div",4)(6,"label",5),y(7,"Correo Electr\xF3nico"),g(),ee(8,"input",6),ne(9,ZK,3,2,"div",7),g(),_(10,"div",4)(11,"label",8),y(12,"Contrase\xF1a"),g(),ee(13,"input",9),ne(14,tY,3,2,"div",7),g(),_(15,"div",10),ee(16,"input",11),_(17,"label",12),y(18,"Recordarme"),g()(),_(19,"div",13)(20,"button",14),y(21," Iniciar Sesi\xF3n "),g()(),_(22,"div",13)(23,"button",15),ye("click",function(){return r.loginWithGoogle()}),ee(24,"i",16),y(25,"Iniciar sesi\xF3n con Google "),g()(),_(26,"div",17)(27,"p",18),y(28,"\xBFNo tienes cuenta? "),_(29,"a",19),ye("click",function(){return r.goToRegister()}),y(30," Reg\xEDstrate aqu\xED "),g()()()()()()),t&2){let i,s,o,a;b(4),D("formGroup",r.formLogin),b(4),D("ngClass",Mt(6,hx,((i=r.formLogin.get("email"))==null?null:i.valid)&&((i=r.formLogin.get("email"))==null?null:i.touched),((i=r.formLogin.get("email"))==null?null:i.invalid)&&((i=r.formLogin.get("email"))==null?null:i.touched))),b(),D("ngIf",((s=r.formLogin.get("email"))==null?null:s.invalid)&&((s=r.formLogin.get("email"))==null?null:s.touched)),b(4),D("ngClass",Mt(9,hx,((o=r.formLogin.get("password"))==null?null:o.valid)&&((o=r.formLogin.get("password"))==null?null:o.touched),((o=r.formLogin.get("password"))==null?null:o.invalid)&&((o=r.formLogin.get("password"))==null?null:o.touched))),b(),D("ngIf",((a=r.formLogin.get("password"))==null?null:a.invalid)&&((a=r.formLogin.get("password"))==null?null:a.touched)),b(6),D("disabled",r.formLogin.invalid)}},dependencies:[No,So,Jr,To,Do,Wi,zi,Ye,Gr,Bt]})};var xp=class{uid;name;surname;email;role;createAt;constructor(e,t,r,i,s,o){this.uid=e,this.name=t,this.surname=r,this.email=i,this.role=s,this.createAt=o}};var Lp=(n,e)=>({"is-valid":n,"is-invalid":e});function nY(n,e){n&1&&(_(0,"small"),y(1,"El nombre es obligatorio."),g())}function rY(n,e){n&1&&(_(0,"small"),y(1,"Nombre demasiado largo."),g())}function iY(n,e){if(n&1&&(_(0,"div",19),ne(1,nY,2,0,"small",20)(2,rY,2,0,"small",20),g()),n&2){let t,r,i=Ie();b(),D("ngIf",(t=i.formSignin.get("name"))==null?null:t.hasError("required")),b(),D("ngIf",(r=i.formSignin.get("name"))==null?null:r.hasError("maxlength"))}}function sY(n,e){n&1&&(_(0,"small"),y(1,"El apellido es obligatorio."),g())}function oY(n,e){n&1&&(_(0,"small"),y(1,"Apellido demasiado largo."),g())}function aY(n,e){n&1&&(_(0,"small"),y(1,"Apellido demasiado corto."),g())}function cY(n,e){if(n&1&&(_(0,"div",19),ne(1,sY,2,0,"small",20)(2,oY,2,0,"small",20)(3,aY,2,0,"small",20),g()),n&2){let t,r,i,s=Ie();b(),D("ngIf",(t=s.formSignin.get("surname"))==null?null:t.hasError("required")),b(),D("ngIf",(r=s.formSignin.get("surname"))==null?null:r.hasError("maxlength")),b(),D("ngIf",(i=s.formSignin.get("surname"))==null?null:i.hasError("minlength"))}}function lY(n,e){n&1&&(_(0,"small"),y(1,"El email es obligatorio."),g())}function uY(n,e){n&1&&(_(0,"small"),y(1,"Email inv\xE1lido."),g())}function dY(n,e){if(n&1&&(_(0,"div",19),ne(1,lY,2,0,"small",20)(2,uY,2,0,"small",20),g()),n&2){let t,r,i=Ie();b(),D("ngIf",(t=i.formSignin.get("email"))==null?null:t.hasError("required")),b(),D("ngIf",(r=i.formSignin.get("email"))==null?null:r.hasError("email"))}}function hY(n,e){n&1&&(_(0,"small"),y(1,"La contrase\xF1a es obligatoria."),g())}function fY(n,e){n&1&&(_(0,"small"),y(1,"Debe tener al menos 6 caracteres."),g())}function pY(n,e){if(n&1&&(_(0,"div",19),ne(1,hY,2,0,"small",20)(2,fY,2,0,"small",20),g()),n&2){let t,r,i=Ie();b(),D("ngIf",(t=i.formSignin.get("password"))==null?null:t.hasError("required")),b(),D("ngIf",(r=i.formSignin.get("password"))==null?null:r.hasError("minlength"))}}var Fp=class n{constructor(e,t,r,i){this.formBuilder=e;this.registerservice=t;this.router=r;this.personService=i;this.formSignin=this.formBuilder.group({name:["",[be.required,be.maxLength(50)]],surname:["",[be.required,be.maxLength(50),be.minLength(2)]],email:["",[be.required,be.email]],role:["",[]],password:["",[be.required,be.minLength(6)]]})}formSignin;onSubmit(){if(this.formSignin.valid){let e=this.formSignin.get("name")?.value,t=this.formSignin.get("surname")?.value,r=this.formSignin.get("email")?.value,i=this.formSignin.get("role")?.value?"admin":"user",s=this.formSignin.get("password")?.value;this.registerservice.register({email:r,password:s}).then(o=>{let a=o.user.uid,c=new xp(a,e,t,r,i,new Date().toISOString());return this.personService.savePerson(c)}).then(()=>{alert("Registro exitoso. Por favor, inicia sesi\xF3n."),this.formSignin.reset(),this.router.navigate(["/tasks"])}).catch(o=>{console.error("Error durante el registro:",o),alert("Hubo un error durante el registro. Intente nuevamente.")})}else console.log("Formulario no v\xE1lido"),alert("Por favor, revisa los campos del formulario.")}static \u0275fac=function(t){return new(t||n)(S(Ao),S(Yt),S(xe),S(Kt))};static \u0275cmp=ue({type:n,selectors:[["app-signin"]],standalone:!0,features:[de],decls:32,vars:21,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100",2,"background-color","#f0f8ff"],[1,"card","shadow-lg","p-4","border-0","rounded-3",2,"width","35rem","max-width","90%"],[1,"text-center","mb-4","text-primary"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","nombre",1,"form-label","fw-bold"],["type","text","id","nombre","placeholder","Ingrese su nombre","required","","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","apellidos",1,"form-label","fw-bold"],["type","text","id","apellidos","placeholder","Ingrese sus apellidos","required","","formControlName","surname",1,"form-control",3,"ngClass"],["for","email",1,"form-label","fw-bold"],["type","email","id","email","placeholder","Ingrese su email","required","","formControlName","email",1,"form-control",3,"ngClass"],[1,"form-check","form-switch","mb-3"],["type","checkbox","role","switch","id","flexSwitchCheckDefault","formControlName","role",1,"form-check-input"],["for","flexSwitchCheckDefault",1,"form-check-label","fw-bold"],["for","password",1,"form-label","fw-bold"],["type","password","id","password","placeholder","Ingrese su contrase\xF1a","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","w-100","fw-bold","py-2"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,r){if(t&1&&(_(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"\xA1Reg\xEDstrate!"),g(),_(4,"form",3),ye("ngSubmit",function(){return r.onSubmit()}),_(5,"div",4)(6,"label",5),y(7,"Nombre"),g(),ee(8,"input",6),ne(9,iY,3,2,"div",7),g(),_(10,"div",4)(11,"label",8),y(12,"Apellidos"),g(),ee(13,"input",9),ne(14,cY,4,3,"div",7),g(),_(15,"div",4)(16,"label",10),y(17,"Correo Electr\xF3nico"),g(),ee(18,"input",11),ne(19,dY,3,2,"div",7),g(),_(20,"div",12),ee(21,"input",13),_(22,"label",14),y(23,' Activar para ser "admin" (por defecto "user") '),g()(),_(24,"div",4)(25,"label",15),y(26,"Contrase\xF1a"),g(),ee(27,"input",16),ne(28,pY,3,2,"div",7),g(),_(29,"div",17)(30,"button",18),y(31,"Registrarse"),g()()()()()),t&2){let i,s,o,a,c,l,u,d;b(4),D("formGroup",r.formSignin),b(4),D("ngClass",Mt(9,Lp,((i=r.formSignin.get("name"))==null?null:i.valid)&&((i=r.formSignin.get("name"))==null?null:i.touched),((i=r.formSignin.get("name"))==null?null:i.invalid)&&((i=r.formSignin.get("name"))==null?null:i.touched))),b(),D("ngIf",((s=r.formSignin.get("name"))==null?null:s.invalid)&&((s=r.formSignin.get("name"))==null?null:s.touched)),b(4),D("ngClass",Mt(12,Lp,((o=r.formSignin.get("surname"))==null?null:o.valid)&&((o=r.formSignin.get("surname"))==null?null:o.touched),((o=r.formSignin.get("surname"))==null?null:o.invalid)&&((o=r.formSignin.get("surname"))==null?null:o.touched))),b(),D("ngIf",((a=r.formSignin.get("surname"))==null?null:a.invalid)&&((a=r.formSignin.get("surname"))==null?null:a.touched)),b(4),D("ngClass",Mt(15,Lp,((c=r.formSignin.get("email"))==null?null:c.valid)&&((c=r.formSignin.get("email"))==null?null:c.touched),((c=r.formSignin.get("email"))==null?null:c.invalid)&&((c=r.formSignin.get("email"))==null?null:c.touched))),b(),D("ngIf",((l=r.formSignin.get("email"))==null?null:l.invalid)&&((l=r.formSignin.get("email"))==null?null:l.touched)),b(8),D("ngClass",Mt(18,Lp,((u=r.formSignin.get("password"))==null?null:u.valid)&&((u=r.formSignin.get("password"))==null?null:u.touched),((u=r.formSignin.get("password"))==null?null:u.invalid)&&((u=r.formSignin.get("password"))==null?null:u.touched))),b(),D("ngIf",((d=r.formSignin.get("password"))==null?null:d.invalid)&&((d=r.formSignin.get("password"))==null?null:d.touched))}},dependencies:[Bt,No,So,Jr,Nv,To,Do,xv,Wi,zi,Gr]})};var Vp=class{id;name;description;priority;status;creationDate;expirationDate;isDelete;constructor(e,t,r,i,s,o,a,c){this.id=e,this.name=t,this.description=r,this.priority=i,this.status=s,this.creationDate=o,this.expirationDate=a,this.isDelete=c}getStatusText(){switch(this.status){case"C":return"Completed";case"IP":return"In Progress";case"P":return"Pending";default:return"Unknown"}}getPriorityText(){switch(this.priority){case"H":return"Alta";case"M":return"Media";case"L":return"Baja";default:return""}}raisePriority(){this.priority!=="H"&&(this.priority=this.priority==="L"?"M":"H")}lowerPriority(){this.priority!=="L"&&(this.priority=this.priority==="H"?"M":"L")}changeStatus(){switch(this.status){case"C":this.status="IP";break;case"IP":this.status="C";break;case"P":this.status="IP";break}}};var yi=class n{constructor(e){this.database=e}taskList=[];changeStatus(e){let t=this.taskList.find(r=>r.id===e);if(t)switch(t.status){case"P":t.status="IP";break;case"IP":t.status="C";break;case"C":t.status="P";break}}changePriorityDown(e){let t=this.taskList.find(r=>r.id===e);if(t)switch(t.priority){case"H":t.priority="M";break;case"M":t.priority="L";break;case"L":t.priority="H";break}}changePriorityUp(e){let t=this.taskList.find(r=>r.id===e);if(t)switch(t.priority){case"H":t.priority="L";break;case"M":t.priority="H";break;case"L":t.priority="M";break}}addTask(e){let t=vi(this.database,"taskList"),r=lx(t);return e.id=r.key,Kl(r,e).then(()=>(console.log("Tarea guardada exitosamente en Firebase."),e.id)).catch(i=>{throw console.error("Error al guardar la tarea:",i),i})}getTasksAll(){let e=vi(this.database,"taskList");return new L(t=>{cx(e,r=>{let i=[];r.forEach(s=>{i.push(w({id:s.key},s.val()))}),t.next(i)},r=>{t.error(r)})})}deleteTask(e){let t=vi(this.database,`taskList/${e}`);return se(ux(t)).pipe(Te(()=>console.log(`Tarea con ID ${e} borrada correctamente.`)),dt(r=>(console.error(`Error borrando la tarea con ID ${e}:`,r),Nr(()=>r))))}updateTask(e){let t=vi(this.database,`taskList/${e.id}`);return Kl(t,e).then(()=>{console.log("Tarea actualizada exitosamente en Firebase.")}).catch(r=>{throw console.error("Error al actualizar la tarea:",r),r})}static \u0275fac=function(t){return new(t||n)(k(Cr))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};var mY=(n,e,t)=>({" text-bg-danger":n,"text-bg-success":e,"text-bg-warning":t}),gY=n=>({"bi bi-play-fill":n}),_Y=n=>({"bi bi-check-lg":n}),vY=n=>({"bi bi-arrow-return-right":n});function yY(n,e){n&1&&(_(0,"span"),y(1,"\xA0"),g())}function IY(n,e){if(n&1){let t=io();_(0,"i",18),ye("click",function(){An(t);let i=Ie(2);return Nn(i.changePriorityUp(i.taskInput.id))}),g()}}function EY(n,e){n&1&&(_(0,"span"),y(1,"\xA0"),g())}function wY(n,e){if(n&1){let t=io();_(0,"i",19),ye("click",function(){An(t);let i=Ie(2);return Nn(i.changePriorityDown(i.taskInput.id))}),g()}}function CY(n,e){if(n&1){let t=io();_(0,"div",1)(1,"div",2)(2,"h5",3),y(3),g()(),_(4,"div",4)(5,"div",5)(6,"h2",6)(7,"button",7),y(8),g()(),_(9,"div",8)(10,"ul",9)(11,"li",10),y(12),ne(13,yY,2,0,"span",11)(14,IY,1,0,"i",12)(15,EY,2,0,"span",11)(16,wY,1,0,"i",13),g(),_(17,"li",10),y(18),_(19,"i",14),ye("click",function(){An(t);let i=Ie();return Nn(i.changeStatus(i.taskInput.id))}),g(),_(20,"i",14),ye("click",function(){An(t);let i=Ie();return Nn(i.changeStatus(i.taskInput.id))}),g(),_(21,"i",14),ye("click",function(){An(t);let i=Ie();return Nn(i.changeStatus(i.taskInput.id))}),g()(),_(22,"li",10),y(23),g(),_(24,"li",10)(25,"button",15),ye("click",function(){An(t);let i=Ie();return Nn(i.editTask(i.taskInput))}),ee(26,"i",16),y(27," Editar "),g(),_(28,"button",15),ye("click",function(){An(t);let i=Ie();return Nn(i.deleteTask(i.taskInput.id.toString()))}),ee(29,"i",17),y(30," Borrar "),g()()()()()()()}if(n&2){let t=Ie();D("ngClass",DS(20,mY,t.taskInput.priority=="H",t.taskInput.priority=="L",t.taskInput.priority=="M")),b(3),Wr(t.taskInput.name),b(),D("id","accordionFlushExample"+t.taskInput.id),b(2),D("id","flush-headingOne"+t.taskInput.id),b(),Hr("data-bs-target","#flush-collapseOne"+t.taskInput.id)("aria-controls","flush-collapseOne"+t.taskInput.id),b(),Fi(" ",t.taskInput.description,""),b(),D("id","flush-collapseOne"+t.taskInput.id),Hr("aria-labelledby","flush-headingOne"+t.taskInput.id)("data-bs-parent","#accordionFlushExample"+t.taskInput.id),b(3),Fi(" Prioridad: ",t.taskInput.priority," "),b(),D("ngIf",(t.taskInput.priority=="L"||t.taskInput.priority=="M")&&t.taskInput.status!="C"),b(),D("ngIf",(t.taskInput.priority=="L"||t.taskInput.priority=="M")&&t.taskInput.status!="C"),b(),D("ngIf",(t.taskInput.priority=="H"||t.taskInput.priority=="M")&&t.taskInput.status!="C"),b(),D("ngIf",(t.taskInput.priority=="H"||t.taskInput.priority=="M")&&t.taskInput.status!="C"),b(2),Fi(" Estado: ",t.taskInput.status," "),b(),D("ngClass",jd(24,gY,t.taskInput.status=="P")),b(),D("ngClass",jd(26,_Y,t.taskInput.status=="IP")),b(),D("ngClass",jd(28,vY,t.taskInput.status=="C")),b(2),Fi("Expira: ",t.taskInput.expirationDate,"")}}var Up=class n{constructor(e,t){this.taskService=e;this.router=t}taskInput;tasks=[];changeStatus(e){this.taskService.changeStatus(e)}changePriorityDown(e){this.taskService.changePriorityDown(e)}changePriorityUp(e){this.taskService.changePriorityUp(e)}deleteTask(e){this.taskService.deleteTask(e).subscribe(()=>{console.log(`Task ${e} borrada correctamente.`)},t=>{console.error(`Error borrando tarea ${e}:`,t),alert("Hubo un error al borrar la tarea. Revisa la consola para m\xE1s detalles.")})}editTask(e){this.router.navigate(["/taskform",e.id])}static \u0275fac=function(t){return new(t||n)(S(yi),S(xe))};static \u0275cmp=ue({type:n,selectors:[["app-resume"]],inputs:{taskInput:"taskInput"},standalone:!0,features:[de],decls:1,vars:1,consts:[["class","card",3,"ngClass",4,"ngIf"],[1,"card",3,"ngClass"],[1,"card-body"],[1,"card-title"],[1,"accordion","accordion-flush",3,"id"],[1,"accordion-item"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed"],[1,"accordion-collapse","collapse",3,"id"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[4,"ngIf"],["class","bi bi-arrow-up-circle-fill",3,"click",4,"ngIf"],["class","bi bi-arrow-down-circle-fill",3,"click",4,"ngIf"],[3,"click","ngClass"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-pencil-square"],[1,"bi","bi-trash"],[1,"bi","bi-arrow-up-circle-fill",3,"click"],[1,"bi","bi-arrow-down-circle-fill",3,"click"]],template:function(t,r){t&1&&ne(0,CY,31,30,"div",0),t&2&&D("ngIf",r.taskInput.isDelete==!1)},dependencies:[Ye,Gr,Bt],styles:[".card[_ngcontent-%COMP%]{margin-top:2%;margin-bottom:2%}"]})};function bY(n,e){if(n&1&&ee(0,"app-resume",10),n&2){let t=Ie().$implicit;D("taskInput",t)}}function TY(n,e){if(n&1&&(Ya(0),_(1,"div",8),ne(2,bY,1,1,"app-resume",9),g(),Qa()),n&2){let t=e.$implicit;b(2),D("ngIf",t)}}var wa=class n{constructor(e,t,r){this.taskService=e;this.authService=t;this.personService=r}tasks=[];taskOutput=null;personName="";personSurname="";ngOnInit(){this.taskService.getTasksAll().subscribe(t=>{this.tasks=t,console.log("Tareas actualizadas en tiempo real:",this.tasks)});let e=this.authService.getCurrentUser();if(e){let t=e.uid;this.personService.getByUid(t).subscribe({next:r=>{r&&(this.personName=r.name,this.personSurname=r.surname)},error:r=>{console.error("Error al cargar los datos de la persona:",r)}})}}static \u0275fac=function(t){return new(t||n)(S(yi),S(Yt),S(Kt))};static \u0275cmp=ue({type:n,selectors:[["app-tasklist"]],standalone:!0,features:[de],decls:10,vars:3,consts:[[1,"container","my-5"],[1,"row"],[1,"col-md-12","text-center","mb-4"],[1,"text-primary"],[1,"text-muted"],[1,"col-md-12"],[1,"task-list","bg-light","p-4","rounded","shadow-sm"],[4,"ngFor","ngForOf"],[1,"task-item","mb-3"],[3,"taskInput",4,"ngIf"],[3,"taskInput"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),y(4),g(),_(5,"h3",4),y(6,"Listado de Tareas"),g()(),_(7,"div",5)(8,"div",6),ne(9,TY,3,1,"ng-container",7),g()()()()),t&2&&(b(4),y_("Bienvenido, ",r.personName," ",r.personSurname,"."),b(5),D("ngForOf",r.tasks))},dependencies:[Ye,qS,Bt,Up,kh]})};var jp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-home"]],standalone:!0,features:[de],decls:1,vars:0,template:function(t,r){t&1&&ee(0,"app-tasklist")},dependencies:[wa,Ye]})};var Bp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-tasks"]],standalone:!0,features:[de],decls:1,vars:0,template:function(t,r){t&1&&ee(0,"app-tasklist")},dependencies:[wa,Ye]})};var $p=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[de],decls:1,vars:0,template:function(t,r){t&1&&ee(0,"router-outlet")},dependencies:[Ye,Ic]})};var Hp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-notfound"]],standalone:!0,features:[de],decls:9,vars:0,consts:[[1,"d-flex","flex-column","align-items-center","justify-content-center",2,"height","100vh","text-align","center"],[1,"display-1","text-danger"],[1,"text-dark"],[1,"text-muted"],["routerLink","/home",1,"btn","btn-primary","mt-3"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"h1",1),y(2,"404"),g(),_(3,"h2",2),y(4,"P\xE1gina No Encontrada"),g(),_(5,"p",3),y(6,"Lo sentimos, no hemos podido encontrar la p\xE1gina que buscas."),g(),_(7,"a",4),y(8,"Volver al Inicio"),g()())},dependencies:[_h]})};var Wp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-stats"]],standalone:!0,features:[de],decls:2,vars:0,template:function(t,r){t&1&&(_(0,"p"),y(1,"stats works!"),g())}})};var zp=class n{constructor(e,t){this.personservice=e;this.authService=t}userName="";userSurname="";userEmail="";userRole="";ngOnInit(){let e=this.authService.getCurrentUser();if(e){let t=e.uid;this.personservice.getByUid(t).subscribe({next:r=>{r&&(this.userName=r.name,this.userSurname=r.surname,this.userEmail=r.email,this.userRole=r.role)},error:r=>{console.error("Error al cargar los datos de la persona:",r)}})}}static \u0275fac=function(t){return new(t||n)(S(Kt),S(Yt))};static \u0275cmp=ue({type:n,selectors:[["app-profile"]],standalone:!0,features:[de],decls:38,vars:4,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow-lg","border-0","rounded-3"],[1,"card-header","bg-primary","text-white","text-center","rounded-top"],[1,"mb-0"],[1,"card-body"],[1,"text-center","mb-4"],["src","https://as1.ftcdn.net/jpg/04/56/58/14/1000_F_456581427_5XpGqNqCwLAGwaFFvxVGvnW2teOfJ0ZL.jpg","alt","Foto de perfil","width","150",1,"rounded-circle","img-thumbnail","shadow-sm"],[1,"row","mb-3"],[1,"col-md-4","text-end"],[1,"badge","bg-info","text-dark","px-3","py-2","shadow-sm"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),y(6,"Perfil de Usuario"),g()(),_(7,"div",6)(8,"div",7),ee(9,"img",8),g(),_(10,"div",9)(11,"div",10)(12,"strong"),y(13,"Nombre:"),g()(),_(14,"div",2)(15,"span"),y(16),g()()(),_(17,"div",9)(18,"div",10)(19,"strong"),y(20,"Apellidos:"),g()(),_(21,"div",2)(22,"span"),y(23),g()()(),_(24,"div",9)(25,"div",10)(26,"strong"),y(27,"Email:"),g()(),_(28,"div",2)(29,"span"),y(30),g()()(),_(31,"div",9)(32,"div",10)(33,"strong"),y(34,"Rol:"),g()(),_(35,"div",2)(36,"span",11),y(37),g()()()()()()()()),t&2&&(b(16),Wr(r.userName),b(7),Wr(r.userSurname),b(7),Wr(r.userEmail),b(7),Wr(r.userRole))}})};var fx=x(n=>!!n),Ca=(()=>{class n{router;auth;constructor(t,r){this.router=t,this.auth=r}canActivate=(t,r)=>{let i=t.data.authGuardPipe||(()=>fx);return tM(this.auth).pipe(ht(1),i(t,r),x(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(r){return new(r||n)(k(xe),k(gr))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Gp=n=>({canActivate:[Ca],data:{authGuardPipe:n}});var qp=n=>Da(fx,x(e=>e||n));function px(){return n=>{let e=n.value;return new Date(e)>=new Date?null:{invalidDate:!0}}}function mx(){return n=>{let e=n.value;return e=="H"||e=="M"||e=="L"?null:{invalidPriority:!0}}}var Kp=(n,e)=>({"is-valid":n,"is-invalid":e});function DY(n,e){n&1&&(_(0,"small"),y(1,"El nombre es obligatorio."),g())}function SY(n,e){n&1&&(_(0,"small"),y(1,"No puede tener m\xE1s de 50 caracteres."),g())}function AY(n,e){n&1&&(_(0,"small"),y(1,"Debe tener al menos 5 caracteres."),g())}function NY(n,e){if(n&1&&(_(0,"div",19),ne(1,DY,2,0,"small",20)(2,SY,2,0,"small",20)(3,AY,2,0,"small",20),g()),n&2){let t,r,i,s=Ie();b(),D("ngIf",(t=s.formTaskEdit.get("name"))==null?null:t.hasError("required")),b(),D("ngIf",(r=s.formTaskEdit.get("name"))==null?null:r.hasError("maxlength")),b(),D("ngIf",(i=s.formTaskEdit.get("name"))==null?null:i.hasError("minlength"))}}function RY(n,e){n&1&&(_(0,"small"),y(1,"La descripci\xF3n es obligatoria."),g())}function MY(n,e){if(n&1&&(_(0,"div",19),ne(1,RY,2,0,"small",20),g()),n&2){let t,r=Ie();b(),D("ngIf",(t=r.formTaskEdit.get("description"))==null?null:t.hasError("required"))}}function kY(n,e){n&1&&(_(0,"small"),y(1,"La prioridad es obligatoria."),g())}function PY(n,e){n&1&&(_(0,"small"),y(1,"La prioridad debe ser Alta, Media o Baja."),g())}function OY(n,e){if(n&1&&(_(0,"div",19),ne(1,kY,2,0,"small",20)(2,PY,2,0,"small",20),g()),n&2){let t,r,i=Ie();b(),D("ngIf",(t=i.formTaskEdit.get("priority"))==null?null:t.hasError("required")),b(),D("ngIf",(r=i.formTaskEdit.get("priority"))==null?null:r.hasError("invalidPriority"))}}function xY(n,e){n&1&&(_(0,"small"),y(1,"La fecha de expiraci\xF3n es obligatoria."),g())}function LY(n,e){n&1&&(_(0,"small"),y(1,"La fecha no puede ser menor a la actual."),g())}function FY(n,e){if(n&1&&(_(0,"div",19),ne(1,xY,2,0,"small",20)(2,LY,2,0,"small",20),g()),n&2){let t,r,i=Ie();b(),D("ngIf",(t=i.formTaskEdit.get("expireDate"))==null?null:t.hasError("required")),b(),D("ngIf",(r=i.formTaskEdit.get("expireDate"))==null?null:r.hasError("invalidDate"))}}var Yp=class n{constructor(e,t,r,i){this.taskService=t;this.router=r;this.route=i;this.formTaskEdit=e.group({name:["",[be.required,be.maxLength(50),be.minLength(5)]],description:["",[be.required,be.maxLength(250)]],priority:["",[be.required,mx()]],expireDate:["",[be.required,px()]]})}formTaskEdit;taskInput=null;onSubmit(){if(this.formTaskEdit.valid){let e=new Vp(this.formTaskEdit.get("id")?.value||"",this.formTaskEdit.get("name")?.value,this.formTaskEdit.get("description")?.value,this.formTaskEdit.get("priority")?.value||"M",this.formTaskEdit.get("status")?.value||"P",this.formTaskEdit.get("creationDate")?.value||new Date().toISOString(),this.formTaskEdit.get("expireDate")?.value,this.formTaskEdit.get("isDelete")?.value||!1);this.taskService.addTask(e).then(()=>{console.log("Tarea creada con \xE9xito:",e),this.formTaskEdit.reset(),this.router.navigate(["/tasks"])}).catch(t=>{console.error("Error al guardar la tarea:",t)})}}ngOnChanges(e){e.taskInput&&(console.log(this.taskInput),this.taskInput!=null&&this.formTaskEdit.setValue({name:this.taskInput.name,description:this.taskInput.description,priority:this.taskInput.priority,expireDate:this.taskInput.expirationDate.toString().slice(0,16)}))}static \u0275fac=function(t){return new(t||n)(S(Ao),S(yi),S(xe),S(On))};static \u0275cmp=ue({type:n,selectors:[["app-taskform"]],inputs:{taskInput:"taskInput"},standalone:!0,features:[on,de],decls:37,vars:21,consts:[[1,"container","mt-5","d-flex","justify-content-center"],[1,"card","shadow-lg","p-5","border-0","rounded-3",2,"width","40rem","max-width","100%"],[1,"text-center","mb-4","text-primary"],[3,"ngSubmit","formGroup"],[1,"form-group","mb-4"],["for","exampleFormControlInput1",1,"form-label","fw-bold"],["type","text","id","exampleFormControlInput1","formControlName","name","placeholder","Escribe el nombre de la tarea",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label","fw-bold"],["id","description","rows","3","formControlName","description","placeholder","Describe la tarea en detalle",1,"form-control",3,"ngClass"],["for","exampleFormControlSelect1",1,"form-label","fw-bold"],["id","exampleFormControlSelect1","formControlName","priority",1,"form-control",3,"ngClass"],["value","","disabled","","selected",""],["value","H"],["value","M"],["value","L"],["type","datetime-local","formControlName","expireDate",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-center"],["type","submit",1,"btn","btn-primary","w-50","fw-bold","py-2"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,r){if(t&1&&(_(0,"div",0)(1,"div",1)(2,"h1",2),y(3,"Nueva Tarea"),g(),_(4,"form",3),ye("ngSubmit",function(){return r.onSubmit()}),_(5,"div",4)(6,"label",5),y(7,"Nombre de la Tarea"),g(),ee(8,"input",6),ne(9,NY,4,3,"div",7),g(),_(10,"div",4)(11,"label",8),y(12,"Descripci\xF3n"),g(),_(13,"textarea",9),y(14,"        "),g(),ne(15,MY,2,1,"div",7),g(),_(16,"div",4)(17,"label",10),y(18,"Prioridad"),g(),_(19,"select",11)(20,"option",12),y(21,"Seleccione la prioridad"),g(),_(22,"option",13),y(23,"Alta"),g(),_(24,"option",14),y(25,"Media"),g(),_(26,"option",15),y(27,"Baja"),g()(),ne(28,OY,3,2,"div",7),g(),_(29,"div",4)(30,"label",5),y(31,"Fecha de Expiraci\xF3n"),g(),ee(32,"input",16),ne(33,FY,3,2,"div",7),g(),_(34,"div",17)(35,"button",18),y(36,"Guardar"),g()()()()()),t&2){let i,s,o,a,c,l,u,d;b(4),D("formGroup",r.formTaskEdit),b(4),D("ngClass",Mt(9,Kp,((i=r.formTaskEdit.get("name"))==null?null:i.valid)&&((i=r.formTaskEdit.get("name"))==null?null:i.touched),((i=r.formTaskEdit.get("name"))==null?null:i.invalid)&&((i=r.formTaskEdit.get("name"))==null?null:i.touched))),b(),D("ngIf",((s=r.formTaskEdit.get("name"))==null?null:s.invalid)&&((s=r.formTaskEdit.get("name"))==null?null:s.touched)),b(4),D("ngClass",Mt(12,Kp,((o=r.formTaskEdit.get("description"))==null?null:o.valid)&&((o=r.formTaskEdit.get("description"))==null?null:o.touched),((o=r.formTaskEdit.get("description"))==null?null:o.invalid)&&((o=r.formTaskEdit.get("description"))==null?null:o.touched))),b(2),D("ngIf",((a=r.formTaskEdit.get("description"))==null?null:a.invalid)&&((a=r.formTaskEdit.get("description"))==null?null:a.touched)),b(4),D("ngClass",Mt(15,Kp,((c=r.formTaskEdit.get("priority"))==null?null:c.valid)&&((c=r.formTaskEdit.get("priority"))==null?null:c.touched),((c=r.formTaskEdit.get("priority"))==null?null:c.invalid)&&((c=r.formTaskEdit.get("priority"))==null?null:c.touched))),b(9),D("ngIf",((l=r.formTaskEdit.get("priority"))==null?null:l.invalid)&&((l=r.formTaskEdit.get("priority"))==null?null:l.touched)),b(4),D("ngClass",Mt(18,Kp,((u=r.formTaskEdit.get("expireDate"))==null?null:u.valid)&&((u=r.formTaskEdit.get("expireDate"))==null?null:u.touched),((u=r.formTaskEdit.get("expireDate"))==null?null:u.invalid)&&((u=r.formTaskEdit.get("expireDate"))==null?null:u.touched))),b(),D("ngIf",((d=r.formTaskEdit.get("expireDate"))==null?null:d.invalid)&&((d=r.formTaskEdit.get("expireDate"))==null?null:d.touched))}},dependencies:[No,So,FA,UA,Jr,Mh,To,Do,Wi,zi,Ye,Gr,Bt]})};var gx=[{path:"home",component:jp,canActivate:[Ca],data:{role:"*"}},{path:"tasks",component:Bp,canActivate:[Ca],data:{role:"*"}},{path:"login",component:Op},{path:"taskform/:id",component:Yp,canActivate:[Ca],data:{role:"admin"}},{path:"signin",component:Fp},$(w({path:"dashboard",component:$p},Gp(()=>qp(["/login"]))),{children:[w({path:"stats",component:Wp},Gp(()=>qp(["/login"]))),w({path:"profile",component:zp},Gp(()=>qp(["/login"])))],canActivate:[Ca],data:{role:"*"}}),{path:"notfound",component:Hp},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/notfound",pathMatch:"full"}];var _x={providers:[kS({eventCoalescing:!0}),nA(gx),f0(),gN(()=>_N({apiKey:"AIzaSyDcAflq3xPL45chkWr4t4m9_SRF-to_LnE",authDomain:"task-firebase-ea361.firebaseapp.com",databaseURL:"https://task-firebase-ea361-default-rtdb.europe-west1.firebasedatabase.app",projectId:"task-firebase-ea361",storageBucket:"task-firebase-ea361.firebasestorage.app",messagingSenderId:"142953094248",appId:"1:142953094248:web:7236b7dce8c0fd95172fdd"})),eM(()=>rM()),ix(()=>ax())]};function VY(n,e){n&1&&(_(0,"li",8)(1,"a",9),y(2,"Login"),g()())}function UY(n,e){n&1&&(_(0,"li",8)(1,"a",10),y(2,"Signin"),g()())}function jY(n,e){n&1&&(_(0,"li",8)(1,"a",19),y(2,"Nueva Tarea"),g()())}function BY(n,e){if(n&1){let t=io();Ya(0),_(1,"li",11)(2,"a",12),y(3,"Inicio"),g()(),_(4,"li",13)(5,"a",14),y(6," Dashboard "),g(),_(7,"ul",15)(8,"li")(9,"a",16),y(10,"Stats"),g()(),_(11,"li")(12,"a",17),y(13,"Profile"),g()()()(),ne(14,jY,3,0,"li",6),_(15,"li",8)(16,"a",18),ye("click",function(){An(t);let i=Ie();return Nn(i.logout())}),y(17,"SignOut"),g()(),Qa()}if(n&2){let t=Ie();b(14),D("ngIf",t.role==="admin")}}var Qp=class n{constructor(e,t,r){this.router=e;this.authservice=t;this.personService=r}isLoggedIn=!1;role=null;ngOnInit(){this.authservice.getUserAuthenticated().subscribe({next:e=>{e?this.personService.getByUid(e.uid).subscribe({next:t=>{t&&(this.role=t.role,this.isLoggedIn=!0,console.log("Rol actualizado:",t.role),console.log("isLoggedIn actualizado:",this.isLoggedIn))}}):(this.isLoggedIn=!1,this.role=null)}})}logout(){this.authservice.logout().subscribe({next:()=>console.log("Logout exitoso"),error:e=>console.error("Error al cerrar sesi\xF3n:",e)}),this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(S(xe),S(Yt),S(Kt))};static \u0275cmp=ue({type:n,selectors:[["app-navbar"]],standalone:!0,features:[de],decls:10,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["routerLink","/home",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["class","nav-item",4,"ngIf"],[4,"ngIf"],[1,"nav-item"],["routerLink","/login",1,"nav-link"],["routerLink","/signin",1,"nav-link"],[1,"nav-item","active"],["routerLink","/tasks",1,"nav-link"],[1,"nav-item","dropdown"],["routerLink","/dashboard","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],[1,"dropdown-menu"],["routerLink","/dashboard/stats",1,"dropdown-item"],["routerLink","/dashboard/profile",1,"dropdown-item"],["role","button",1,"nav-link",3,"click"],["routerLink","/taskform/:id",1,"nav-link"]],template:function(t,r){t&1&&(_(0,"nav",0)(1,"a",1),y(2,"TaskManager"),g(),_(3,"button",2),ee(4,"span",3),g(),_(5,"div",4)(6,"ul",5),ne(7,VY,3,0,"li",6)(8,UY,3,0,"li",6)(9,BY,18,1,"ng-container",7),g()()()),t&2&&(b(7),D("ngIf",!r.isLoggedIn),b(),D("ngIf",!r.isLoggedIn),b(),D("ngIf",r.isLoggedIn))},dependencies:[aA,_h,Ye,Bt]})};var Jp=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-footer"]],standalone:!0,features:[de],decls:19,vars:0,consts:[[1,"py-3","my-4"],[1,"nav","justify-content-center","border-bottom","pb-3","mb-3"],[1,"nav-item"],["href","#",1,"nav-link","px-2","text-body-secondary"],[1,"text-center","text-body-secondary"]],template:function(t,r){t&1&&(_(0,"footer",0)(1,"ul",1)(2,"li",2)(3,"a",3),y(4,"Home"),g()(),_(5,"li",2)(6,"a",3),y(7,"Features"),g()(),_(8,"li",2)(9,"a",3),y(10,"Pricing"),g()(),_(11,"li",2)(12,"a",3),y(13,"FAQs"),g()(),_(14,"li",2)(15,"a",3),y(16,"About"),g()()(),_(17,"p",4),y(18,"\xA9 2024 Company, Inc"),g()())}})};var Zp=class n{title="David Castro";imagenaleatoria="";nombre="";numero=0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["app-root"]],standalone:!0,features:[de],decls:3,vars:0,template:function(t,r){t&1&&ee(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[Ic,Qp,Jp,kh]})};d0(Zp,_x).catch(n=>console.error(n));
